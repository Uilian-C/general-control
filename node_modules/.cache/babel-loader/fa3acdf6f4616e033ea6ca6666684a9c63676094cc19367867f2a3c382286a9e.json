{"ast":null,"code":"import _objectSpread from\"/workspaces/general-control/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"/workspaces/general-control/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";const _excluded=[\"children\",\"className\"],_excluded2=[\"okrLinkValue\"],_excluded3=[\"id\"],_excluded4=[\"id\"],_excluded5=[\"localId\"];import React,{useState,useEffect,useMemo,useRef}from'react';import{initializeApp,getApps}from'firebase/app';import{getAuth,onAuthStateChanged,GoogleAuthProvider,signInWithPopup,signOut,createUserWithEmailAndPassword,signInWithEmailAndPassword,updateProfile}from'firebase/auth';import{getFirestore,collection,onSnapshot,addDoc,updateDoc,deleteDoc,doc,query,serverTimestamp}from'firebase/firestore';import{Target,Layers,Briefcase,Edit,Plus,Trash2,X,Settings,Tag,Palette,TrendingUp,Download,Calendar,ListTodo,ZoomIn,ZoomOut,ChevronsUpDown,CheckCircle,MoreVertical,History,Check,Zap,ChevronDown,LayoutGrid,List,AlertTriangle,Clock,TrendingUp as TrendingUpIcon,Lock,Unlock,Gauge,LogOut,User,LogIn,ArrowRight,Repeat,Presentation}from'lucide-react';import domtoimage from'dom-to-image-more';// --- Configuração do Firebase ---\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const firebaseConfig={apiKey:\"AIzaSyCESjyYypWPaerOk9jGE2uvcjZlsuH_YrI\",authDomain:\"general-control-fb57b.firebaseapp.com\",projectId:\"general-control-fb57b\",storageBucket:\"general-control-fb57b.appspot.com\",messagingSenderId:\"939076716946\",appId:\"1:939076716946:web:176240d8cb942b12df194b\"};// --- Inicialização Segura do Firebase ---\nlet app;if(!getApps().length){app=initializeApp(firebaseConfig);}else{app=getApps()[0];}const auth=getAuth(app);const db=getFirestore(app);// --- FUNÇÃO DE EXPORTAÇÃO FINAL, USANDO A BIBLIOTECA LOCAL ---\nconst exportViewAsImage=async function(elementRef,fileName){let options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};const{backgroundColor='#f9fafb'}=options;const element=elementRef.current;if(!element){alert(\"Erro: Não foi possível encontrar a área para exportar.\");return;}const filter=node=>{return!(node.classList&&node.classList.contains('no-export'));};const exportOptions={filter:filter,bgcolor:backgroundColor,quality:1.0,// Mantemos estas opções para garantir a melhor qualidade e evitar erros\ncacheBust:true,skipFonts:true};try{// Usando a variável 'domtoimage' que importamos diretamente no topo do arquivo\nconst dataUrl=await domtoimage.toPng(element,exportOptions);const link=document.createElement(\"a\");link.href=dataUrl;link.download=fileName;document.body.appendChild(link);link.click();document.body.removeChild(link);}catch(error){console.error(\"Erro durante a exportação:\",error);alert(\"Ocorreu um erro inesperado durante a exporta\\xE7\\xE3o: \".concat(error.message));}};// --- Constantes e Helpers ---\nconst PRIORITIES={'Alta':{label:'Alta',color:'bg-red-500',textColor:'text-red-500',borderColor:'border-red-500'},'Média':{label:'Média',color:'bg-yellow-500',textColor:'text-yellow-500',borderColor:'border-yellow-500'},'Baixa':{label:'Baixa',color:'bg-blue-500',textColor:'text-blue-500',borderColor:'border-blue-500'}};const STATUSES={'A Fazer':{label:'A Fazer',color:'bg-gray-200 text-gray-800',borderColor:'border-gray-400'},'Em Progresso':{label:'Em Progresso',color:'bg-indigo-200 text-indigo-800',borderColor:'border-indigo-400'},'Concluído':{label:'Concluído',color:'bg-green-200 text-green-800',borderColor:'border-green-500'},'Bloqueado':{label:'Bloqueado',color:'bg-red-200 text-red-800',borderColor:'border-red-500'}};const TASK_COLORS=['#f87171','#fbbf24','#34d399','#60a5fa','#c084fc','#f472b6','#a3a3a3'];const CYCLE_COLORS=['#fecaca','#fed7aa','#bbf7d0','#bfdbfe','#e9d5ff','#fbcfe8'];const formatDate=function(dateInput){let includeTime=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!dateInput)return'';const date=dateInput.toDate?dateInput.toDate():new Date(dateInput);const options={day:'2-digit',month:'2-digit',year:'numeric',timeZone:'UTC'};if(includeTime){options.hour='2-digit';options.minute='2-digit';}return new Intl.DateTimeFormat('pt-BR',options).format(date);};const parseLocalDate=dateString=>{if(!dateString)return null;return new Date(dateString+'T00:00:00');};const getDaysInView=(startDate,endDate)=>{if(!startDate||!endDate)return[];const days=[];let current=new Date(startDate);current.setUTCHours(0,0,0,0);const end=new Date(endDate);end.setUTCHours(0,0,0,0);while(current<=end){days.push(new Date(current));current.setDate(current.getDate()+1);}return days;};// --- Lógica de Cálculo de Progresso e Ritmo ---\nconst calculateKrProgress=kr=>{const start=Number(kr.startValue)||0;const target=Number(kr.targetValue)||100;const current=Number(kr.currentValue)||0;if(target===start)return current>=target?100:0;const progress=(current-start)/(target-start)*100;return Math.max(0,Math.min(100,progress));};const calculateOkrProgress=okr=>{if(!okr||!okr.keyResults||okr.keyResults.length===0)return 0;const keyResults=okr.keyResults;const totalWeight=keyResults.reduce((sum,kr)=>sum+(Number(kr.weight)||1),0);if(totalWeight===0)return 0;const weightedProgressSum=keyResults.reduce((sum,kr)=>{const progress=calculateKrProgress(kr);const weight=Number(kr.weight)||1;return sum+progress*weight;},0);return Math.round(weightedProgressSum/totalWeight);};const calculatePacingInfo=(startDate,targetDate,startValue,targetValue,currentValue)=>{if(!startDate||!targetDate){return{daysRemaining:null,requiredPace:null,status:'no-date'};}const today=new Date();today.setHours(0,0,0,0);const target=parseLocalDate(targetDate);const progress=calculateKrProgress({startValue,targetValue,currentValue});if(progress>=100){return{daysRemaining:null,requiredPace:null,status:'completed'};}if(target<today){return{daysRemaining:0,requiredPace:null,status:'overdue'};}const daysRemaining=Math.ceil((target.getTime()-today.getTime())/(1000*60*60*24));const monthsRemaining=Math.max(1,(target.getTime()-today.getTime())/(1000*60*60*24*30.44));const remainingValue=(Number(targetValue)||0)-(Number(currentValue)||0);if(remainingValue<=0){return{daysRemaining,requiredPace:0,status:'completed'};}const requiredPace=remainingValue/monthsRemaining;return{daysRemaining,requiredPace:requiredPace.toFixed(1),status:'on-track'};};const calculateOkrStatus=(startDate,targetDate,currentProgress)=>{if(!startDate||!targetDate)return{status:'no-date',text:'Sem data alvo',color:'bg-gray-400'};const today=new Date();today.setHours(0,0,0,0);const start=parseLocalDate(startDate);const target=parseLocalDate(targetDate);if(currentProgress>=100)return{status:'completed',text:'Concluído',color:'bg-green-500'};if(target<today)return{status:'overdue',text:'Atrasado',color:'bg-red-500'};if(today<start)return{status:'not-started',text:'Não iniciado',color:'bg-gray-400'};const totalDuration=target.getTime()-start.getTime();if(totalDuration<=0)return{status:'completed',text:'Concluído',color:'bg-green-500'};const elapsedDuration=today.getTime()-start.getTime();const expectedProgress=Math.round(elapsedDuration/totalDuration*100);const difference=currentProgress-expectedProgress;if(difference<-15)return{status:'behind',text:'Em Risco',color:'bg-yellow-500'};if(difference>15)return{status:'ahead',text:'Adiantado',color:'bg-sky-500'};return{status:'on-track',text:'No Ritmo',color:'bg-green-500'};};const calculateTaskProgress=task=>{if(task.status==='Concluído')return 100;if(!task.subtasks||task.subtasks.length===0){return task.status==='Em Progresso'?50:0;}const completedSubtasks=task.subtasks.filter(s=>s.completed).length;return Math.round(completedSubtasks/task.subtasks.length*100);};const getTaskDurationInDays=task=>{if(!task.startDate||!task.endDate)return 1;const start=parseLocalDate(task.startDate);const end=parseLocalDate(task.endDate);const duration=(end.getTime()-start.getTime())/(1000*60*60*24);return Math.max(1,duration+1);};// --- Componentes da UI ---\nconst Card=_ref=>{let{children,className=''}=_ref,props=_objectWithoutProperties(_ref,_excluded);return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({className:\"bg-white border border-gray-200 rounded-xl p-6 shadow-sm \".concat(className)},props),{},{children:children}));};const Button=_ref2=>{let{onClick,children,className='',variant='primary',disabled=false}=_ref2;const baseClasses='px-4 py-2 rounded-lg font-semibold transition-all duration-300 flex items-center justify-center space-x-2 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed';const variantClasses={primary:'bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500',secondary:'bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400',danger:'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',ghost:'bg-transparent text-gray-600 hover:bg-gray-100 focus:ring-gray-400'};return/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClick,className:\"\".concat(baseClasses,\" \").concat(variantClasses[variant],\" \").concat(className),disabled:disabled,children:children});};const Modal=_ref3=>{let{isOpen,onClose,title,children,size='2xl'}=_ref3;if(!isOpen)return null;const sizeClasses={'md':'max-w-md','2xl':'max-w-2xl','4xl':'max-w-4xl'};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-2xl w-full \".concat(sizeClasses[size],\" max-h-[90vh] flex flex-col\"),children:[/*#__PURE__*/_jsxs(\"header\",{className:\"flex justify-between items-center p-4 border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-800\",children:title}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsx(\"main\",{className:\"p-6 overflow-y-auto\",children:children})]})});};const ConfirmModal=_ref4=>{let{isOpen,onClose,onConfirm,title,children}=_ref4;if(!isOpen)return null;return/*#__PURE__*/_jsxs(Modal,{isOpen:isOpen,onClose:onClose,title:title,size:\"md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:children}),/*#__PURE__*/_jsxs(\"footer\",{className:\"flex justify-end space-x-4 pt-4 mt-4 border-t\",children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,variant:\"secondary\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{onClick:onConfirm,variant:\"danger\",children:\"Confirmar\"})]})]});};const CyclesModal=_ref5=>{let{isOpen,onClose,cycles,onSave,onDelete}=_ref5;const[localCycles,setLocalCycles]=useState([]);useEffect(()=>{if(isOpen){setLocalCycles(cycles.map(c=>_objectSpread(_objectSpread({},c),{},{localId:c.id||\"new_\".concat(Date.now(),\"_\").concat(Math.random())})));}},[isOpen,cycles]);const handleCycleChange=(index,field,value)=>{const updatedCycles=[...localCycles];updatedCycles[index][field]=value;setLocalCycles(updatedCycles);};const addCycle=()=>{const today=new Date().toISOString().split('T')[0];setLocalCycles([...localCycles,{localId:\"new_\".concat(Date.now(),\"_\").concat(Math.random()),name:'',startDate:today,endDate:today,color:CYCLE_COLORS[localCycles.length%CYCLE_COLORS.length]}]);};const removeCycle=cycleToRemove=>{if(cycleToRemove.id){onDelete(cycleToRemove.id);}setLocalCycles(localCycles.filter(c=>c.localId!==cycleToRemove.localId));};const handleSaveAll=()=>{const cyclesToSave=localCycles.filter(c=>c.name.trim()!=='');onSave(cyclesToSave);onClose();};return/*#__PURE__*/_jsxs(Modal,{isOpen:isOpen,onClose:onClose,title:\"Gerenciar Ciclos de Trabalho\",size:\"2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Crie e gerencie os ciclos (Sprints, PIs, Trimestres) que aparecer\\xE3o como fundo no seu Roadmap.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3 max-h-96 overflow-y-auto pr-2\",children:localCycles.map((cycle,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-gray-50 rounded-lg border flex flex-col md:flex-row gap-4 items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nome do Ciclo (Ex: Sprint 1)\",value:cycle.name,onChange:e=>handleCycleChange(index,'name',e.target.value),className:\"w-full p-2 border rounded-md\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:cycle.startDate,onChange:e=>handleCycleChange(index,'startDate',e.target.value),className:\"p-2 border rounded-md\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:cycle.endDate,onChange:e=>handleCycleChange(index,'endDate',e.target.value),className:\"p-2 border rounded-md\"}),/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:cycle.color,onChange:e=>handleCycleChange(index,'color',e.target.value),className:\"p-1 h-10 w-12 border rounded-md cursor-pointer\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>removeCycle(cycle),variant:\"ghost\",className:\"text-red-500\",children:/*#__PURE__*/_jsx(Trash2,{size:16})})]},cycle.localId))}),/*#__PURE__*/_jsxs(Button,{onClick:addCycle,variant:\"secondary\",children:[/*#__PURE__*/_jsx(Plus,{size:16}),\" Adicionar Ciclo\"]})]}),/*#__PURE__*/_jsxs(\"footer\",{className:\"flex justify-end space-x-4 pt-4 mt-4 border-t\",children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,variant:\"secondary\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSaveAll,variant:\"primary\",children:\"Salvar Ciclos\"})]})]});};// CORREÇÃO APLICADA AQUI: Hooks movidos para dentro do componente\nconst TaskModal=_ref6=>{let{isOpen,onClose,task,tasks,okrs,onSave,onDeleteRequest}=_ref6;const getInitialFormState=()=>{const today=new Date().toISOString().split('T')[0];if(task){var _task$okrLink,_task$okrLink2;return{title:task.title||'',description:task.description||'',priority:task.priority||'Média',status:task.status||'A Fazer',startDate:task.startDate||today,endDate:task.endDate||today,labels:task.labels||[],projectTag:task.projectTag||'',blockerLog:task.blockerLog||[],subtasks:task.subtasks||[],customColor:task.customColor||'',okrLinkValue:\"\".concat(((_task$okrLink=task.okrLink)===null||_task$okrLink===void 0?void 0:_task$okrLink.okrId)||'',\"|\").concat(((_task$okrLink2=task.okrLink)===null||_task$okrLink2===void 0?void 0:_task$okrLink2.krId)||'')};}return{title:'',description:'',priority:'Média',status:'A Fazer',startDate:today,endDate:today,labels:[],projectTag:'',blockerLog:[],subtasks:[],customColor:'',okrLinkValue:'|'};};const[formState,setFormState]=useState(getInitialFormState);const[newProject,setNewProject]=useState('');const[isCreatingProject,setIsCreatingProject]=useState(false);const[expandedBlocker,setExpandedBlocker]=useState(null);useEffect(()=>{if(isOpen){setFormState(getInitialFormState());}},[task,isOpen]);const displayProjectList=useMemo(()=>{const projects=new Set(tasks.map(t=>t.projectTag).filter(Boolean));if(formState.projectTag&&!projects.has(formState.projectTag)){projects.add(formState.projectTag);}return Array.from(projects).sort();},[tasks,formState.projectTag]);const allLabels=useMemo(()=>{const labelSet=new Set();tasks.forEach(t=>(t.labels||[]).forEach(label=>labelSet.add(label)));return Array.from(labelSet).sort();},[tasks]);const handleChange=e=>{const{name,value,type,checked}=e.target;setFormState(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type==='checkbox'?checked:value}));};const handleLabelsChange=e=>{const labels=e.target.value.split(',').map(l=>l.trim()).filter(Boolean);setFormState(prev=>_objectSpread(_objectSpread({},prev),{},{labels}));};const handleLabelClick=label=>{const currentLabels=formState.labels||[];const newLabels=currentLabels.includes(label)?currentLabels.filter(l=>l!==label):[...currentLabels,label];setFormState(prev=>_objectSpread(_objectSpread({},prev),{},{labels:newLabels}));};const handleProjectChange=e=>{const{value}=e.target;if(value==='_new_'){setIsCreatingProject(true);setFormState(prev=>_objectSpread(_objectSpread({},prev),{},{projectTag:''}));}else{setIsCreatingProject(false);setNewProject('');setFormState(prev=>_objectSpread(_objectSpread({},prev),{},{projectTag:value}));}};const handleNewProjectCreate=()=>{if(newProject.trim()){setFormState(prev=>_objectSpread(_objectSpread({},prev),{},{projectTag:newProject.trim()}));setIsCreatingProject(false);setNewProject('');}};const addBlocker=()=>{const newLog=[...(formState.blockerLog||[]),{id:\"block_\".concat(Date.now()),blockDate:new Date().toISOString().split('T')[0],blockReason:'',unblockDate:null,unblockReason:''}];setFormState(prev=>_objectSpread(_objectSpread({},prev),{},{blockerLog:newLog,status:'Bloqueado'}));};const handleBlockerLogChange=(logId,field,value)=>{const newLog=(formState.blockerLog||[]).map(b=>b.id===logId?_objectSpread(_objectSpread({},b),{},{[field]:value}):b);setFormState(prev=>_objectSpread(_objectSpread({},prev),{},{blockerLog:newLog}));};const handleUnblock=logId=>{const newLog=(formState.blockerLog||[]).map(b=>b.id===logId?_objectSpread(_objectSpread({},b),{},{unblockDate:new Date().toISOString().split('T')[0]}):b);const isStillBlocked=newLog.some(b=>!b.unblockDate);setFormState(prev=>_objectSpread(_objectSpread({},prev),{},{blockerLog:newLog,status:isStillBlocked?'Bloqueado':'A Fazer'}));};const handleSubtaskChange=(index,field,value)=>{const newSubtasks=[...(formState.subtasks||[])];newSubtasks[index]=_objectSpread(_objectSpread({},newSubtasks[index]),{},{[field]:value});setFormState(prev=>_objectSpread(_objectSpread({},prev),{},{subtasks:newSubtasks}));};const addSubtask=()=>{const newSubtask={id:\"sub_\".concat(Date.now()),text:'',completed:false,targetDate:''};setFormState(prev=>_objectSpread(_objectSpread({},prev),{},{subtasks:[...(prev.subtasks||[]),newSubtask]}));};const removeSubtask=index=>{const newSubtasks=(formState.subtasks||[]).filter((_,i)=>i!==index);setFormState(prev=>_objectSpread(_objectSpread({},prev),{},{subtasks:newSubtasks}));};const handleColorChange=color=>{setFormState(prev=>_objectSpread(_objectSpread({},prev),{},{customColor:color}));};const handleSave=()=>{const{okrLinkValue}=formState,restOfForm=_objectWithoutProperties(formState,_excluded2);const[okrId,krId]=(okrLinkValue||'|').split('|');const taskToSave=_objectSpread(_objectSpread({id:task===null||task===void 0?void 0:task.id},restOfForm),{},{okrLink:{okrId:okrId||'',krId:krId||''}});onSave(taskToSave);onClose();};if(!isOpen)return null;return/*#__PURE__*/_jsx(Modal,{isOpen:isOpen,onClose:onClose,title:task!==null&&task!==void 0&&task.humanId?\"Editar Tarefa [\".concat(task.humanId,\"]\"):\"Nova Tarefa\",size:\"4xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2 space-y-6\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:formState.title,onChange:handleChange,placeholder:\"T\\xEDtulo da Tarefa\",className:\"w-full p-2 bg-transparent text-2xl font-bold border-b-2 border-gray-200 focus:border-indigo-500 focus:outline-none\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:formState.description,onChange:handleChange,placeholder:\"Adicione uma descri\\xE7\\xE3o...\",className:\"w-full p-2 bg-gray-50 rounded-md h-32 border border-gray-200 focus:border-indigo-500 focus:outline-none\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2\",children:\"Subtarefas\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 max-h-48 overflow-y-auto pr-2\",children:(formState.subtasks||[]).map((sub,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 p-2 bg-gray-50 rounded-md\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:sub.completed,onChange:e=>handleSubtaskChange(index,'completed',e.target.checked),className:\"h-5 w-5 rounded text-indigo-600\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:sub.text,onChange:e=>handleSubtaskChange(index,'text',e.target.value),className:\"flex-grow p-1 bg-transparent border-b \".concat(sub.completed?'line-through text-gray-500':''),placeholder:\"Descri\\xE7\\xE3o da subtarefa\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:sub.targetDate||'',onChange:e=>handleSubtaskChange(index,'targetDate',e.target.value),className:\"p-1 text-sm border rounded-md\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeSubtask(index),children:/*#__PURE__*/_jsx(Trash2,{size:16,className:\"text-red-400 hover:text-red-600\"})})]},sub.id))}),/*#__PURE__*/_jsx(Button,{onClick:addSubtask,variant:\"secondary\",className:\"mt-2 text-sm\",children:\"Adicionar Subtarefa\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2\",children:\"Hist\\xF3rico de Bloqueios\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 max-h-48 overflow-y-auto pr-2\",children:(formState.blockerLog||[]).map(log=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-gray-50 rounded-md border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center cursor-pointer\",onClick:()=>setExpandedBlocker(expandedBlocker===log.id?null:log.id),children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold \".concat(log.unblockDate?'text-green-600':'text-red-600'),children:[log.unblockDate?'Desbloqueado':'Bloqueado',\" em \",formatDate(log.blockDate,false)]}),/*#__PURE__*/_jsx(ChevronDown,{size:16,className:\"transition-transform \".concat(expandedBlocker===log.id?'rotate-180':'')})]}),expandedBlocker===log.id&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 space-y-2\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-medium text-gray-500\",children:\"Motivo do Bloqueio\"}),/*#__PURE__*/_jsx(\"textarea\",{value:log.blockReason,onChange:e=>handleBlockerLogChange(log.id,'blockReason',e.target.value),className:\"w-full p-1 border rounded-md text-sm h-16\"})]}),!log.unblockDate?/*#__PURE__*/_jsx(Button,{onClick:()=>handleUnblock(log.id),variant:\"secondary\",className:\"!text-xs !py-1 w-full\",children:\"Registrar Desbloqueio\"}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"text-xs font-medium text-gray-500\",children:[\"Data do Desbloqueio: \",formatDate(log.unblockDate,false)]})})]})]},log.id))}),/*#__PURE__*/_jsx(Button,{onClick:addBlocker,variant:\"secondary\",className:\"mt-2 text-sm\",children:\"Adicionar Bloqueio\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-1 space-y-4 bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-600\",children:\"Status\"}),/*#__PURE__*/_jsx(\"select\",{name:\"status\",value:formState.status,onChange:handleChange,disabled:(formState.blockerLog||[]).some(b=>!b.unblockDate),className:\"w-full p-2 border border-gray-300 rounded-md\",children:Object.keys(STATUSES).map(s=>/*#__PURE__*/_jsx(\"option\",{value:s,children:STATUSES[s].label},s))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-600\",children:\"Datas\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"startDate\",value:formState.startDate,onChange:handleChange,className:\"w-full p-2 border border-gray-300 rounded-md\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"endDate\",value:formState.endDate,onChange:handleChange,className:\"w-full p-2 border border-gray-300 rounded-md\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-600\",children:\"Prioridade\"}),/*#__PURE__*/_jsx(\"select\",{name:\"priority\",value:formState.priority,onChange:handleChange,className:\"w-full p-2 border border-gray-300 rounded-md\",children:Object.keys(PRIORITIES).map(p=>/*#__PURE__*/_jsx(\"option\",{value:p,children:PRIORITIES[p].label},p))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-600\",children:\"Projeto\"}),!isCreatingProject?/*#__PURE__*/_jsxs(\"select\",{name:\"projectTag\",value:formState.projectTag,onChange:handleProjectChange,className:\"w-full p-2 border border-gray-300 rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Nenhum\"}),displayProjectList.map(p=>/*#__PURE__*/_jsx(\"option\",{value:p,children:p},p)),/*#__PURE__*/_jsx(\"option\",{value:\"_new_\",children:\"-- Criar Novo Projeto --\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newProject,onChange:e=>setNewProject(e.target.value),placeholder:\"Nome do novo projeto\",className:\"w-full p-2 border border-gray-300 rounded-md\"}),/*#__PURE__*/_jsx(Button,{onClick:handleNewProjectCreate,children:/*#__PURE__*/_jsx(Check,{size:16})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-600\",children:\"Etiquetas\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:(formState.labels||[]).join(', '),onChange:handleLabelsChange,className:\"w-full p-2 border border-gray-300 rounded-md\",placeholder:\"Ex: UX, Backend, Marketing\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2 mt-2\",children:allLabels.map(label=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleLabelClick(label),className:\"px-2 py-1 text-xs rounded-full \".concat((formState.labels||[]).includes(label)?'bg-indigo-600 text-white':'bg-gray-200'),children:label},label))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-600\",children:\"Vincular ao OKR\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"okrLinkValue\",value:formState.okrLinkValue,onChange:handleChange,className:\"w-full p-2 border border-gray-300 rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"|\",children:\"Nenhum\"}),okrs.map(okr=>/*#__PURE__*/_jsxs(\"optgroup\",{label:okr.objective,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\".concat(okr.id,\"|\"),children:\"-- Objetivo Geral --\"},\"\".concat(okr.id,\"_general\")),(okr.keyResults||[]).map(kr=>/*#__PURE__*/_jsx(\"option\",{value:\"\".concat(okr.id,\"|\").concat(kr.id),children:kr.text},\"\".concat(okr.id,\"|\").concat(kr.id)))]},okr.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-600\",children:\"Cor\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2\",children:TASK_COLORS.map(color=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleColorChange(color),className:\"w-6 h-6 rounded-full transition-transform hover:scale-110\",style:{backgroundColor:color},children:formState.customColor===color&&/*#__PURE__*/_jsx(Check,{size:16,className:\"text-white m-auto\"})},color))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-3 flex justify-between items-center pt-6 border-t\",children:[/*#__PURE__*/_jsx(\"div\",{children:task&&/*#__PURE__*/_jsxs(Button,{onClick:()=>onDeleteRequest(task.id,'task'),variant:\"danger\",children:[/*#__PURE__*/_jsx(Trash2,{size:16}),\" Excluir\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,variant:\"secondary\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSave,children:\"Salvar Tarefa\"})]})]})]})});};// --- COMPONENTE TIMELINE ---\nconst Timeline=_ref7=>{let{tasks,cycles,onTaskClick,zoomLevel,viewStartDate}=_ref7;const today=new Date();today.setHours(0,0,0,0);const timelineRef=useRef(null);const[isDragging,setIsDragging]=useState(false);const[startX,setStartX]=useState(0);const[scrollLeft,setScrollLeft]=useState(0);const dayWidth=useMemo(()=>8+zoomLevel*2.5,[zoomLevel]);const{days,timelineWidth,headerGroups,subHeaderGroups}=useMemo(()=>{let maxEndDate=null;const allDates=[...tasks,...cycles].map(item=>parseLocalDate(item.endDate));if(allDates.length>0){const validEndDates=allDates.filter(date=>date&&!isNaN(date.getTime()));if(validEndDates.length>0){maxEndDate=new Date(Math.max.apply(null,validEndDates));}}const defaultEndDate=new Date(viewStartDate);defaultEndDate.setDate(defaultEndDate.getDate()+90);let timelineEndDate=defaultEndDate;if(maxEndDate&&maxEndDate>defaultEndDate){timelineEndDate=new Date(maxEndDate);}timelineEndDate.setDate(timelineEndDate.getDate()+30);const days=getDaysInView(viewStartDate,timelineEndDate);const timelineWidth=days.length*dayWidth;const primaryGroups=[];const secondaryGroups=[];if(days.length>0){let currentPrimaryGroup=null;let currentSecondaryGroup=null;if(zoomLevel<=3){days.forEach(day=>{const year=day.getFullYear();const quarter=Math.floor(day.getMonth()/3)+1;const quarterKey=\"\".concat(year,\"-Q\").concat(quarter);if(!currentPrimaryGroup||currentPrimaryGroup.key!==quarterKey){currentPrimaryGroup={key:quarterKey,label:\"T\".concat(quarter,\" \").concat(year),width:0};primaryGroups.push(currentPrimaryGroup);}currentPrimaryGroup.width+=dayWidth;const monthKey=\"\".concat(year,\"-\").concat(day.getMonth());if(!currentSecondaryGroup||currentSecondaryGroup.key!==monthKey){currentSecondaryGroup={key:monthKey,label:new Intl.DateTimeFormat('pt-BR',{month:'long',timeZone:'UTC'}).format(day),width:0};secondaryGroups.push(currentSecondaryGroup);}currentSecondaryGroup.width+=dayWidth;});}else if(zoomLevel<=7){days.forEach(day=>{const monthKey=\"\".concat(day.getFullYear(),\"-\").concat(day.getMonth());if(!currentPrimaryGroup||currentPrimaryGroup.key!==monthKey){currentPrimaryGroup={key:monthKey,label:new Intl.DateTimeFormat('pt-BR',{month:'long',year:'numeric',timeZone:'UTC'}).format(day),width:0};primaryGroups.push(currentPrimaryGroup);}currentPrimaryGroup.width+=dayWidth;secondaryGroups.push({key:day.toISOString(),label:day.getDate(),width:dayWidth,isToday:day.toDateString()===today.toDateString()});});}else{days.forEach(day=>{const weekNumber=Math.ceil(((day-new Date(day.getFullYear(),0,1))/86400000+new Date(day.getFullYear(),0,1).getDay()+1)/7);const weekKey=\"\".concat(day.getFullYear(),\"-W\").concat(weekNumber);if(!currentPrimaryGroup||currentPrimaryGroup.key!==weekKey){currentPrimaryGroup={key:weekKey,label:\"Semana \".concat(weekNumber),width:0};primaryGroups.push(currentPrimaryGroup);}currentPrimaryGroup.width+=dayWidth;secondaryGroups.push({key:day.toISOString(),label:day.getDate(),subLabel:new Intl.DateTimeFormat('pt-BR',{weekday:'short',timeZone:'UTC'}).format(day).slice(0,3),width:dayWidth,isToday:day.toDateString()===today.toDateString()});});}}return{days,timelineWidth,headerGroups:primaryGroups,subHeaderGroups:secondaryGroups};},[viewStartDate,zoomLevel,tasks,cycles]);const onMouseDown=e=>{if(!timelineRef.current||e.target.closest('.task-bar'))return;setIsDragging(true);setStartX(e.pageX-timelineRef.current.offsetLeft);setScrollLeft(timelineRef.current.scrollLeft);timelineRef.current.style.cursor='grabbing';};const onMouseLeaveOrUp=()=>{if(!timelineRef.current)return;setIsDragging(false);timelineRef.current.style.cursor='grab';};const onMouseMove=e=>{if(!isDragging||!timelineRef.current)return;e.preventDefault();const x=e.pageX-timelineRef.current.offsetLeft;const walk=x-startX;timelineRef.current.scrollLeft=scrollLeft-walk;};const groupedTasks=useMemo(()=>{return tasks.reduce((acc,task)=>{const group=task.projectTag||'Sem Projeto';if(!acc[group])acc[group]=[];acc[group].push(task);return acc;},{});},[tasks]);const[collapsedGroups,setCollapsedGroups]=useState({});const toggleGroup=group=>setCollapsedGroups(prev=>_objectSpread(_objectSpread({},prev),{},{[group]:!prev[group]}));return/*#__PURE__*/_jsx(\"div\",{className:\"relative bg-white border border-gray-200 rounded-lg shadow-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto cursor-grab\",ref:timelineRef,onMouseDown:onMouseDown,onMouseLeave:onMouseLeaveOrUp,onMouseUp:onMouseLeaveOrUp,onMouseMove:onMouseMove,children:/*#__PURE__*/_jsxs(\"div\",{style:{width:timelineWidth},className:\"relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sticky top-0 z-30 bg-gray-100/80 backdrop-blur-sm h-16\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex border-b border-gray-300 h-8\",children:headerGroups.map(group=>/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 text-center font-bold text-gray-700 border-r border-gray-300 flex items-center justify-center\",style:{width:group.width},children:/*#__PURE__*/_jsx(\"span\",{className:\"whitespace-nowrap px-2\",children:group.label})},group.key))}),/*#__PURE__*/_jsx(\"div\",{className:\"flex border-b-2 border-gray-300 h-8\",children:subHeaderGroups.map(group=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex-shrink-0 text-center font-semibold border-r border-gray-200 flex flex-col justify-center items-center \".concat(group.isToday?'bg-indigo-100':''),style:{width:group.width},children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs \".concat(group.isToday?'text-indigo-600':'text-gray-500'),children:group.subLabel}),/*#__PURE__*/_jsx(\"span\",{className:\"whitespace-nowrap text-sm \".concat(group.isToday?'text-indigo-600 font-bold':'text-gray-600'),children:group.label})]},group.key))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-0 left-0 w-full h-full z-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex h-full\",children:days.map((day,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"h-full border-r \".concat(day.getUTCDay()===0||day.getUTCDay()===6?'bg-gray-50/50':'border-gray-100'),style:{width:dayWidth}},index))}),cycles.map(cycle=>{const cycleStart=parseLocalDate(cycle.startDate);const cycleEnd=parseLocalDate(cycle.endDate);if(!cycleStart||!cycleEnd||cycleEnd<viewStartDate||cycleStart>new Date(viewStartDate).setDate(viewStartDate.getDate()+days.length))return null;const startOffset=Math.round((cycleStart.getTime()-viewStartDate.getTime())/(1000*60*60*24));const duration=Math.max(1,(cycleEnd.getTime()-cycleStart.getTime())/(1000*60*60*24)+1);return/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 bottom-0\",style:{left:\"\".concat(startOffset*dayWidth,\"px\"),width:\"\".concat(duration*dayWidth,\"px\")},children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full w-full border-x\",style:{backgroundColor:cycle.color,opacity:0.15,borderColor:cycle.color}})},cycle.id);})]}),/*#__PURE__*/_jsx(\"div\",{className:\"relative z-10 h-8 border-b border-gray-200\",children:cycles.map(cycle=>{const cycleStart=parseLocalDate(cycle.startDate);const cycleEnd=parseLocalDate(cycle.endDate);if(!cycleStart||!cycleEnd||cycleEnd<viewStartDate||cycleStart>new Date(viewStartDate).setDate(viewStartDate.getDate()+days.length))return null;const startOffset=Math.round((cycleStart.getTime()-viewStartDate.getTime())/(1000*60*60*24));const duration=Math.max(1,(cycleEnd.getTime()-cycleStart.getTime())/(1000*60*60*24)+1);return/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 flex items-center h-full\",style:{left:\"\".concat(startOffset*dayWidth,\"px\"),width:\"\".concat(duration*dayWidth,\"px\")},children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full font-bold text-center text-sm text-gray-700 p-1 truncate\",children:cycle.name})},cycle.id);})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative z-20\",children:Object.keys(groupedTasks).sort().map(group=>{const isCollapsed=collapsedGroups[group];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"sticky top-[96px] z-20 flex items-center h-10 bg-white/80 backdrop-blur-sm border-b border-t border-gray-200 -ml-px\",onClick:()=>toggleGroup(group),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 p-2 cursor-pointer\",children:[/*#__PURE__*/_jsx(ChevronsUpDown,{size:16,className:\"transition-transform \".concat(isCollapsed?'-rotate-90':'')}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-gray-800\",children:group})]})}),!isCollapsed&&/*#__PURE__*/_jsx(\"div\",{className:\"relative\",style:{height:groupedTasks[group].length*48+10},children:groupedTasks[group].map((task,taskIndex)=>{var _task$blockerLog,_task$blockerLog2,_STATUSES$task$status,_STATUSES$task$status2;const taskStart=parseLocalDate(task.startDate);const taskEnd=parseLocalDate(task.endDate);if(!taskStart||!taskEnd||taskEnd<viewStartDate||taskStart>new Date(viewStartDate).setDate(viewStartDate.getDate()+days.length))return null;const startOffset=(taskStart.getTime()-viewStartDate.getTime())/(1000*60*60*24);const duration=Math.max(1,(taskEnd.getTime()-taskStart.getTime())/(1000*60*60*24)+1);const left=startOffset*dayWidth;const width=duration*dayWidth-4;const progress=calculateTaskProgress(task);const daysRemaining=Math.ceil((taskEnd.getTime()-today.getTime())/(1000*60*60*24));return/*#__PURE__*/_jsx(\"div\",{id:\"task-\".concat(task.id),className:\"h-10 absolute flex items-center rounded-lg cursor-pointer transition-all duration-200 group task-bar\",style:{top:\"\".concat(taskIndex*48+5,\"px\"),left:\"\".concat(left,\"px\"),width:\"\".concat(width,\"px\")},onClick:()=>onTaskClick(task),title:\"\".concat(task.title,\" - \").concat(task.status,\" (\").concat(Math.round(progress),\"%)\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"h-full w-full rounded-lg flex items-center overflow-hidden relative shadow-md group-hover:shadow-lg group-hover:scale-[1.02] transition-all duration-200\",style:{backgroundColor:(_task$blockerLog=task.blockerLog)!==null&&_task$blockerLog!==void 0&&_task$blockerLog.some(b=>!b.unblockDate)?'#f87171':task.customColor||'#9ca3af'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 left-0 h-full bg-black/20\",style:{width:\"\".concat(progress,\"%\")}}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative z-10 flex items-center justify-between w-full px-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[((_task$blockerLog2=task.blockerLog)===null||_task$blockerLog2===void 0?void 0:_task$blockerLog2.some(b=>!b.unblockDate))&&/*#__PURE__*/_jsx(Lock,{size:12,className:\"text-white flex-shrink-0\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold text-white truncate\",children:task.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 flex-shrink-0\",children:[width>120&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-1.5 py-0.5 rounded-full \".concat((_STATUSES$task$status=STATUSES[task.status])===null||_STATUSES$task$status===void 0?void 0:_STATUSES$task$status.color,\" bg-opacity-70 backdrop-blur-sm\"),children:(_STATUSES$task$status2=STATUSES[task.status])===null||_STATUSES$task$status2===void 0?void 0:_STATUSES$task$status2.label}),width>80&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-white font-semibold bg-black/20 px-1.5 py-0.5 rounded-full\",children:[progress,\"%\"]}),daysRemaining>0&&task.status!=='Concluído'&&width>100&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-white bg-black/20 px-1.5 py-0.5 rounded-full\",children:[daysRemaining,\"d\"]})]})]})]})},task.id);})})]},group);})})]})]})})});};const FilterList=_ref8=>{let{title,options,active,onFilterChange}=_ref8;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"filter-\".concat(title),className:\"text-sm font-medium text-gray-600\",children:[title,\":\"]}),/*#__PURE__*/_jsxs(\"select\",{id:\"filter-\".concat(title),value:active,onChange:e=>onFilterChange(e.target.value),className:\"p-2 border border-gray-300 rounded-md bg-white shadow-sm focus:ring-indigo-500 focus:border-indigo-500 min-w-[150px]\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Todos\",children:\"Todos\"}),Object.keys(options).map(key=>/*#__PURE__*/_jsx(\"option\",{value:key,children:options[key].label},key))]})]});};const WorkspaceView=_ref9=>{let{tasks,cycles,onTaskClick,filters,setFilters,zoomLevel,setZoomLevel,viewStartDate,setViewStartDate,onOpenTaskModal,onOpenCyclesModal}=_ref9;const workspaceViewRef=useRef(null);const allLabels=useMemo(()=>{const labelSet=new Set();tasks.forEach(task=>(task.labels||[]).forEach(label=>labelSet.add(label)));const labelOptions={};Array.from(labelSet).sort().forEach(label=>{labelOptions[label]={label};});return labelOptions;},[tasks]);return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",ref:workspaceViewRef,children:[/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row items-center justify-between gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(Button,{onClick:()=>exportViewAsImage(workspaceViewRef,'roadmap.png',{useScrollWidth:true}),variant:\"secondary\",className:\"no-export\",children:[/*#__PURE__*/_jsx(Presentation,{size:16}),\" Exportar Imagem\"]}),/*#__PURE__*/_jsx(Button,{onClick:()=>setViewStartDate(new Date(new Date().setDate(new Date().getDate()-15))),variant:\"secondary\",className:\"no-export\",children:\"Hoje\"}),/*#__PURE__*/_jsxs(Button,{onClick:onOpenCyclesModal,variant:\"secondary\",className:\"no-export\",children:[/*#__PURE__*/_jsx(Repeat,{size:16,className:\"mr-2\"}),\" Gerenciar Ciclos\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 no-export\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setZoomLevel(z=>Math.max(1,z-1)),className:\"p-2 rounded-full hover:bg-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(ZoomOut,{size:20})}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"1\",max:\"10\",value:zoomLevel,onChange:e=>setZoomLevel(Number(e.target.value)),className:\"w-24\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setZoomLevel(z=>Math.min(10,z+1)),className:\"p-2 rounded-full hover:bg-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(ZoomIn,{size:20})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap justify-start items-center gap-4 border-t pt-4 mt-2\",children:[/*#__PURE__*/_jsx(FilterList,{title:\"Prioridade\",options:PRIORITIES,active:filters.priority,onFilterChange:val=>setFilters(_objectSpread(_objectSpread({},filters),{},{priority:val}))}),/*#__PURE__*/_jsx(FilterList,{title:\"Status\",options:STATUSES,active:filters.status,onFilterChange:val=>setFilters(_objectSpread(_objectSpread({},filters),{},{status:val}))}),Object.keys(allLabels).length>0&&/*#__PURE__*/_jsx(FilterList,{title:\"Etiqueta\",options:allLabels,active:filters.label,onFilterChange:val=>setFilters(_objectSpread(_objectSpread({},filters),{},{label:val}))})]})]})}),/*#__PURE__*/_jsx(Timeline,{tasks:tasks,cycles:cycles,onTaskClick:onTaskClick,zoomLevel:zoomLevel,viewStartDate:viewStartDate}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 flex justify-end gap-4 no-export\",children:/*#__PURE__*/_jsxs(Button,{onClick:()=>onOpenTaskModal(),variant:\"primary\",children:[/*#__PURE__*/_jsx(Plus,{size:20,className:\"mr-2\"}),\" Nova Tarefa\"]})})]});};// --- VISÃO EXECUTIVA ---\nconst ExecutiveView=_ref0=>{let{tasks,okrs,onSaveOkr}=_ref0;const executiveViewRef=useRef(null);const[nextStepsPriority,setNextStepsPriority]=useState('Alta');const{overallRoadmapProgress,overallOkrProgress,projectStatusSummary,projectProgressSummary,okrsWithProgress,attentionPoints,nextSteps}=useMemo(()=>{const today=new Date();const roadmapMetrics=tasks.reduce((acc,task)=>{const duration=getTaskDurationInDays(task);const progress=calculateTaskProgress(task);acc.totalDuration+=duration;acc.totalWeightedProgress+=progress*duration;return acc;},{totalDuration:0,totalWeightedProgress:0});const overallProgress=roadmapMetrics.totalDuration>0?Math.round(roadmapMetrics.totalWeightedProgress/roadmapMetrics.totalDuration):0;const projects=tasks.reduce((acc,task)=>{const tag=task.projectTag||'Sem Projeto';if(!acc[tag])acc[tag]={tasks:[]};acc[tag].tasks.push(task);return acc;},{});const statusSummary=Object.keys(projects).map(tag=>{const projectTasks=projects[tag].tasks;const statusCounts=projectTasks.reduce((counts,task)=>{counts[task.status]=(counts[task.status]||0)+1;return counts;},{});return _objectSpread({name:tag,tasksCount:projectTasks.length},statusCounts);});const progressSummary=Object.keys(projects).map(tag=>{const projectTasks=projects[tag].tasks;if(projectTasks.length===0)return{name:tag,progress:0};const totalProgress=projectTasks.reduce((sum,task)=>sum+calculateTaskProgress(task),0);return{name:tag,progress:Math.round(totalProgress/projectTasks.length)};}).sort((a,b)=>a.progress-b.progress);const okrsDetails=okrs.map(okr=>{const progress=calculateOkrProgress(okr);const status=calculateOkrStatus(okr.startDate,okr.targetDate,progress);return _objectSpread(_objectSpread({},okr),{},{progress,status});}).sort((a,b)=>a.progress-b.progress);const totalOkrProgress=okrsDetails.reduce((sum,okr)=>sum+okr.progress,0);const avgOkrProgress=okrs.length>0?Math.round(totalOkrProgress/okrs.length):0;const attention=[];const next=[];tasks.forEach(task=>{const isOverdue=new Date(task.endDate)<today&&task.status!=='Concluído';if(task.priority==='Alta'&&isOverdue){attention.push({type:'Atraso Crítico',text:task.title,date:task.endDate});}if(task.status==='A Fazer'&&task.priority===nextStepsPriority){next.push({type:\"Foco \".concat(nextStepsPriority),text:task.title,date:task.startDate});}});okrs.forEach(okr=>{(okr.keyResults||[]).forEach(kr=>{(kr.attentionLog||[]).forEach(log=>{if(!log.resolved){attention.push({type:'KR Sinalizado',text:kr.text,parentObjective:okr.objective,justification:log.text,krId:kr.id,okrId:okr.id,logId:log.id});}});});});return{overallRoadmapProgress:overallProgress,overallOkrProgress:avgOkrProgress,projectStatusSummary:statusSummary,projectProgressSummary:progressSummary,okrsWithProgress:okrsDetails,attentionPoints:attention.slice(0,5),nextSteps:next.sort((a,b)=>new Date(a.date)-new Date(b.date)).slice(0,5)};},[tasks,okrs,nextStepsPriority]);const handleResolveAttention=(okrId,krId,logId)=>{const targetOkr=okrs.find(o=>o.id===okrId);if(!targetOkr)return;const updatedKeyResults=targetOkr.keyResults.map(kr=>{if(kr.id===krId){const updatedLog=(kr.attentionLog||[]).map(log=>{if(log.id===logId){return _objectSpread(_objectSpread({},log),{},{resolved:true});}return log;});return _objectSpread(_objectSpread({},kr),{},{attentionLog:updatedLog});}return kr;});onSaveOkr(_objectSpread(_objectSpread({},targetOkr),{},{keyResults:updatedKeyResults}));};const getStatusColor=progress=>{if(progress<40)return'bg-red-500';if(progress<70)return'bg-yellow-500';return'bg-green-500';};const StatCard=_ref1=>{let{icon,label,value,colorClass}=_ref1;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full \".concat(colorClass),children:icon}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:label}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-800\",children:value})]})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",ref:executiveViewRef,children:[/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-3xl font-bold text-gray-800 flex items-center\",children:[/*#__PURE__*/_jsx(Briefcase,{className:\"mr-3 text-indigo-600\"}),\"Painel Executivo\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:\"Vis\\xE3o consolidada do progresso, metas e riscos.\"})]}),/*#__PURE__*/_jsxs(Button,{onClick:()=>exportViewAsImage(executiveViewRef,'painel_executivo.png'),variant:\"secondary\",className:\"no-export\",children:[/*#__PURE__*/_jsx(Presentation,{size:16}),\" Exportar Imagem\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-500 uppercase tracking-wider\",children:\"Painel de Indicadores-Chave\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\",children:[/*#__PURE__*/_jsx(StatCard,{icon:/*#__PURE__*/_jsx(TrendingUpIcon,{size:24,className:\"text-green-800\"}),label:\"Progresso Geral do Roadmap\",value:\"\".concat(overallRoadmapProgress,\"%\"),colorClass:\"bg-green-200\"}),/*#__PURE__*/_jsx(StatCard,{icon:/*#__PURE__*/_jsx(Target,{size:24,className:\"text-indigo-800\"}),label:\"Progresso Geral dos OKRs\",value:\"\".concat(overallOkrProgress,\"%\"),colorClass:\"bg-indigo-200\"}),/*#__PURE__*/_jsx(StatCard,{icon:/*#__PURE__*/_jsx(AlertTriangle,{size:24,className:\"text-yellow-800\"}),label:\"Pontos de Aten\\xE7\\xE3o\",value:attentionPoints.length,colorClass:\"bg-yellow-200\"}),/*#__PURE__*/_jsx(StatCard,{icon:/*#__PURE__*/_jsx(Clock,{size:24,className:\"text-blue-800\"}),label:\"Pr\\xF3ximos Passos\",value:nextSteps.length,colorClass:\"bg-blue-200\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-500 uppercase tracking-wider\",children:\"An\\xE1lise Detalhada\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(Card,{className:\"lg:col-span-1\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold text-gray-800 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(Layers,{className:\"mr-2 text-gray-500\"}),\"Status por Projeto\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4 max-h-96 overflow-y-auto pr-2\",children:projectStatusSummary.map(proj=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-gray-700 truncate pr-4 mb-2\",children:[proj.name,\" (\",proj.tasksCount,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-around text-center text-xs\",children:Object.keys(STATUSES).map(s=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-lg\",children:proj[s]||0}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:s})]},s))})]},proj.name))})]}),/*#__PURE__*/_jsxs(Card,{className:\"lg:col-span-1\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold text-gray-800 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"mr-2 text-gray-500\"}),\"Progresso por Projeto\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4 max-h-96 overflow-y-auto pr-2\",children:projectProgressSummary.length>0?projectProgressSummary.map(proj=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-700 truncate pr-4\",children:proj.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-gray-800\",children:[proj.progress,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2.5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(getStatusColor(proj.progress),\" h-2.5 rounded-full\"),style:{width:\"\".concat(proj.progress,\"%\")}})})]},proj.name)):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Nenhum projeto com tarefas.\"})})]}),/*#__PURE__*/_jsxs(Card,{className:\"lg:col-span-1\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold text-gray-800 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(Target,{className:\"mr-2 text-gray-500\"}),\"Status dos Objetivos\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4 max-h-96 overflow-y-auto pr-2\",children:okrsWithProgress.length>0?okrsWithProgress.map(okr=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-700 truncate pr-4\",children:okr.objective}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-0.5 text-xs font-semibold text-white rounded-full \".concat(okr.status.color),children:okr.status.text})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2.5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(getStatusColor(okr.progress),\" h-2.5 rounded-full\"),style:{width:\"\".concat(okr.progress,\"%\")}})}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-gray-800 text-sm\",children:[okr.progress,\"%\"]})]})]},okr.id)):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Nenhum OKR definido.\"})})]}),/*#__PURE__*/_jsxs(Card,{className:\"lg:col-span-3\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold text-gray-800 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"mr-2 text-red-500\"}),\"Intelig\\xEAncia e A\\xE7\\xF5es\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-700 mb-2\",children:\"Pontos de Aten\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:attentionPoints.length>0?attentionPoints.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-red-50 border-l-4 border-red-500 rounded flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-red-800\",children:[item.type,\": \",/*#__PURE__*/_jsx(\"span\",{className:\"font-normal\",children:item.text})]}),item.justification&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-red-600 mt-1 italic\",children:[\"\\\"\",item.justification,\"\\\"\"]})]}),item.logId&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleResolveAttention(item.okrId,item.krId,item.logId),className:\"ml-2 p-1 text-green-600 hover:bg-green-100 rounded-full\",children:/*#__PURE__*/_jsx(Check,{size:18})})]},index)):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm\",children:\"Nenhum ponto de aten\\xE7\\xE3o identificado.\"})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-700\",children:\"Pr\\xF3ximos Passos\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-1\",children:Object.keys(PRIORITIES).map(p=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setNextStepsPriority(p),className:\"px-2 py-0.5 text-xs rounded-full \".concat(nextStepsPriority===p?'bg-indigo-600 text-white':'bg-gray-200'),children:p},p))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:nextSteps.length>0?nextSteps.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-blue-50 border-l-4 border-blue-500 rounded\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-blue-800\",children:[item.type,\": \",/*#__PURE__*/_jsx(\"span\",{className:\"font-normal\",children:item.text})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-600\",children:[\"Inicia em: \",formatDate(item.date,false)]})]},index)):/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-sm\",children:[\"Nenhuma a\\xE7\\xE3o com prioridade \\\"\",nextStepsPriority,\"\\\" a ser iniciada.\"]})})]})]})]})]})]})]});};// --- Componentes de OKR ---\nconst OkrForm=_ref10=>{let{okr,onSave,onCancel}=_ref10;const[objective,setObjective]=useState((okr===null||okr===void 0?void 0:okr.objective)||'');const[keyResults,setKeyResults]=useState((okr===null||okr===void 0?void 0:okr.keyResults)||[]);const[targetDate,setTargetDate]=useState((okr===null||okr===void 0?void 0:okr.targetDate)||'');const handleKrChange=(index,field,value)=>{const newKrs=[...keyResults];const numericFields=['startValue','targetValue','weight'];if(numericFields.includes(field)){if(value===''){newKrs[index][field]='';}else{const parsedValue=parseFloat(value);if(!isNaN(parsedValue)){newKrs[index][field]=parsedValue;}}}else{newKrs[index][field]=value;}setKeyResults(newKrs);};const addKr=()=>setKeyResults([...keyResults,{id:\"kr_\".concat(Date.now()),text:'',startValue:0,targetValue:100,currentValue:0,weight:1,updates:[],attentionLog:[]}]);const removeKr=index=>setKeyResults(keyResults.filter((_,i)=>i!==index));const handleFormSave=()=>{if(!objective.trim())return;const finalKrs=keyResults.filter(kr=>kr.text.trim()!=='').map(kr=>_objectSpread(_objectSpread({},kr),{},{weight:Number(kr.weight)>0?Number(kr.weight):1,startValue:Number(kr.startValue)||0,targetValue:Number(kr.targetValue)||0,currentValue:Number(kr.currentValue)||0}));onSave({id:okr===null||okr===void 0?void 0:okr.id,objective,keyResults:finalKrs,targetDate,startDate:(okr===null||okr===void 0?void 0:okr.startDate)||new Date().toISOString().split('T')[0]});};return/*#__PURE__*/_jsxs(Card,{className:\"border-indigo-300 border-2 mt-6 no-export\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4\",children:okr?'Editar Objetivo':'Novo Objetivo'}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-600 mb-1\",children:\"Objetivo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:objective,onChange:e=>setObjective(e.target.value),placeholder:\"Ex: Lan\\xE7ar o melhor produto do mercado\",className:\"w-full p-2 bg-white border border-gray-300 rounded-md text-gray-800\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-600 mb-1\",children:\"Data Alvo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:targetDate,onChange:e=>setTargetDate(e.target.value),className:\"w-full p-2 bg-white border border-gray-300 rounded-md text-gray-800\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-600 mb-2\",children:\"Resultados-Chave\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:keyResults.map((kr,index)=>{var _kr$startValue,_kr$targetValue,_kr$weight;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-gray-50 rounded-md border border-gray-200 space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:kr.text,onChange:e=>handleKrChange(index,'text',e.target.value),placeholder:\"KR \".concat(index+1),className:\"flex-grow p-2 border border-gray-300 rounded-md text-gray-800\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeKr(index),className:\"text-red-500 hover:text-red-700 p-1\",children:/*#__PURE__*/_jsx(Trash2,{size:16})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-500\",children:\"Inicial\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:(_kr$startValue=kr.startValue)!==null&&_kr$startValue!==void 0?_kr$startValue:'',onChange:e=>handleKrChange(index,'startValue',e.target.value),className:\"w-full p-2 border border-gray-300 rounded-md text-gray-800\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-500\",children:\"Meta\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:(_kr$targetValue=kr.targetValue)!==null&&_kr$targetValue!==void 0?_kr$targetValue:'',onChange:e=>handleKrChange(index,'targetValue',e.target.value),className:\"w-full p-2 border border-gray-300 rounded-md text-gray-800\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-500\",children:\"Atual\"}),/*#__PURE__*/_jsx(\"p\",{className:\"w-full p-2 border border-gray-200 bg-gray-100 rounded-md text-gray-800\",children:kr.currentValue||0})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-500\",children:\"Peso\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:(_kr$weight=kr.weight)!==null&&_kr$weight!==void 0?_kr$weight:'',onChange:e=>handleKrChange(index,'weight',e.target.value),className:\"w-full p-2 border border-gray-300 rounded-md text-gray-800\"})]})]})]},kr.id||index);})}),/*#__PURE__*/_jsxs(Button,{onClick:addKr,variant:\"secondary\",className:\"mt-3 text-sm\",children:[/*#__PURE__*/_jsx(Plus,{size:16}),\" Adicionar KR\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 mt-6\",children:[/*#__PURE__*/_jsx(Button,{onClick:onCancel,variant:\"secondary\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{onClick:handleFormSave,variant:\"primary\",children:\"Salvar Objetivo\"})]})]});};const KrHistoryModal=_ref11=>{let{isOpen,onClose,kr,onDeleteUpdate}=_ref11;if(!isOpen)return null;const sortedUpdates=kr.updates?[...kr.updates].sort((a,b)=>new Date(b.date)-new Date(a.date)):[];return/*#__PURE__*/_jsx(Modal,{isOpen:isOpen,onClose:onClose,title:\"Hist\\xF3rico de Progresso\",size:\"2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800\",children:kr.text}),sortedUpdates.length>0?/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-3 max-h-96 overflow-y-auto pr-2\",children:sortedUpdates.map(update=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-center justify-between p-3 bg-gray-100 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-indigo-700\",children:[\"Valor: \",update.value]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Registrado em: \",formatDate(new Date(update.date),true)]})]}),/*#__PURE__*/_jsx(Button,{onClick:()=>onDeleteUpdate(kr.id,update.date),variant:\"ghost\",className:\"!p-2 text-red-500 hover:bg-red-100\",children:/*#__PURE__*/_jsx(Trash2,{size:16})})]},update.date))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Nenhum registro de progresso ainda.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end pt-4 border-t\",children:/*#__PURE__*/_jsx(Button,{onClick:onClose,variant:\"secondary\",children:\"Fechar\"})})]})});};const KrAttentionModal=_ref12=>{let{isOpen,onClose,kr,onSaveAttentionLog}=_ref12;const[log,setLog]=useState(kr.attentionLog||[]);const[newJustification,setNewJustification]=useState('');useEffect(()=>{if(isOpen)setLog(kr.attentionLog||[]);},[isOpen,kr.attentionLog]);const handleAdd=()=>{if(!newJustification.trim())return;const newLogEntry={id:\"att_\".concat(Date.now()),text:newJustification,date:new Date().toISOString(),resolved:false};const updatedLog=[...log,newLogEntry];setLog(updatedLog);onSaveAttentionLog(kr.id,updatedLog);setNewJustification('');};const handleToggleResolve=logId=>{const updatedLog=log.map(item=>item.id===logId?_objectSpread(_objectSpread({},item),{},{resolved:!item.resolved}):item);setLog(updatedLog);onSaveAttentionLog(kr.id,updatedLog);};const handleDelete=logId=>{const updatedLog=log.filter(item=>item.id!==logId);setLog(updatedLog);onSaveAttentionLog(kr.id,updatedLog);};if(!isOpen)return null;return/*#__PURE__*/_jsx(Modal,{isOpen:isOpen,onClose:onClose,title:\"Hist\\xF3rico de Pontos de Aten\\xE7\\xE3o\",size:\"2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800\",children:kr.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:newJustification,onChange:e=>setNewJustification(e.target.value),placeholder:\"Adicionar nova justificativa...\",className:\"w-full p-2 border border-gray-300 rounded-md text-sm\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(Button,{onClick:handleAdd,className:\"!text-xs !py-1\",children:\"Adicionar Ponto\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3 max-h-80 overflow-y-auto pr-2\",children:log.sort((a,b)=>new Date(b.date)-new Date(a.date)).map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 rounded-lg \".concat(item.resolved?'bg-green-50':'bg-red-50'),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(item.resolved?'text-gray-500 line-through':'text-gray-800'),children:item.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400\",children:formatDate(new Date(item.date),true)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{onClick:()=>handleToggleResolve(item.id),variant:\"ghost\",className:\"!p-1 h-7 w-7 \".concat(item.resolved?'text-yellow-600':'text-green-600'),children:item.resolved?/*#__PURE__*/_jsx(X,{size:16}):/*#__PURE__*/_jsx(Check,{size:16})}),/*#__PURE__*/_jsx(Button,{onClick:()=>handleDelete(item.id),variant:\"ghost\",className:\"!p-1 h-7 w-7 text-red-500\",children:/*#__PURE__*/_jsx(Trash2,{size:16})})]})]})]},item.id))})]})});};const KrItem=_ref13=>{let{kr,okrStartDate,okrTargetDate,onUpdate,onDeleteUpdate,onSaveAttentionLog}=_ref13;const[isUpdating,setIsUpdating]=useState(false);const[newValue,setNewValue]=useState(kr.currentValue);const[isHistoryOpen,setIsHistoryOpen]=useState(false);const[isAttentionOpen,setIsAttentionOpen]=useState(false);const progress=calculateKrProgress(kr);const hasActiveAttention=(kr.attentionLog||[]).some(log=>!log.resolved);const pacingInfo=useMemo(()=>calculatePacingInfo(okrStartDate,okrTargetDate,kr.startValue,kr.targetValue,kr.currentValue),[okrStartDate,okrTargetDate,kr.startValue,kr.targetValue,kr.currentValue]);const handleUpdate=()=>{onUpdate(kr.id,newValue);setIsUpdating(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(KrHistoryModal,{isOpen:isHistoryOpen,onClose:()=>setIsHistoryOpen(false),kr:kr,onDeleteUpdate:onDeleteUpdate}),/*#__PURE__*/_jsx(KrAttentionModal,{isOpen:isAttentionOpen,onClose:()=>setIsAttentionOpen(false),kr:kr,onSaveAttentionLog:onSaveAttentionLog}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-white rounded-lg border border-gray-200 hover:border-gray-300 transition-all space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row sm:items-center sm:justify-between\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-800 flex-1\",children:kr.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 mt-2 sm:mt-0 no-export\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500\",children:[\"Peso: \",kr.weight||1]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-1\",children:isUpdating?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newValue,onChange:e=>setNewValue(parseFloat(e.target.value)),className:\"w-24 p-1 border border-indigo-400 rounded-md\",autoFocus:true}),/*#__PURE__*/_jsx(Button,{onClick:handleUpdate,variant:\"primary\",className:\"!px-2 !py-1\",children:/*#__PURE__*/_jsx(Check,{size:16})}),/*#__PURE__*/_jsx(Button,{onClick:()=>setIsUpdating(false),variant:\"secondary\",className:\"!px-2 !py-1\",children:/*#__PURE__*/_jsx(X,{size:16})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-indigo-600 text-sm\",children:kr.currentValue}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500 text-sm\",children:[\"/ \",kr.targetValue]}),/*#__PURE__*/_jsx(Button,{onClick:()=>setIsUpdating(true),variant:\"ghost\",className:\"!p-1 h-7 w-7\",children:/*#__PURE__*/_jsx(Zap,{size:16})}),/*#__PURE__*/_jsx(Button,{onClick:()=>setIsHistoryOpen(true),variant:\"ghost\",className:\"!p-1 h-7 w-7\",children:/*#__PURE__*/_jsx(History,{size:16})}),/*#__PURE__*/_jsx(Button,{onClick:()=>setIsAttentionOpen(true),variant:\"ghost\",className:\"!p-1 h-7 w-7 \".concat(hasActiveAttention?'text-red-500 bg-red-100':''),children:/*#__PURE__*/_jsx(AlertTriangle,{size:16})})]})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2.5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-indigo-600 h-2.5 rounded-full\",style:{width:\"\".concat(progress,\"%\")}})})}),pacingInfo.status!=='no-date'&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center text-xs text-gray-500 border-t pt-2 mt-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Clock,{size:14}),/*#__PURE__*/_jsx(\"span\",{children:pacingInfo.daysRemaining!==null?\"\".concat(pacingInfo.daysRemaining,\" dias restantes\"):pacingInfo.status==='completed'?'Meta atingida':'Prazo encerrado'})]}),pacingInfo.requiredPace!==null&&pacingInfo.status==='on-track'&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",title:\"Ritmo necess\\xE1rio por m\\xEAs para atingir a meta\",children:[/*#__PURE__*/_jsx(Gauge,{size:14}),/*#__PURE__*/_jsxs(\"span\",{children:[pacingInfo.requiredPace,\"/m\\xEAs\"]})]})]})]})]});};// --- Componente OkrView ---\nconst OkrView=_ref14=>{let{okrs,tasks,onSave,onDelete}=_ref14;const okrViewRef=useRef(null);const[layout,setLayout]=useState('list');const[isFormOpen,setIsFormOpen]=useState(false);const[editingOkr,setEditingOkr]=useState(null);const[expandedOkrs,setExpandedOkrs]=useState({});const[itemToDelete,setItemToDelete]=useState(null);const[isConfirmDeleteOpen,setIsConfirmDeleteOpen]=useState(false);const[expandedTasks,setExpandedTasks]=useState({});const toggleExpansion=okrId=>{setExpandedOkrs(prev=>_objectSpread(_objectSpread({},prev),{},{[okrId]:!prev[okrId]}));};const toggleTasksExpansion=okrId=>{setExpandedTasks(prev=>_objectSpread(_objectSpread({},prev),{},{[okrId]:!prev[okrId]}));};const handleSave=okrData=>{onSave(okrData);setIsFormOpen(false);setEditingOkr(null);};const handleKrUpdate=(okr,krId,newValue)=>{const updatedKeyResults=okr.keyResults.map(kr=>{if(kr.id===krId){const newUpdate={id:\"update_\".concat(Date.now(),\"_\").concat(Math.random().toString(36).substr(2,9)),value:newValue,date:new Date().toISOString()};const newUpdates=[...(kr.updates||[]),newUpdate];return _objectSpread(_objectSpread({},kr),{},{currentValue:newValue,updates:newUpdates});}return kr;});onSave(_objectSpread(_objectSpread({},okr),{},{keyResults:updatedKeyResults}));};const handleSaveAttentionLog=(okr,krId,attentionLog)=>{const updatedKeyResults=okr.keyResults.map(kr=>{if(kr.id===krId){return _objectSpread(_objectSpread({},kr),{},{attentionLog});}return kr;});onSave(_objectSpread(_objectSpread({},okr),{},{keyResults:updatedKeyResults}));};const handleDeleteUpdate=(okr,krId,updateId)=>{const updatedKeyResults=okr.keyResults.map(kr=>{if(kr.id===krId){const remainingUpdates=(kr.updates||[]).filter(u=>u.date!==updateId);let newCurrentValue=kr.startValue;if(remainingUpdates.length>0){remainingUpdates.sort((a,b)=>new Date(b.date)-new Date(a.date));newCurrentValue=remainingUpdates[0].value;}return _objectSpread(_objectSpread({},kr),{},{updates:remainingUpdates,currentValue:newCurrentValue});}return kr;});onSave(_objectSpread(_objectSpread({},okr),{},{keyResults:updatedKeyResults}));};const handleEdit=okr=>{setEditingOkr(okr);setIsFormOpen(true);};const handleCancel=()=>{setIsFormOpen(false);setEditingOkr(null);};const requestDeleteOkr=id=>{setItemToDelete({id,type:'okr'});setIsConfirmDeleteOpen(true);};const confirmDeleteOkr=()=>{onDelete(itemToDelete.id,itemToDelete.type);setIsConfirmDeleteOpen(false);setItemToDelete(null);};return/*#__PURE__*/_jsxs(\"div\",{ref:okrViewRef,children:[/*#__PURE__*/_jsx(ConfirmModal,{isOpen:isConfirmDeleteOpen,onClose:()=>setIsConfirmDeleteOpen(false),onConfirm:confirmDeleteOkr,title:\"Confirmar Exclus\\xE3o de Objetivo\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Tem certeza que deseja excluir este Objetivo e todos os seus KRs? Esta a\\xE7\\xE3o n\\xE3o pode ser desfeita.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-3xl font-bold text-gray-800 flex items-center\",children:[/*#__PURE__*/_jsx(Target,{className:\"mr-3 text-indigo-600\"}),\"Objetivos e Resultados-Chave\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:\"Defina e acompanhe as metas que impulsionam seu roadmap.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(Button,{onClick:()=>exportViewAsImage(okrViewRef,'okrs.png'),variant:\"secondary\",className:\"no-export\",children:[/*#__PURE__*/_jsx(Presentation,{size:16}),\" Exportar Imagem\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-gray-100 rounded-lg p-1 no-export\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setLayout('list'),className:\"p-2 rounded-md transition-colors \".concat(layout==='list'?'bg-white text-indigo-600 shadow-sm':'text-gray-500 hover:bg-gray-200'),children:/*#__PURE__*/_jsx(List,{size:20})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setLayout('grid'),className:\"p-2 rounded-md transition-colors \".concat(layout==='grid'?'bg-white text-indigo-600 shadow-sm':'text-gray-500 hover:bg-gray-200'),children:/*#__PURE__*/_jsx(LayoutGrid,{size:20})})]}),!isFormOpen&&/*#__PURE__*/_jsxs(Button,{onClick:()=>setIsFormOpen(true),variant:\"primary\",className:\"no-export\",children:[/*#__PURE__*/_jsx(Plus,{size:16}),\" Novo Objetivo\"]})]})]})}),isFormOpen&&/*#__PURE__*/_jsx(OkrForm,{okr:editingOkr,onSave:handleSave,onCancel:handleCancel},(editingOkr===null||editingOkr===void 0?void 0:editingOkr.id)||'new'),/*#__PURE__*/_jsx(\"div\",{className:layout==='list'?\"space-y-6\":\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\",children:okrs.map(okr=>{const progress=calculateOkrProgress(okr);const isExpanded=!!expandedOkrs[okr.id];const okrStatus=calculateOkrStatus(okr.startDate,okr.targetDate,progress);const relatedTasks=tasks.filter(task=>{var _task$okrLink3;return((_task$okrLink3=task.okrLink)===null||_task$okrLink3===void 0?void 0:_task$okrLink3.okrId)===okr.id;});const areTasksExpanded=!!expandedTasks[okr.id];return/*#__PURE__*/_jsxs(Card,{className:\"transition-all duration-300 overflow-hidden \".concat(layout==='list'?'!p-0':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:layout==='list'?'p-6':'',children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 flex-1 pr-4\",children:okr.objective}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 no-export\",children:[/*#__PURE__*/_jsx(Button,{onClick:e=>{e.stopPropagation();handleEdit(okr);},variant:\"ghost\",className:\"!p-2\",children:/*#__PURE__*/_jsx(Edit,{size:16})}),/*#__PURE__*/_jsx(Button,{onClick:e=>{e.stopPropagation();requestDeleteOkr(okr.id);},variant:\"ghost\",className:\"!p-2 text-red-500 hover:bg-red-50\",children:/*#__PURE__*/_jsx(Trash2,{size:16})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 text-sm text-gray-500\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Calendar,{size:14}),/*#__PURE__*/_jsxs(\"span\",{children:[formatDate(okr.startDate),\" - \",formatDate(okr.targetDate)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-0.5 text-xs font-semibold text-white rounded-full \".concat(okrStatus.color),children:okrStatus.text}),relatedTasks.length>0&&layout==='list'&&/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1.5 px-2 py-0.5 text-xs font-semibold text-gray-600 bg-gray-200 rounded-full\",children:[/*#__PURE__*/_jsx(Layers,{size:12}),relatedTasks.length]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex items-center gap-4 cursor-pointer\",onClick:()=>layout==='list'&&toggleExpansion(okr.id),children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-sky-500 to-indigo-600 h-4 rounded-full transition-all duration-500\",style:{width:\"\".concat(progress,\"%\")}})}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-bold text-indigo-600\",children:[progress,\"%\"]}),layout==='list'&&/*#__PURE__*/_jsx(ChevronDown,{size:20,className:\"text-gray-500 transition-transform duration-300 \".concat(isExpanded?'rotate-180':'')})]})]}),layout==='list'&&/*#__PURE__*/_jsxs(\"div\",{className:\"transition-all duration-500 ease-in-out bg-gray-50/50 \".concat(isExpanded?'max-h-[2500px] py-4':'max-h-0'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 space-y-3\",children:okr.keyResults.map(kr=>/*#__PURE__*/_jsx(KrItem,{kr:kr,okrStartDate:okr.startDate,okrTargetDate:okr.targetDate,onUpdate:(krId,newValue)=>handleKrUpdate(okr,krId,newValue),onDeleteUpdate:(krId,updateId)=>handleDeleteUpdate(okr,krId,updateId),onSaveAttentionLog:(krId,attentionLog)=>handleSaveAttentionLog(okr,krId,attentionLog)},kr.id))}),relatedTasks.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 mt-4 pt-4 border-t border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{onClick:()=>toggleTasksExpansion(okr.id),className:\"flex justify-between items-center cursor-pointer select-none\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-xs font-bold text-gray-500 uppercase tracking-wider flex items-center\",children:[/*#__PURE__*/_jsx(Layers,{size:14,className:\"mr-2\"}),\"Atividades Vinculadas (\",relatedTasks.length,\")\"]}),/*#__PURE__*/_jsx(ChevronDown,{size:20,className:\"text-gray-500 transition-transform duration-300 \".concat(areTasksExpanded?'rotate-180':'')})]}),/*#__PURE__*/_jsx(\"div\",{className:\"transition-all duration-500 ease-in-out overflow-hidden \".concat(areTasksExpanded?'max-h-[500px] mt-3':'max-h-0'),children:/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:relatedTasks.map(task=>{var _STATUSES$task$status3,_PRIORITIES$task$prio,_PRIORITIES$task$prio2;return/*#__PURE__*/_jsxs(\"li\",{className:\"text-sm p-3 bg-white rounded-md border space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-gray-800\",children:task.title}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-0.5 rounded-full \".concat(((_STATUSES$task$status3=STATUSES[task.status])===null||_STATUSES$task$status3===void 0?void 0:_STATUSES$task$status3.color)||'bg-gray-200 text-gray-800'),children:task.status})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row justify-between items-start sm:items-center text-xs text-gray-500 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1.5\",title:\"Prioridade\",children:[/*#__PURE__*/_jsx(ChevronsUpDown,{size:14,className:(_PRIORITIES$task$prio=PRIORITIES[task.priority])===null||_PRIORITIES$task$prio===void 0?void 0:_PRIORITIES$task$prio.textColor}),/*#__PURE__*/_jsx(\"strong\",{className:(_PRIORITIES$task$prio2=PRIORITIES[task.priority])===null||_PRIORITIES$task$prio2===void 0?void 0:_PRIORITIES$task$prio2.textColor,children:task.priority})]}),task.projectTag&&/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1.5\",title:\"Projeto\",children:[/*#__PURE__*/_jsx(Briefcase,{size:14}),/*#__PURE__*/_jsx(\"span\",{children:task.projectTag})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1.5\",title:\"Dura\\xE7\\xE3o\",children:[/*#__PURE__*/_jsx(Calendar,{size:14}),/*#__PURE__*/_jsxs(\"span\",{children:[formatDate(task.startDate),\" \\u2192 \",formatDate(task.endDate)]})]})]})]},task.id);})})})]})]})]},okr.id);})})]})]});};// --- Componente de Login ---\nconst LoginScreen=()=>{const[isLoginView,setIsLoginView]=useState(true);const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[name,setName]=useState('');const[error,setError]=useState('');const handleGoogleLogin=async()=>{const provider=new GoogleAuthProvider();try{await signInWithPopup(auth,provider);setError('');}catch(error){console.error(\"Erro durante o login com Google:\",error);if(error.code==='auth/unauthorized-domain'){setError('Erro: Este domínio não está autorizado. Verifique as configurações do Firebase.');}else{setError('Ocorreu um erro durante o login com Google.');}}};const handleEmailAuth=async e=>{e.preventDefault();setError('');if(isLoginView){try{await signInWithEmailAndPassword(auth,email,password);}catch(error){setError('E-mail ou senha inválidos.');console.error(\"Erro de login:\",error);}}else{try{const userCredential=await createUserWithEmailAndPassword(auth,email,password);await updateProfile(userCredential.user,{displayName:name});}catch(error){if(error.code==='auth/email-already-in-use'){setError('Este e-mail já está em uso.');}else{setError('Erro ao criar a conta. A senha deve ter no mínimo 6 caracteres.');}console.error(\"Erro de registro:\",error);}}};return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 bg-white rounded-2xl shadow-xl max-w-md w-full\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-cyan-600 mb-2\",children:\"Norte Estrat\\xE9gico\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-600 mb-6\",children:\"Seu planejamento estrat\\xE9gico em um s\\xF3 lugar.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex border-b mb-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsLoginView(true),className:\"flex-1 py-2 font-semibold \".concat(isLoginView?'text-indigo-600 border-b-2 border-indigo-600':'text-gray-500'),children:\"Entrar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsLoginView(false),className:\"flex-1 py-2 font-semibold \".concat(!isLoginView?'text-indigo-600 border-b-2 border-indigo-600':'text-gray-500'),children:\"Registrar-se\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleEmailAuth,className:\"space-y-4\",children:[!isLoginView&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nome\",value:name,onChange:e=>setName(e.target.value),required:true,className:\"w-full p-3 border rounded-lg\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"E-mail\",value:email,onChange:e=>setEmail(e.target.value),required:true,className:\"w-full p-3 border rounded-lg\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Senha\",value:password,onChange:e=>setPassword(e.target.value),required:true,className:\"w-full p-3 border rounded-lg\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",className:\"w-full !py-3 !text-lg\",children:isLoginView?'Entrar':'Criar Conta'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-6 flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-grow border-t\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-4 text-gray-400\",children:\"ou\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-grow border-t\"})]}),/*#__PURE__*/_jsxs(Button,{onClick:handleGoogleLogin,variant:\"secondary\",className:\"w-full !py-3\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"w-5 h-5 mr-2\",viewBox:\"0 0 48 48\",children:[/*#__PURE__*/_jsx(\"path\",{fill:\"#EA4335\",d:\"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z\"}),/*#__PURE__*/_jsx(\"path\",{fill:\"#4285F4\",d:\"M46.98 24.55c0-1.57-.15-3.09-.42-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z\"}),/*#__PURE__*/_jsx(\"path\",{fill:\"#FBBC05\",d:\"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z\"}),/*#__PURE__*/_jsx(\"path\",{fill:\"#34A853\",d:\"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z\"}),/*#__PURE__*/_jsx(\"path\",{fill:\"none\",d:\"M0 0h48v48H0z\"})]}),\"Continuar com Google\"]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-sm text-red-600 bg-red-100 p-3 rounded-lg text-center\",children:error})]})});};// --- INÍCIO DOS NOVOS COMPONENTES ---\n// Componente para um único card de tarefa no quadro Kanban\nconst TaskCard=_ref15=>{var _PRIORITIES$task$prio3,_PRIORITIES$task$prio4;let{task,onTaskClick}=_ref15;const subtaskProgress=useMemo(()=>{if(!task.subtasks||task.subtasks.length===0)return null;const completed=task.subtasks.filter(s=>s.completed).length;return{completed,total:task.subtasks.length};},[task.subtasks]);const isBlocked=useMemo(()=>{var _task$blockerLog3;return(_task$blockerLog3=task.blockerLog)===null||_task$blockerLog3===void 0?void 0:_task$blockerLog3.some(b=>!b.unblockDate);},[task.blockerLog]);return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>onTaskClick(task),className:\"bg-white rounded-lg p-4 shadow-md border-l-4 \".concat(isBlocked?'border-red-500':((_PRIORITIES$task$prio3=PRIORITIES[task.priority])===null||_PRIORITIES$task$prio3===void 0?void 0:_PRIORITIES$task$prio3.borderColor)||'border-transparent',\" cursor-pointer hover:shadow-lg hover:bg-gray-50 transition-all duration-200 space-y-3\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-semibold bg-gray-100 text-gray-700 px-2 py-1 rounded\",children:task.projectTag||'Geral'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[isBlocked&&/*#__PURE__*/_jsx(Lock,{size:14,className:\"text-red-500\",title:\"Tarefa Bloqueada\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-bold px-2 py-1 rounded-full \".concat((_PRIORITIES$task$prio4=PRIORITIES[task.priority])===null||_PRIORITIES$task$prio4===void 0?void 0:_PRIORITIES$task$prio4.color,\" text-white\"),children:task.priority})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-800\",children:task.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-400 font-mono mt-1\",children:[\"ID: \",task.humanId]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center text-xs text-gray-500 pt-2 border-t border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1.5\",title:\"Prazo Final\",children:[/*#__PURE__*/_jsx(Calendar,{size:14}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(task.endDate)})]}),subtaskProgress&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1.5\",title:\"Subtarefas Conclu\\xEDdas\",children:[/*#__PURE__*/_jsx(CheckCircle,{size:14}),/*#__PURE__*/_jsxs(\"span\",{children:[subtaskProgress.completed,\"/\",subtaskProgress.total]})]})]})]});};// --- NOVA ABA DE ATIVIDADES (KANBAN) ---\nconst TasksView=_ref16=>{let{tasks,onTaskClick,filters,setFilters}=_ref16;const tasksViewRef=useRef(null);const tasksByStatus=useMemo(()=>{const grouped={};Object.keys(STATUSES).forEach(status=>{grouped[status]=[];});tasks.forEach(task=>{if(grouped[task.status]){grouped[task.status].push(task);}});return grouped;},[tasks]);const allLabels=useMemo(()=>{const labelSet=new Set();tasks.forEach(task=>(task.labels||[]).forEach(label=>labelSet.add(label)));const labelOptions={};Array.from(labelSet).sort().forEach(label=>{labelOptions[label]={label};});return labelOptions;},[tasks]);return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",ref:tasksViewRef,children:[/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-3xl font-bold text-gray-800 flex items-center\",children:[/*#__PURE__*/_jsx(ListTodo,{className:\"mr-3 text-indigo-600\"}),\"Quadro de Atividades\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:\"Visualize e gerencie o fluxo de trabalho do dia a dia.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(Button,{onClick:()=>exportViewAsImage(tasksViewRef,'quadro_atividades.png'),variant:\"secondary\",className:\"no-export\",children:[/*#__PURE__*/_jsx(Presentation,{size:16}),\" Exportar Imagem\"]}),/*#__PURE__*/_jsxs(Button,{onClick:()=>onTaskClick(null),variant:\"primary\",className:\"no-export\",children:[/*#__PURE__*/_jsx(Plus,{size:16}),\" Nova Tarefa\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap justify-start items-center gap-4 border-t pt-4 mt-4 no-export\",children:[/*#__PURE__*/_jsx(FilterList,{title:\"Prioridade\",options:PRIORITIES,active:filters.priority,onFilterChange:val=>setFilters(_objectSpread(_objectSpread({},filters),{},{priority:val}))}),/*#__PURE__*/_jsx(FilterList,{title:\"Status\",options:STATUSES,active:filters.status,onFilterChange:val=>setFilters(_objectSpread(_objectSpread({},filters),{},{status:val}))}),Object.keys(allLabels).length>0&&/*#__PURE__*/_jsx(FilterList,{title:\"Etiqueta\",options:allLabels,active:filters.label,onFilterChange:val=>setFilters(_objectSpread(_objectSpread({},filters),{},{label:val}))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-6 overflow-x-auto pb-4\",children:Object.keys(STATUSES).map(status=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex-shrink-0 w-80 bg-gray-100 rounded-xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 sticky top-0 bg-gray-100 rounded-t-xl z-10 border-t-4 \".concat(STATUSES[status].borderColor),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-gray-800\",children:STATUSES[status].label}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold bg-gray-200 text-gray-600 px-2 py-1 rounded-full\",children:tasksByStatus[status].length})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 space-y-4 overflow-y-auto\",style:{maxHeight:'calc(100vh - 300px)'},children:tasksByStatus[status].map(task=>/*#__PURE__*/_jsx(TaskCard,{task:task,onTaskClick:onTaskClick},task.id))})]},status))})]});};// --- FIM DOS NOVOS COMPONENTES ---\n// --- Componente Principal ---\nexport default function App(){const[user,setUser]=useState(null);const[appId]=useState('general-control');const[error,setError]=useState(null);const[tasks,setTasks]=useState([]);const[okrs,setOkrs]=useState([]);const[cycles,setCycles]=useState([]);const[isLoading,setIsLoading]=useState(true);const[view,setView]=useState('tasks');const[isTaskModalOpen,setIsTaskModalOpen]=useState(false);const[isCyclesModalOpen,setIsCyclesModalOpen]=useState(false);const[selectedTask,setSelectedTask]=useState(null);const[filters,setFilters]=useState({priority:'Todos',status:'Todos',label:'Todos'});const[isConfirmDeleteOpen,setIsConfirmDeleteOpen]=useState(false);const[itemToDelete,setItemToDelete]=useState(null);const[zoomLevel,setZoomLevel]=useState(5);const[viewStartDate,setViewStartDate]=useState(()=>{const date=new Date();date.setDate(date.getDate()-15);date.setHours(0,0,0,0);return date;});useEffect(()=>{const unsubscribe=onAuthStateChanged(auth,currentUser=>{setUser(currentUser);setIsLoading(false);});return()=>unsubscribe();},[]);useEffect(()=>{if(!user){setTasks([]);setOkrs([]);setCycles([]);return;};const userId=user.uid;const tasksCollectionPath=\"artifacts/\".concat(appId,\"/users/\").concat(userId,\"/roadmap_tasks\");const okrsCollectionPath=\"artifacts/\".concat(appId,\"/users/\").concat(userId,\"/okrs\");const cyclesCollectionPath=\"artifacts/\".concat(appId,\"/users/\").concat(userId,\"/cycles\");const unsubscribeTasks=onSnapshot(query(collection(db,tasksCollectionPath)),snapshot=>{setTasks(snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data())));},err=>{console.error(\"Error fetching tasks:\",err);setError(\"Falha ao carregar tarefas.\");});const unsubscribeOkrs=onSnapshot(query(collection(db,okrsCollectionPath)),snapshot=>{const okrData=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));okrData.forEach(okr=>{if(okr.keyResults){okr.keyResults.forEach(kr=>{if(kr.updates)kr.updates.sort((a,b)=>new Date(a.date)-new Date(b.date));});}});setOkrs(okrData);},err=>{console.error(\"Error fetching OKRs:\",err);setError(\"Falha ao carregar OKRs.\");});const unsubscribeCycles=onSnapshot(query(collection(db,cyclesCollectionPath)),snapshot=>{setCycles(snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data())));},err=>{console.error(\"Error fetching cycles:\",err);setError(\"Falha ao carregar ciclos.\");});return()=>{unsubscribeTasks();unsubscribeOkrs();unsubscribeCycles();};},[user,appId]);const handleSaveTask=async taskData=>{if(!user)return;const collectionPath=\"artifacts/\".concat(appId,\"/users/\").concat(user.uid,\"/roadmap_tasks\");const dataForFirestore={title:taskData.title,description:taskData.description,priority:taskData.priority,status:taskData.status,startDate:taskData.startDate,endDate:taskData.endDate,labels:taskData.labels,projectTag:taskData.projectTag,blockerLog:taskData.blockerLog,subtasks:taskData.subtasks,customColor:taskData.customColor,okrLink:taskData.okrLink};if(taskData.id){const docRef=doc(db,collectionPath,taskData.id);await updateDoc(docRef,dataForFirestore);}else{dataForFirestore.createdAt=serverTimestamp();dataForFirestore.humanId=\"\".concat(Math.random().toString(36).substring(2,6).toUpperCase());await addDoc(collection(db,collectionPath),dataForFirestore);}};const handleSaveOkr=async okrData=>{if(!user)return;const collectionPath=\"artifacts/\".concat(appId,\"/users/\").concat(user.uid,\"/okrs\");if(okrData.id){const{id}=okrData,dataToUpdate=_objectWithoutProperties(okrData,_excluded3);await updateDoc(doc(db,collectionPath,id),dataToUpdate);}else{const{id}=okrData,dataToAdd=_objectWithoutProperties(okrData,_excluded4);await addDoc(collection(db,collectionPath),_objectSpread(_objectSpread({},dataToAdd),{},{createdAt:serverTimestamp()}));}};const handleSaveCycles=async cyclesToSave=>{if(!user)return;const collectionPath=\"artifacts/\".concat(appId,\"/users/\").concat(user.uid,\"/cycles\");for(const cycle of cyclesToSave){const{localId}=cycle,data=_objectWithoutProperties(cycle,_excluded5);if(cycle.id){await updateDoc(doc(db,collectionPath,cycle.id),data);}else{await addDoc(collection(db,collectionPath),data);}}};const handleDeleteCycle=async cycleId=>{if(!user)return;const collectionPath=\"artifacts/\".concat(appId,\"/users/\").concat(user.uid,\"/cycles\");await deleteDoc(doc(db,collectionPath,cycleId));};const requestDelete=(id,type)=>{setItemToDelete({id,type});setIsConfirmDeleteOpen(true);};const confirmDelete=async()=>{if(!itemToDelete||!user)return;const{id,type}=itemToDelete;const collectionPath=\"artifacts/\".concat(appId,\"/users/\").concat(user.uid,\"/\").concat(type==='task'?'roadmap_tasks':'okrs');await deleteDoc(doc(db,collectionPath,id));if(type==='task')setIsTaskModalOpen(false);setIsConfirmDeleteOpen(false);setItemToDelete(null);};const handleOpenTaskModal=function(){let task=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;setSelectedTask(task);setIsTaskModalOpen(true);};const handleLogout=()=>{signOut(auth).catch(error=>{console.error(\"Erro ao sair:\",error);});};const filteredTasks=useMemo(()=>{return tasks.filter(task=>{const statusMatch=filters.status==='Todos'||task.status===filters.status;const priorityMatch=filters.priority==='Todos'||task.priority===filters.priority;const labelMatch=filters.label==='Todos'||task.labels&&task.labels.includes(filters.label);return statusMatch&&priorityMatch&&labelMatch;}).sort((a,b)=>new Date(a.startDate)-new Date(b.startDate));},[tasks,filters]);if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-600\",children:\"Carregando...\"})});}if(!user){return/*#__PURE__*/_jsx(LoginScreen,{});}return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 text-gray-800 min-h-screen p-4 md:p-6 font-sans\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-full mx-auto\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"mb-6 no-export\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-cyan-600\",children:\"Norte Estrat\\xE9gico\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:\"Planeje, execute e apresente com clareza e foco.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-gray-700\",children:[/*#__PURE__*/_jsx(User,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:user.displayName||'Usuário'})]}),/*#__PURE__*/_jsx(Button,{onClick:handleLogout,variant:\"secondary\",className:\"!px-3 !py-2\",children:/*#__PURE__*/_jsx(LogOut,{size:16})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"inline-flex items-center bg-gray-200 rounded-lg p-1 space-x-1\",children:[/*#__PURE__*/_jsxs(Button,{onClick:()=>setView('tasks'),variant:view==='tasks'?'primary':'secondary',className:\"!shadow-none\",children:[/*#__PURE__*/_jsx(ListTodo,{size:16}),\" Atividades\"]}),/*#__PURE__*/_jsxs(Button,{onClick:()=>setView('workspace'),variant:view==='workspace'?'primary':'secondary',className:\"!shadow-none\",children:[/*#__PURE__*/_jsx(Layers,{size:16}),\" Roadmap\"]}),/*#__PURE__*/_jsxs(Button,{onClick:()=>setView('okr'),variant:view==='okr'?'primary':'secondary',className:\"!shadow-none\",children:[/*#__PURE__*/_jsx(Target,{size:16}),\" OKRs\"]}),/*#__PURE__*/_jsxs(Button,{onClick:()=>setView('executive'),variant:view==='executive'?'primary':'secondary',className:\"!shadow-none\",children:[/*#__PURE__*/_jsx(Briefcase,{size:16}),\" Painel Executivo\"]})]})})]}),/*#__PURE__*/_jsxs(\"main\",{children:[view==='tasks'&&/*#__PURE__*/_jsx(TasksView,{tasks:filteredTasks,onTaskClick:handleOpenTaskModal,filters:filters,setFilters:setFilters}),view==='workspace'&&/*#__PURE__*/_jsx(WorkspaceView,{tasks:filteredTasks,cycles:cycles,onTaskClick:handleOpenTaskModal,filters:filters,setFilters:setFilters,zoomLevel:zoomLevel,setZoomLevel:setZoomLevel,viewStartDate:viewStartDate,setViewStartDate:setViewStartDate,onOpenTaskModal:handleOpenTaskModal,onOpenCyclesModal:()=>setIsCyclesModalOpen(true)}),view==='okr'&&/*#__PURE__*/_jsx(OkrView,{okrs:okrs,tasks:tasks,onSave:handleSaveOkr,onDelete:requestDelete}),view==='executive'&&/*#__PURE__*/_jsx(ExecutiveView,{tasks:tasks,okrs:okrs,onSaveOkr:handleSaveOkr})]}),/*#__PURE__*/_jsx(TaskModal,{isOpen:isTaskModalOpen,onClose:()=>setIsTaskModalOpen(false),task:selectedTask,tasks:tasks,okrs:okrs,onSave:handleSaveTask,onDeleteRequest:requestDelete}),/*#__PURE__*/_jsx(CyclesModal,{isOpen:isCyclesModalOpen,onClose:()=>setIsCyclesModalOpen(false),cycles:cycles,onSave:handleSaveCycles,onDelete:handleDeleteCycle}),/*#__PURE__*/_jsx(ConfirmModal,{isOpen:isConfirmDeleteOpen,onClose:()=>setIsConfirmDeleteOpen(false),onConfirm:confirmDelete,title:\"Confirmar Exclus\\xE3o\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Tem certeza que deseja excluir este item? Esta a\\xE7\\xE3o n\\xE3o pode ser desfeita.\"})})]})});}","map":{"version":3,"names":["React","useState","useEffect","useMemo","useRef","initializeApp","getApps","getAuth","onAuthStateChanged","GoogleAuthProvider","signInWithPopup","signOut","createUserWithEmailAndPassword","signInWithEmailAndPassword","updateProfile","getFirestore","collection","onSnapshot","addDoc","updateDoc","deleteDoc","doc","query","serverTimestamp","Target","Layers","Briefcase","Edit","Plus","Trash2","X","Settings","Tag","Palette","TrendingUp","Download","Calendar","ListTodo","ZoomIn","ZoomOut","ChevronsUpDown","CheckCircle","MoreVertical","History","Check","Zap","ChevronDown","LayoutGrid","List","AlertTriangle","Clock","TrendingUpIcon","Lock","Unlock","Gauge","LogOut","User","LogIn","ArrowRight","Repeat","Presentation","domtoimage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","length","auth","db","exportViewAsImage","elementRef","fileName","options","arguments","undefined","backgroundColor","element","current","alert","filter","node","classList","contains","exportOptions","bgcolor","quality","cacheBust","skipFonts","dataUrl","toPng","link","document","createElement","href","download","body","appendChild","click","removeChild","error","console","concat","message","PRIORITIES","label","color","textColor","borderColor","STATUSES","TASK_COLORS","CYCLE_COLORS","formatDate","dateInput","includeTime","date","toDate","Date","day","month","year","timeZone","hour","minute","Intl","DateTimeFormat","format","parseLocalDate","dateString","getDaysInView","startDate","endDate","days","setUTCHours","end","push","setDate","getDate","calculateKrProgress","kr","start","Number","startValue","target","targetValue","currentValue","progress","Math","max","min","calculateOkrProgress","okr","keyResults","totalWeight","reduce","sum","weight","weightedProgressSum","round","calculatePacingInfo","targetDate","daysRemaining","requiredPace","status","today","setHours","ceil","getTime","monthsRemaining","remainingValue","toFixed","calculateOkrStatus","currentProgress","text","totalDuration","elapsedDuration","expectedProgress","difference","calculateTaskProgress","task","subtasks","completedSubtasks","s","completed","getTaskDurationInDays","duration","Card","_ref","children","className","props","_objectWithoutProperties","_excluded","_objectSpread","Button","_ref2","onClick","variant","disabled","baseClasses","variantClasses","primary","secondary","danger","ghost","type","Modal","_ref3","isOpen","onClose","title","size","sizeClasses","ConfirmModal","_ref4","onConfirm","CyclesModal","_ref5","cycles","onSave","onDelete","localCycles","setLocalCycles","map","c","localId","id","now","random","handleCycleChange","index","field","value","updatedCycles","addCycle","toISOString","split","name","removeCycle","cycleToRemove","handleSaveAll","cyclesToSave","trim","cycle","placeholder","onChange","e","TaskModal","_ref6","tasks","okrs","onDeleteRequest","getInitialFormState","_task$okrLink","_task$okrLink2","description","priority","labels","projectTag","blockerLog","customColor","okrLinkValue","okrLink","okrId","krId","formState","setFormState","newProject","setNewProject","isCreatingProject","setIsCreatingProject","expandedBlocker","setExpandedBlocker","displayProjectList","projects","Set","t","Boolean","has","add","Array","from","sort","allLabels","labelSet","forEach","handleChange","checked","prev","handleLabelsChange","l","handleLabelClick","currentLabels","newLabels","includes","handleProjectChange","handleNewProjectCreate","addBlocker","newLog","blockDate","blockReason","unblockDate","unblockReason","handleBlockerLogChange","logId","b","handleUnblock","isStillBlocked","some","handleSubtaskChange","newSubtasks","addSubtask","newSubtask","removeSubtask","_","i","handleColorChange","handleSave","restOfForm","_excluded2","taskToSave","humanId","sub","log","stopPropagation","Object","keys","p","join","objective","style","Timeline","_ref7","onTaskClick","zoomLevel","viewStartDate","timelineRef","isDragging","setIsDragging","startX","setStartX","scrollLeft","setScrollLeft","dayWidth","timelineWidth","headerGroups","subHeaderGroups","maxEndDate","allDates","item","validEndDates","isNaN","apply","defaultEndDate","timelineEndDate","primaryGroups","secondaryGroups","currentPrimaryGroup","currentSecondaryGroup","getFullYear","quarter","floor","getMonth","quarterKey","key","width","monthKey","isToday","toDateString","weekNumber","getDay","weekKey","subLabel","weekday","slice","onMouseDown","closest","pageX","offsetLeft","cursor","onMouseLeaveOrUp","onMouseMove","preventDefault","x","walk","groupedTasks","acc","group","collapsedGroups","setCollapsedGroups","toggleGroup","ref","onMouseLeave","onMouseUp","getUTCDay","cycleStart","cycleEnd","startOffset","left","opacity","isCollapsed","height","taskIndex","_task$blockerLog","_task$blockerLog2","_STATUSES$task$status","_STATUSES$task$status2","taskStart","taskEnd","top","FilterList","_ref8","active","onFilterChange","htmlFor","WorkspaceView","_ref9","filters","setFilters","setZoomLevel","setViewStartDate","onOpenTaskModal","onOpenCyclesModal","workspaceViewRef","labelOptions","useScrollWidth","z","val","ExecutiveView","_ref0","onSaveOkr","executiveViewRef","nextStepsPriority","setNextStepsPriority","overallRoadmapProgress","overallOkrProgress","projectStatusSummary","projectProgressSummary","okrsWithProgress","attentionPoints","nextSteps","roadmapMetrics","totalWeightedProgress","overallProgress","tag","statusSummary","projectTasks","statusCounts","counts","tasksCount","progressSummary","totalProgress","a","okrsDetails","totalOkrProgress","avgOkrProgress","attention","next","isOverdue","attentionLog","resolved","parentObjective","justification","handleResolveAttention","targetOkr","find","o","updatedKeyResults","updatedLog","getStatusColor","StatCard","_ref1","icon","colorClass","proj","OkrForm","_ref10","onCancel","setObjective","setKeyResults","setTargetDate","handleKrChange","newKrs","numericFields","parsedValue","parseFloat","addKr","updates","removeKr","handleFormSave","finalKrs","_kr$startValue","_kr$targetValue","_kr$weight","KrHistoryModal","_ref11","onDeleteUpdate","sortedUpdates","update","KrAttentionModal","_ref12","onSaveAttentionLog","setLog","newJustification","setNewJustification","handleAdd","newLogEntry","handleToggleResolve","handleDelete","KrItem","_ref13","okrStartDate","okrTargetDate","onUpdate","isUpdating","setIsUpdating","newValue","setNewValue","isHistoryOpen","setIsHistoryOpen","isAttentionOpen","setIsAttentionOpen","hasActiveAttention","pacingInfo","handleUpdate","autoFocus","OkrView","_ref14","okrViewRef","layout","setLayout","isFormOpen","setIsFormOpen","editingOkr","setEditingOkr","expandedOkrs","setExpandedOkrs","itemToDelete","setItemToDelete","isConfirmDeleteOpen","setIsConfirmDeleteOpen","expandedTasks","setExpandedTasks","toggleExpansion","toggleTasksExpansion","okrData","handleKrUpdate","newUpdate","toString","substr","newUpdates","handleSaveAttentionLog","handleDeleteUpdate","updateId","remainingUpdates","u","newCurrentValue","handleEdit","handleCancel","requestDeleteOkr","confirmDeleteOkr","isExpanded","okrStatus","relatedTasks","_task$okrLink3","areTasksExpanded","_STATUSES$task$status3","_PRIORITIES$task$prio","_PRIORITIES$task$prio2","LoginScreen","isLoginView","setIsLoginView","email","setEmail","password","setPassword","setName","setError","handleGoogleLogin","provider","code","handleEmailAuth","userCredential","user","displayName","onSubmit","required","viewBox","fill","d","TaskCard","_ref15","_PRIORITIES$task$prio3","_PRIORITIES$task$prio4","subtaskProgress","total","isBlocked","_task$blockerLog3","TasksView","_ref16","tasksViewRef","tasksByStatus","grouped","maxHeight","App","setUser","setTasks","setOkrs","setCycles","isLoading","setIsLoading","view","setView","isTaskModalOpen","setIsTaskModalOpen","isCyclesModalOpen","setIsCyclesModalOpen","selectedTask","setSelectedTask","unsubscribe","currentUser","userId","uid","tasksCollectionPath","okrsCollectionPath","cyclesCollectionPath","unsubscribeTasks","snapshot","docs","data","err","unsubscribeOkrs","unsubscribeCycles","handleSaveTask","taskData","collectionPath","dataForFirestore","docRef","createdAt","substring","toUpperCase","handleSaveOkr","dataToUpdate","_excluded3","dataToAdd","_excluded4","handleSaveCycles","_excluded5","handleDeleteCycle","cycleId","requestDelete","confirmDelete","handleOpenTaskModal","handleLogout","catch","filteredTasks","statusMatch","priorityMatch","labelMatch"],"sources":["/workspaces/general-control/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useMemo, useRef } from 'react';\nimport { initializeApp, getApps } from 'firebase/app';\nimport { getAuth, onAuthStateChanged, GoogleAuthProvider, signInWithPopup, signOut, createUserWithEmailAndPassword, signInWithEmailAndPassword, updateProfile } from 'firebase/auth';\nimport { getFirestore, collection, onSnapshot, addDoc, updateDoc, deleteDoc, doc, query, serverTimestamp } from 'firebase/firestore';\nimport { Target, Layers, Briefcase, Edit, Plus, Trash2, X, Settings, Tag, Palette, TrendingUp, Download, Calendar, ListTodo, ZoomIn, ZoomOut, ChevronsUpDown, CheckCircle, MoreVertical, History, Check, Zap, ChevronDown, LayoutGrid, List, AlertTriangle, Clock, TrendingUp as TrendingUpIcon, Lock, Unlock, Gauge, LogOut, User,LogIn, ArrowRight, Repeat, Presentation } from 'lucide-react';\nimport domtoimage from 'dom-to-image-more';\n\n// --- Configuração do Firebase ---\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCESjyYypWPaerOk9jGE2uvcjZlsuH_YrI\",\n  authDomain: \"general-control-fb57b.firebaseapp.com\",\n  projectId: \"general-control-fb57b\",\n  storageBucket: \"general-control-fb57b.appspot.com\",\n  messagingSenderId: \"939076716946\",\n  appId: \"1:939076716946:web:176240d8cb942b12df194b\"\n};\n\n// --- Inicialização Segura do Firebase ---\nlet app;\nif (!getApps().length) {\n  app = initializeApp(firebaseConfig);\n} else {\n  app = getApps()[0];\n}\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\n// --- FUNÇÃO DE EXPORTAÇÃO FINAL, USANDO A BIBLIOTECA LOCAL ---\nconst exportViewAsImage = async (elementRef, fileName, options = {}) => {\n    const { backgroundColor = '#f9fafb' } = options;\n    const element = elementRef.current;\n\n    if (!element) {\n        alert(\"Erro: Não foi possível encontrar a área para exportar.\");\n        return;\n    }\n\n    const filter = (node) => {\n        return !(node.classList && node.classList.contains('no-export'));\n    };\n\n    const exportOptions = {\n        filter: filter,\n        bgcolor: backgroundColor,\n        quality: 1.0,\n        // Mantemos estas opções para garantir a melhor qualidade e evitar erros\n        cacheBust: true,\n        skipFonts: true\n    };\n\n    try {\n        // Usando a variável 'domtoimage' que importamos diretamente no topo do arquivo\n        const dataUrl = await domtoimage.toPng(element, exportOptions);\n        \n        const link = document.createElement(\"a\");\n        link.href = dataUrl;\n        link.download = fileName;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n    } catch (error) {\n        console.error(\"Erro durante a exportação:\", error);\n        alert(`Ocorreu um erro inesperado durante a exportação: ${error.message}`);\n    }\n};\n\n// --- Constantes e Helpers ---\nconst PRIORITIES = {\n  'Alta': { label: 'Alta', color: 'bg-red-500', textColor: 'text-red-500', borderColor: 'border-red-500' },\n  'Média': { label: 'Média', color: 'bg-yellow-500', textColor: 'text-yellow-500', borderColor: 'border-yellow-500' },\n  'Baixa': { label: 'Baixa', color: 'bg-blue-500', textColor: 'text-blue-500', borderColor: 'border-blue-500' },\n};\nconst STATUSES = {\n  'A Fazer': { label: 'A Fazer', color: 'bg-gray-200 text-gray-800', borderColor: 'border-gray-400' },\n  'Em Progresso': { label: 'Em Progresso', color: 'bg-indigo-200 text-indigo-800', borderColor: 'border-indigo-400' },\n  'Concluído': { label: 'Concluído', color: 'bg-green-200 text-green-800', borderColor: 'border-green-500' },\n  'Bloqueado': { label: 'Bloqueado', color: 'bg-red-200 text-red-800', borderColor: 'border-red-500' },\n};\nconst TASK_COLORS = ['#f87171', '#fbbf24', '#34d399', '#60a5fa', '#c084fc', '#f472b6', '#a3a3a3'];\nconst CYCLE_COLORS = ['#fecaca', '#fed7aa', '#bbf7d0', '#bfdbfe', '#e9d5ff', '#fbcfe8'];\n\nconst formatDate = (dateInput, includeTime = false) => {\n  if (!dateInput) return '';\n  const date = dateInput.toDate ? dateInput.toDate() : new Date(dateInput);\n  const options = {\n    day: '2-digit',\n    month: '2-digit',\n    year: 'numeric',\n    timeZone: 'UTC'\n  };\n  if (includeTime) {\n    options.hour = '2-digit';\n    options.minute = '2-digit';\n  }\n  return new Intl.DateTimeFormat('pt-BR', options).format(date);\n};\n\nconst parseLocalDate = (dateString) => {\n    if (!dateString) return null;\n    return new Date(dateString + 'T00:00:00');\n}\n\nconst getDaysInView = (startDate, endDate) => {\n    if (!startDate || !endDate) return [];\n    const days = [];\n    let current = new Date(startDate);\n    current.setUTCHours(0,0,0,0);\n    const end = new Date(endDate);\n    end.setUTCHours(0,0,0,0);\n    while (current <= end) {\n        days.push(new Date(current));\n        current.setDate(current.getDate() + 1);\n    }\n    return days;\n};\n\n// --- Lógica de Cálculo de Progresso e Ritmo ---\nconst calculateKrProgress = (kr) => {\n    const start = Number(kr.startValue) || 0;\n    const target = Number(kr.targetValue) || 100;\n    const current = Number(kr.currentValue) || 0;\n    if (target === start) return current >= target ? 100 : 0;\n    const progress = ((current - start) / (target - start)) * 100;\n    return Math.max(0, Math.min(100, progress));\n};\n\nconst calculateOkrProgress = (okr) => {\n    if (!okr || !okr.keyResults || okr.keyResults.length === 0) return 0;\n    const keyResults = okr.keyResults;\n    const totalWeight = keyResults.reduce((sum, kr) => sum + (Number(kr.weight) || 1), 0);\n    if (totalWeight === 0) return 0;\n    const weightedProgressSum = keyResults.reduce((sum, kr) => {\n        const progress = calculateKrProgress(kr);\n        const weight = Number(kr.weight) || 1;\n        return sum + (progress * weight);\n    }, 0);\n    return Math.round(weightedProgressSum / totalWeight);\n};\n\nconst calculatePacingInfo = (startDate, targetDate, startValue, targetValue, currentValue) => {\n    if (!startDate || !targetDate) {\n        return { daysRemaining: null, requiredPace: null, status: 'no-date' };\n    }\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    const target = parseLocalDate(targetDate);\n    \n    const progress = calculateKrProgress({ startValue, targetValue, currentValue });\n    if (progress >= 100) {\n        return { daysRemaining: null, requiredPace: null, status: 'completed' };\n    }\n    \n    if (target < today) {\n        return { daysRemaining: 0, requiredPace: null, status: 'overdue' };\n    }\n\n    const daysRemaining = Math.ceil((target.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\n    const monthsRemaining = Math.max(1, (target.getTime() - today.getTime()) / (1000 * 60 * 60 * 24 * 30.44)); \n    const remainingValue = (Number(targetValue) || 0) - (Number(currentValue) || 0);\n    \n    if (remainingValue <= 0) {\n         return { daysRemaining, requiredPace: 0, status: 'completed' };\n    }\n\n    const requiredPace = (remainingValue / monthsRemaining);\n    return { daysRemaining, requiredPace: requiredPace.toFixed(1), status: 'on-track' };\n};\n\nconst calculateOkrStatus = (startDate, targetDate, currentProgress) => {\n    if (!startDate || !targetDate) return { status: 'no-date', text: 'Sem data alvo', color: 'bg-gray-400' };\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    const start = parseLocalDate(startDate);\n    const target = parseLocalDate(targetDate);\n\n    if (currentProgress >= 100) return { status: 'completed', text: 'Concluído', color: 'bg-green-500' };\n    if (target < today) return { status: 'overdue', text: 'Atrasado', color: 'bg-red-500' };\n    if (today < start) return { status: 'not-started', text: 'Não iniciado', color: 'bg-gray-400' };\n    \n    const totalDuration = target.getTime() - start.getTime();\n    if (totalDuration <= 0) return { status: 'completed', text: 'Concluído', color: 'bg-green-500' };\n\n    const elapsedDuration = today.getTime() - start.getTime();\n    const expectedProgress = Math.round((elapsedDuration / totalDuration) * 100);\n\n    const difference = currentProgress - expectedProgress;\n\n    if (difference < -15) return { status: 'behind', text: 'Em Risco', color: 'bg-yellow-500' };\n    if (difference > 15) return { status: 'ahead', text: 'Adiantado', color: 'bg-sky-500' };\n    return { status: 'on-track', text: 'No Ritmo', color: 'bg-green-500' };\n};\n\nconst calculateTaskProgress = (task) => {\n    if (task.status === 'Concluído') return 100;\n    if (!task.subtasks || task.subtasks.length === 0) {\n        return task.status === 'Em Progresso' ? 50 : 0;\n    }\n    const completedSubtasks = task.subtasks.filter(s => s.completed).length;\n    return Math.round((completedSubtasks / task.subtasks.length) * 100);\n};\n\nconst getTaskDurationInDays = (task) => {\n    if (!task.startDate || !task.endDate) return 1;\n    const start = parseLocalDate(task.startDate);\n    const end = parseLocalDate(task.endDate);\n    const duration = (end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24);\n    return Math.max(1, duration + 1);\n};\n\n// --- Componentes da UI ---\nconst Card = ({ children, className = '', ...props }) => (\n    <div className={`bg-white border border-gray-200 rounded-xl p-6 shadow-sm ${className}`} {...props}>\n        {children}\n    </div>\n);\n\nconst Button = ({ onClick, children, className = '', variant = 'primary', disabled = false }) => {\n    const baseClasses = 'px-4 py-2 rounded-lg font-semibold transition-all duration-300 flex items-center justify-center space-x-2 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed';\n    const variantClasses = {\n        primary: 'bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500',\n        secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400',\n        danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',\n        ghost: 'bg-transparent text-gray-600 hover:bg-gray-100 focus:ring-gray-400'\n    };\n    return (\n        <button type=\"button\" onClick={onClick} className={`${baseClasses} ${variantClasses[variant]} ${className}`} disabled={disabled}>\n            {children}\n        </button>\n    );\n};\n\nconst Modal = ({ isOpen, onClose, title, children, size = '2xl' }) => {\n    if (!isOpen) return null;\n    const sizeClasses = { 'md': 'max-w-md', '2xl': 'max-w-2xl', '4xl': 'max-w-4xl' };\n    return (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4\">\n            <div className={`bg-white rounded-xl shadow-2xl w-full ${sizeClasses[size]} max-h-[90vh] flex flex-col`}>\n                <header className=\"flex justify-between items-center p-4 border-b border-gray-200\">\n                    <h2 className=\"text-xl font-bold text-gray-800\">{title}</h2>\n                    <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600\"><X size={24} /></button>\n                </header>\n                <main className=\"p-6 overflow-y-auto\">{children}</main>\n            </div>\n        </div>\n    );\n};\n\nconst ConfirmModal = ({ isOpen, onClose, onConfirm, title, children }) => {\n    if (!isOpen) return null;\n    return (\n        <Modal isOpen={isOpen} onClose={onClose} title={title} size=\"md\">\n            <div className=\"text-gray-600\">{children}</div>\n            <footer className=\"flex justify-end space-x-4 pt-4 mt-4 border-t\">\n                <Button onClick={onClose} variant=\"secondary\">Cancelar</Button>\n                <Button onClick={onConfirm} variant=\"danger\">Confirmar</Button>\n            </footer>\n        </Modal>\n    );\n};\n\nconst CyclesModal = ({ isOpen, onClose, cycles, onSave, onDelete }) => {\n    const [localCycles, setLocalCycles] = useState([]);\n\n    useEffect(() => {\n        if (isOpen) {\n            setLocalCycles(cycles.map(c => ({...c, localId: c.id || `new_${Date.now()}_${Math.random()}`})));\n        }\n    }, [isOpen, cycles]);\n\n    const handleCycleChange = (index, field, value) => {\n        const updatedCycles = [...localCycles];\n        updatedCycles[index][field] = value;\n        setLocalCycles(updatedCycles);\n    };\n\n    const addCycle = () => {\n        const today = new Date().toISOString().split('T')[0];\n        setLocalCycles([...localCycles, {\n            localId: `new_${Date.now()}_${Math.random()}`,\n            name: '',\n            startDate: today,\n            endDate: today,\n            color: CYCLE_COLORS[localCycles.length % CYCLE_COLORS.length]\n        }]);\n    };\n\n    const removeCycle = (cycleToRemove) => {\n        if (cycleToRemove.id) {\n            onDelete(cycleToRemove.id);\n        }\n        setLocalCycles(localCycles.filter(c => c.localId !== cycleToRemove.localId));\n    };\n\n    const handleSaveAll = () => {\n        const cyclesToSave = localCycles.filter(c => c.name.trim() !== '');\n        onSave(cyclesToSave);\n        onClose();\n    };\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose} title=\"Gerenciar Ciclos de Trabalho\" size=\"2xl\">\n            <div className=\"space-y-4\">\n                <p className=\"text-gray-600\">Crie e gerencie os ciclos (Sprints, PIs, Trimestres) que aparecerão como fundo no seu Roadmap.</p>\n                <div className=\"space-y-3 max-h-96 overflow-y-auto pr-2\">\n                    {localCycles.map((cycle, index) => (\n                        <div key={cycle.localId} className=\"p-4 bg-gray-50 rounded-lg border flex flex-col md:flex-row gap-4 items-center\">\n                            <input\n                                type=\"text\"\n                                placeholder=\"Nome do Ciclo (Ex: Sprint 1)\"\n                                value={cycle.name}\n                                onChange={(e) => handleCycleChange(index, 'name', e.target.value)}\n                                className=\"w-full p-2 border rounded-md\"\n                            />\n                            <input\n                                type=\"date\"\n                                value={cycle.startDate}\n                                onChange={(e) => handleCycleChange(index, 'startDate', e.target.value)}\n                                className=\"p-2 border rounded-md\"\n                            />\n                            <input\n                                type=\"date\"\n                                value={cycle.endDate}\n                                onChange={(e) => handleCycleChange(index, 'endDate', e.target.value)}\n                                className=\"p-2 border rounded-md\"\n                            />\n                            <input\n                                type=\"color\"\n                                value={cycle.color}\n                                onChange={(e) => handleCycleChange(index, 'color', e.target.value)}\n                                className=\"p-1 h-10 w-12 border rounded-md cursor-pointer\"\n                            />\n                            <Button onClick={() => removeCycle(cycle)} variant=\"ghost\" className=\"text-red-500\"><Trash2 size={16} /></Button>\n                        </div>\n                    ))}\n                </div>\n                <Button onClick={addCycle} variant=\"secondary\"><Plus size={16} /> Adicionar Ciclo</Button>\n            </div>\n            <footer className=\"flex justify-end space-x-4 pt-4 mt-4 border-t\">\n                <Button onClick={onClose} variant=\"secondary\">Cancelar</Button>\n                <Button onClick={handleSaveAll} variant=\"primary\">Salvar Ciclos</Button>\n            </footer>\n        </Modal>\n    );\n};\n\n// CORREÇÃO APLICADA AQUI: Hooks movidos para dentro do componente\nconst TaskModal = ({ isOpen, onClose, task, tasks, okrs, onSave, onDeleteRequest }) => {\n    \n    const getInitialFormState = () => {\n        const today = new Date().toISOString().split('T')[0];\n        if (task) {\n            return {\n                title: task.title || '',\n                description: task.description || '',\n                priority: task.priority || 'Média',\n                status: task.status || 'A Fazer',\n                startDate: task.startDate || today,\n                endDate: task.endDate || today,\n                labels: task.labels || [],\n                projectTag: task.projectTag || '',\n                blockerLog: task.blockerLog || [],\n                subtasks: task.subtasks || [],\n                customColor: task.customColor || '',\n                okrLinkValue: `${task.okrLink?.okrId || ''}|${task.okrLink?.krId || ''}`\n            };\n        }\n        return {\n            title: '', description: '', priority: 'Média', status: 'A Fazer',\n            startDate: today, endDate: today, labels: [], projectTag: '',\n            blockerLog: [], subtasks: [], customColor: '', okrLinkValue: '|'\n        };\n    };\n\n    const [formState, setFormState] = useState(getInitialFormState);\n    const [newProject, setNewProject] = useState('');\n    const [isCreatingProject, setIsCreatingProject] = useState(false);\n    const [expandedBlocker, setExpandedBlocker] = useState(null);\n\n    useEffect(() => {\n        if (isOpen) {\n            setFormState(getInitialFormState());\n        }\n    }, [task, isOpen]);\n\n    const displayProjectList = useMemo(() => {\n        const projects = new Set(tasks.map(t => t.projectTag).filter(Boolean));\n        if (formState.projectTag && !projects.has(formState.projectTag)) {\n            projects.add(formState.projectTag);\n        }\n        return Array.from(projects).sort();\n    }, [tasks, formState.projectTag]);\n\n    const allLabels = useMemo(() => {\n        const labelSet = new Set();\n        tasks.forEach(t => (t.labels || []).forEach(label => labelSet.add(label)));\n        return Array.from(labelSet).sort();\n    }, [tasks]);\n\n    const handleChange = (e) => {\n        const { name, value, type, checked } = e.target;\n        setFormState(prev => ({ ...prev, [name]: type === 'checkbox' ? checked : value }));\n    };\n    \n    const handleLabelsChange = (e) => {\n        const labels = e.target.value.split(',').map(l => l.trim()).filter(Boolean);\n        setFormState(prev => ({ ...prev, labels }));\n    };\n    \n    const handleLabelClick = (label) => {\n        const currentLabels = formState.labels || [];\n        const newLabels = currentLabels.includes(label)\n            ? currentLabels.filter(l => l !== label)\n            : [...currentLabels, label];\n        setFormState(prev => ({ ...prev, labels: newLabels }));\n    };\n\n    const handleProjectChange = (e) => {\n        const { value } = e.target;\n        if (value === '_new_') {\n            setIsCreatingProject(true);\n            setFormState(prev => ({ ...prev, projectTag: '' }));\n        } else {\n            setIsCreatingProject(false);\n            setNewProject('');\n            setFormState(prev => ({ ...prev, projectTag: value }));\n        }\n    };\n\n    const handleNewProjectCreate = () => {\n        if (newProject.trim()) {\n            setFormState(prev => ({ ...prev, projectTag: newProject.trim() }));\n            setIsCreatingProject(false);\n            setNewProject('');\n        }\n    };\n    \n    const addBlocker = () => {\n        const newLog = [...(formState.blockerLog || []), {\n            id: `block_${Date.now()}`,\n            blockDate: new Date().toISOString().split('T')[0],\n            blockReason: '',\n            unblockDate: null,\n            unblockReason: ''\n        }];\n        setFormState(prev => ({ ...prev, blockerLog: newLog, status: 'Bloqueado' }));\n    };\n    \n    const handleBlockerLogChange = (logId, field, value) => {\n        const newLog = (formState.blockerLog || []).map(b => \n            b.id === logId ? { ...b, [field]: value } : b\n        );\n        setFormState(prev => ({ ...prev, blockerLog: newLog }));\n    };\n    \n    const handleUnblock = (logId) => {\n        const newLog = (formState.blockerLog || []).map(b => \n            b.id === logId ? { ...b, unblockDate: new Date().toISOString().split('T')[0] } : b\n        );\n        const isStillBlocked = newLog.some(b => !b.unblockDate);\n        setFormState(prev => ({ ...prev, blockerLog: newLog, status: isStillBlocked ? 'Bloqueado' : 'A Fazer' }));\n    };\n    \n    const handleSubtaskChange = (index, field, value) => {\n        const newSubtasks = [...(formState.subtasks || [])];\n        newSubtasks[index] = { ...newSubtasks[index], [field]: value };\n        setFormState(prev => ({ ...prev, subtasks: newSubtasks }));\n    };\n\n    const addSubtask = () => {\n        const newSubtask = { id: `sub_${Date.now()}`, text: '', completed: false, targetDate: '' };\n        setFormState(prev => ({ ...prev, subtasks: [...(prev.subtasks || []), newSubtask] }));\n    };\n\n    const removeSubtask = (index) => {\n        const newSubtasks = (formState.subtasks || []).filter((_, i) => i !== index);\n        setFormState(prev => ({ ...prev, subtasks: newSubtasks }));\n    };\n    \n    const handleColorChange = (color) => {\n        setFormState(prev => ({...prev, customColor: color}));\n    };\n\n    const handleSave = () => {\n        const { okrLinkValue, ...restOfForm } = formState;\n        const [okrId, krId] = (okrLinkValue || '|').split('|');\n        \n        const taskToSave = {\n            id: task?.id,\n            ...restOfForm,\n            okrLink: { okrId: okrId || '', krId: krId || '' }\n        };\n        onSave(taskToSave);\n        onClose();\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose} title={task?.humanId ? `Editar Tarefa [${task.humanId}]` : \"Nova Tarefa\"} size=\"4xl\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n                <div className=\"md:col-span-2 space-y-6\">\n                    <input type=\"text\" name=\"title\" value={formState.title} onChange={handleChange} placeholder=\"Título da Tarefa\" className=\"w-full p-2 bg-transparent text-2xl font-bold border-b-2 border-gray-200 focus:border-indigo-500 focus:outline-none\" />\n                    <textarea name=\"description\" value={formState.description} onChange={handleChange} placeholder=\"Adicione uma descrição...\" className=\"w-full p-2 bg-gray-50 rounded-md h-32 border border-gray-200 focus:border-indigo-500 focus:outline-none\"></textarea>\n                    \n                    <div>\n                        <h3 className=\"font-semibold mb-2\">Subtarefas</h3>\n                        <div className=\"space-y-2 max-h-48 overflow-y-auto pr-2\">\n                             {(formState.subtasks || []).map((sub, index) => (\n                                <div key={sub.id} className=\"flex items-center gap-3 p-2 bg-gray-50 rounded-md\">\n                                    <input type=\"checkbox\" checked={sub.completed} onChange={(e) => handleSubtaskChange(index, 'completed', e.target.checked)} className=\"h-5 w-5 rounded text-indigo-600\" />\n                                    <input type=\"text\" value={sub.text} onChange={(e) => handleSubtaskChange(index, 'text', e.target.value)} className={`flex-grow p-1 bg-transparent border-b ${sub.completed ? 'line-through text-gray-500' : ''}`} placeholder=\"Descrição da subtarefa\"/>\n                                    <input type=\"date\" value={sub.targetDate || ''} onChange={(e) => handleSubtaskChange(index, 'targetDate', e.target.value)} className=\"p-1 text-sm border rounded-md\" />\n                                    <button onClick={() => removeSubtask(index)}><Trash2 size={16} className=\"text-red-400 hover:text-red-600\" /></button>\n                                </div>\n                            ))}\n                        </div>\n                         <Button onClick={addSubtask} variant=\"secondary\" className=\"mt-2 text-sm\">Adicionar Subtarefa</Button>\n                    </div>\n                    \n                    <div>\n                        <h3 className=\"font-semibold mb-2\">Histórico de Bloqueios</h3>\n                        <div className=\"space-y-2 max-h-48 overflow-y-auto pr-2\">\n                            {(formState.blockerLog || []).map(log => (\n                                <div key={log.id} className=\"p-3 bg-gray-50 rounded-md border border-gray-200\" >\n                                    <div className=\"flex justify-between items-center cursor-pointer\" onClick={() => setExpandedBlocker(expandedBlocker === log.id ? null : log.id)}>\n                                        <p className={`font-semibold ${log.unblockDate ? 'text-green-600' : 'text-red-600'}`}>{log.unblockDate ? 'Desbloqueado' : 'Bloqueado'} em {formatDate(log.blockDate, false)}</p>\n                                        <ChevronDown size={16} className={`transition-transform ${expandedBlocker === log.id ? 'rotate-180' : ''}`} />\n                                    </div>\n                                    {expandedBlocker === log.id && (\n                                        <div className=\"mt-2 space-y-2\" onClick={(e) => e.stopPropagation()}>\n                                            <div>\n                                                <label className=\"text-xs font-medium text-gray-500\">Motivo do Bloqueio</label>\n                                                <textarea value={log.blockReason} onChange={e => handleBlockerLogChange(log.id, 'blockReason', e.target.value)} className=\"w-full p-1 border rounded-md text-sm h-16\"></textarea>\n                                            </div>\n                                            {!log.unblockDate ? (\n                                                <Button onClick={() => handleUnblock(log.id)} variant=\"secondary\" className=\"!text-xs !py-1 w-full\">Registrar Desbloqueio</Button>\n                                            ) : (\n                                                <div>\n                                                     <label className=\"text-xs font-medium text-gray-500\">Data do Desbloqueio: {formatDate(log.unblockDate, false)}</label>\n                                                </div>\n                                            )}\n                                        </div>\n                                    )}\n                                </div>\n                            ))}\n                        </div>\n                        <Button onClick={addBlocker} variant=\"secondary\" className=\"mt-2 text-sm\">Adicionar Bloqueio</Button>\n                    </div>\n                </div>\n                <div className=\"md:col-span-1 space-y-4 bg-gray-50 p-4 rounded-lg\">\n                    <div className=\"space-y-1\">\n                        <label className=\"block text-sm font-medium text-gray-600\">Status</label>\n                        <select name=\"status\" value={formState.status} onChange={handleChange} disabled={(formState.blockerLog || []).some(b => !b.unblockDate)} className=\"w-full p-2 border border-gray-300 rounded-md\">\n                            {Object.keys(STATUSES).map(s => <option key={s} value={s}>{STATUSES[s].label}</option>)}\n                        </select>\n                    </div>\n                     <div className=\"space-y-1\">\n                        <label className=\"block text-sm font-medium text-gray-600\">Datas</label>\n                        <div className=\"space-y-2\">\n                            <input type=\"date\" name=\"startDate\" value={formState.startDate} onChange={handleChange} className=\"w-full p-2 border border-gray-300 rounded-md\" />\n                            <input type=\"date\" name=\"endDate\" value={formState.endDate} onChange={handleChange} className=\"w-full p-2 border border-gray-300 rounded-md\" />\n                        </div>\n                    </div>\n                    <div className=\"space-y-1\">\n                        <label className=\"block text-sm font-medium text-gray-600\">Prioridade</label>\n                        <select name=\"priority\" value={formState.priority} onChange={handleChange} className=\"w-full p-2 border border-gray-300 rounded-md\">\n                            {Object.keys(PRIORITIES).map(p => <option key={p} value={p}>{PRIORITIES[p].label}</option>)}\n                        </select>\n                    </div>\n                     <div className=\"space-y-1\">\n                        <label className=\"block text-sm font-medium text-gray-600\">Projeto</label>\n                        {!isCreatingProject ? (\n                            <select name=\"projectTag\" value={formState.projectTag} onChange={handleProjectChange} className=\"w-full p-2 border border-gray-300 rounded-md\">\n                                <option value=\"\">Nenhum</option>\n                                {displayProjectList.map(p => <option key={p} value={p}>{p}</option>)}\n                                <option value=\"_new_\">-- Criar Novo Projeto --</option>\n                            </select>\n                        ) : (\n                            <div className=\"flex gap-2\">\n                                <input type=\"text\" value={newProject} onChange={e => setNewProject(e.target.value)} placeholder=\"Nome do novo projeto\" className=\"w-full p-2 border border-gray-300 rounded-md\" />\n                                <Button onClick={handleNewProjectCreate}><Check size={16} /></Button>\n                            </div>\n                        )}\n                    </div>\n                     <div className=\"space-y-1\">\n                        <label className=\"block text-sm font-medium text-gray-600\">Etiquetas</label>\n                        <input type=\"text\" value={(formState.labels || []).join(', ')} onChange={handleLabelsChange} className=\"w-full p-2 border border-gray-300 rounded-md\" placeholder=\"Ex: UX, Backend, Marketing\" />\n                        <div className=\"flex flex-wrap gap-2 mt-2\">\n                            {allLabels.map(label => (\n                                <button key={label} onClick={() => handleLabelClick(label)} className={`px-2 py-1 text-xs rounded-full ${ (formState.labels || []).includes(label) ? 'bg-indigo-600 text-white' : 'bg-gray-200'}`}>{label}</button>\n                            ))}\n                        </div>\n                    </div>\n                     <div className=\"space-y-1\">\n                        <label className=\"block text-sm font-medium text-gray-600\">Vincular ao OKR</label>\n                        <select name=\"okrLinkValue\" value={formState.okrLinkValue} onChange={handleChange} className=\"w-full p-2 border border-gray-300 rounded-md\">\n                            <option value=\"|\">Nenhum</option>\n                            {okrs.map(okr => (\n                                <optgroup key={okr.id} label={okr.objective}>\n                                    <option key={`${okr.id}_general`} value={`${okr.id}|`}>-- Objetivo Geral --</option>\n                                    {(okr.keyResults || []).map(kr => <option key={`${okr.id}|${kr.id}`} value={`${okr.id}|${kr.id}`}>{kr.text}</option>)}\n                                </optgroup>\n                            ))}\n                        </select>\n                    </div>\n                    <div className=\"space-y-1\">\n                        <label className=\"block text-sm font-medium text-gray-600\">Cor</label>\n                        <div className=\"flex gap-2\">\n                             {TASK_COLORS.map(color => (\n                                <button key={color} onClick={() => handleColorChange(color)} className=\"w-6 h-6 rounded-full transition-transform hover:scale-110\" style={{backgroundColor: color}}>\n                                    {formState.customColor === color && <Check size={16} className=\"text-white m-auto\"/>}\n                                </button>\n                            ))}\n                        </div>\n                    </div>\n                </div>\n                <div className=\"md:col-span-3 flex justify-between items-center pt-6 border-t\">\n                    <div>{task && <Button onClick={() => onDeleteRequest(task.id, 'task')} variant=\"danger\"><Trash2 size={16} /> Excluir</Button>}</div>\n                    <div className=\"flex gap-4\">\n                        <Button onClick={onClose} variant=\"secondary\">Cancelar</Button>\n                        <Button onClick={handleSave}>Salvar Tarefa</Button>\n                    </div>\n                </div>\n            </div>\n        </Modal>\n    );\n};\n\n// --- COMPONENTE TIMELINE ---\nconst Timeline = ({ tasks, cycles, onTaskClick, zoomLevel, viewStartDate }) => {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    const timelineRef = useRef(null);\n    const [isDragging, setIsDragging] = useState(false);\n    const [startX, setStartX] = useState(0);\n    const [scrollLeft, setScrollLeft] = useState(0);\n    \n    const dayWidth = useMemo(() => 8 + (zoomLevel * 2.5), [zoomLevel]);\n    \n    const { days, timelineWidth, headerGroups, subHeaderGroups } = useMemo(() => {\n        let maxEndDate = null;\n        const allDates = [...tasks, ...cycles].map(item => parseLocalDate(item.endDate));\n        if (allDates.length > 0) {\n            const validEndDates = allDates.filter(date => date && !isNaN(date.getTime()));\n            if (validEndDates.length > 0) {\n                maxEndDate = new Date(Math.max.apply(null, validEndDates));\n            }\n        }\n\n        const defaultEndDate = new Date(viewStartDate);\n        defaultEndDate.setDate(defaultEndDate.getDate() + 90);\n\n        let timelineEndDate = defaultEndDate;\n        if (maxEndDate && maxEndDate > defaultEndDate) {\n            timelineEndDate = new Date(maxEndDate);\n        }\n        \n        timelineEndDate.setDate(timelineEndDate.getDate() + 30);\n\n        const days = getDaysInView(viewStartDate, timelineEndDate);\n        const timelineWidth = days.length * dayWidth;\n        \n        const primaryGroups = [];\n        const secondaryGroups = [];\n        \n        if (days.length > 0) {\n            let currentPrimaryGroup = null;\n            let currentSecondaryGroup = null;\n\n            if (zoomLevel <= 3) {\n                days.forEach(day => {\n                    const year = day.getFullYear();\n                    const quarter = Math.floor(day.getMonth() / 3) + 1;\n                    const quarterKey = `${year}-Q${quarter}`;\n                    if (!currentPrimaryGroup || currentPrimaryGroup.key !== quarterKey) {\n                        currentPrimaryGroup = { key: quarterKey, label: `T${quarter} ${year}`, width: 0 };\n                        primaryGroups.push(currentPrimaryGroup);\n                    }\n                    currentPrimaryGroup.width += dayWidth;\n                    const monthKey = `${year}-${day.getMonth()}`;\n                    if(!currentSecondaryGroup || currentSecondaryGroup.key !== monthKey) {\n                        currentSecondaryGroup = { key: monthKey, label: new Intl.DateTimeFormat('pt-BR', { month: 'long', timeZone: 'UTC' }).format(day), width: 0 };\n                        secondaryGroups.push(currentSecondaryGroup);\n                    }\n                    currentSecondaryGroup.width += dayWidth;\n                });\n            } \n            else if (zoomLevel <= 7) {\n                days.forEach(day => {\n                    const monthKey = `${day.getFullYear()}-${day.getMonth()}`;\n                    if (!currentPrimaryGroup || currentPrimaryGroup.key !== monthKey) {\n                        currentPrimaryGroup = { key: monthKey, label: new Intl.DateTimeFormat('pt-BR', { month: 'long', year: 'numeric', timeZone: 'UTC' }).format(day), width: 0 };\n                        primaryGroups.push(currentPrimaryGroup);\n                    }\n                    currentPrimaryGroup.width += dayWidth;\n                    secondaryGroups.push({ key: day.toISOString(), label: day.getDate(), width: dayWidth, isToday: day.toDateString() === today.toDateString() });\n                });\n            }\n            else {\n                 days.forEach(day => {\n                    const weekNumber = Math.ceil((((day - new Date(day.getFullYear(), 0, 1)) / 86400000) + new Date(day.getFullYear(), 0, 1).getDay() + 1) / 7);\n                    const weekKey = `${day.getFullYear()}-W${weekNumber}`;\n                     if (!currentPrimaryGroup || currentPrimaryGroup.key !== weekKey) {\n                        currentPrimaryGroup = { key: weekKey, label: `Semana ${weekNumber}`, width: 0 };\n                        primaryGroups.push(currentPrimaryGroup);\n                     }\n                     currentPrimaryGroup.width += dayWidth;\n                    secondaryGroups.push({ key: day.toISOString(), label: day.getDate(), subLabel: new Intl.DateTimeFormat('pt-BR', { weekday: 'short', timeZone: 'UTC' }).format(day).slice(0, 3), width: dayWidth, isToday: day.toDateString() === today.toDateString() });\n                });\n            }\n        }\n        \n        return { days, timelineWidth, headerGroups: primaryGroups, subHeaderGroups: secondaryGroups };\n    }, [viewStartDate, zoomLevel, tasks, cycles]);\n\n    const onMouseDown = (e) => {\n        if (!timelineRef.current || e.target.closest('.task-bar')) return;\n        setIsDragging(true);\n        setStartX(e.pageX - timelineRef.current.offsetLeft);\n        setScrollLeft(timelineRef.current.scrollLeft);\n        timelineRef.current.style.cursor = 'grabbing';\n    };\n\n    const onMouseLeaveOrUp = () => {\n        if (!timelineRef.current) return;\n        setIsDragging(false);\n        timelineRef.current.style.cursor = 'grab';\n    };\n\n    const onMouseMove = (e) => {\n        if (!isDragging || !timelineRef.current) return;\n        e.preventDefault();\n        const x = e.pageX - timelineRef.current.offsetLeft;\n        const walk = (x - startX);\n        timelineRef.current.scrollLeft = scrollLeft - walk;\n    };\n\n    const groupedTasks = useMemo(() => {\n        return tasks.reduce((acc, task) => {\n            const group = task.projectTag || 'Sem Projeto';\n            if (!acc[group]) acc[group] = [];\n            acc[group].push(task);\n            return acc;\n        }, {});\n    }, [tasks]);\n\n    const [collapsedGroups, setCollapsedGroups] = useState({});\n    const toggleGroup = (group) => setCollapsedGroups(prev => ({ ...prev, [group]: !prev[group] }));\n\n    return (\n        <div className=\"relative bg-white border border-gray-200 rounded-lg shadow-sm\">\n            <div className=\"overflow-x-auto cursor-grab\" ref={timelineRef} onMouseDown={onMouseDown} onMouseLeave={onMouseLeaveOrUp} onMouseUp={onMouseLeaveOrUp} onMouseMove={onMouseMove}>\n                <div style={{ width: timelineWidth }} className=\"relative\">\n                    <div className=\"sticky top-0 z-30 bg-gray-100/80 backdrop-blur-sm h-16\">\n                        <div className=\"flex border-b border-gray-300 h-8\">\n                             {headerGroups.map((group) => (<div key={group.key} className=\"flex-shrink-0 text-center font-bold text-gray-700 border-r border-gray-300 flex items-center justify-center\" style={{ width: group.width }}><span className=\"whitespace-nowrap px-2\">{group.label}</span></div>))}\n                        </div>\n                        <div className=\"flex border-b-2 border-gray-300 h-8\">\n                             {subHeaderGroups.map((group) => (<div key={group.key} className={`flex-shrink-0 text-center font-semibold border-r border-gray-200 flex flex-col justify-center items-center ${group.isToday ? 'bg-indigo-100' : ''}`} style={{ width: group.width }}><span className={`text-xs ${group.isToday ? 'text-indigo-600' : 'text-gray-500'}`}>{group.subLabel}</span><span className={`whitespace-nowrap text-sm ${group.isToday ? 'text-indigo-600 font-bold' : 'text-gray-600'}`}>{group.label}</span></div>))}\n                        </div>\n                    </div>\n\n                    <div className=\"relative\">\n                        <div className=\"absolute top-0 left-0 w-full h-full z-0\">\n                            <div className=\"flex h-full\">{days.map((day, index) => (<div key={index} className={`h-full border-r ${day.getUTCDay() === 0 || day.getUTCDay() === 6 ? 'bg-gray-50/50' : 'border-gray-100'}`} style={{ width: dayWidth }}></div>))}</div>\n                            {cycles.map(cycle => {\n                                const cycleStart = parseLocalDate(cycle.startDate);\n                                const cycleEnd = parseLocalDate(cycle.endDate);\n                                if (!cycleStart || !cycleEnd || cycleEnd < viewStartDate || cycleStart > new Date(viewStartDate).setDate(viewStartDate.getDate() + days.length)) return null;\n                                const startOffset = Math.round((cycleStart.getTime() - viewStartDate.getTime()) / (1000 * 60 * 60 * 24));\n                                const duration = Math.max(1, ((cycleEnd.getTime() - cycleStart.getTime()) / (1000 * 60 * 60 * 24)) + 1);\n                                return (\n                                    <div key={cycle.id} className=\"absolute top-0 bottom-0\" style={{ left: `${startOffset * dayWidth}px`, width: `${duration * dayWidth}px` }}>\n                                        <div className=\"h-full w-full border-x\" style={{ backgroundColor: cycle.color, opacity: 0.15, borderColor: cycle.color }}></div>\n                                    </div>\n                                )\n                            })}\n                        </div>\n                        \n                        <div className=\"relative z-10 h-8 border-b border-gray-200\">\n                             {cycles.map(cycle => {\n                                 const cycleStart = parseLocalDate(cycle.startDate);\n                                 const cycleEnd = parseLocalDate(cycle.endDate);\n                                 if (!cycleStart || !cycleEnd || cycleEnd < viewStartDate || cycleStart > new Date(viewStartDate).setDate(viewStartDate.getDate() + days.length)) return null;\n                                 const startOffset = Math.round((cycleStart.getTime() - viewStartDate.getTime()) / (1000 * 60 * 60 * 24));\n                                 const duration = Math.max(1, ((cycleEnd.getTime() - cycleStart.getTime()) / (1000 * 60 * 60 * 24)) + 1);\n                                 return (\n                                     <div key={cycle.id} className=\"absolute top-0 flex items-center h-full\" style={{ left: `${startOffset * dayWidth}px`, width: `${duration * dayWidth}px` }}>\n                                         <div className=\"w-full font-bold text-center text-sm text-gray-700 p-1 truncate\">\n                                             {cycle.name}\n                                         </div>\n                                     </div>\n                                 )\n                             })}\n                        </div>\n\n                        <div className=\"relative z-20\">\n                            {Object.keys(groupedTasks).sort().map((group) => {\n                                const isCollapsed = collapsedGroups[group];\n                                return (\n                                    <div key={group}>\n                                        <div className=\"sticky top-[96px] z-20 flex items-center h-10 bg-white/80 backdrop-blur-sm border-b border-t border-gray-200 -ml-px\" onClick={() => toggleGroup(group)}>\n                                            <div className=\"flex items-center gap-2 p-2 cursor-pointer\"><ChevronsUpDown size={16} className={`transition-transform ${isCollapsed ? '-rotate-90' : ''}`} /><h3 className=\"font-bold text-gray-800\">{group}</h3></div>\n                                        </div>\n                                        {!isCollapsed && (\n                                            <div className=\"relative\" style={{ height: groupedTasks[group].length * 48 + 10 }}>\n                                                {groupedTasks[group].map((task, taskIndex) => {\n                                                    const taskStart = parseLocalDate(task.startDate);\n                                                    const taskEnd = parseLocalDate(task.endDate);\n                                                    if (!taskStart || !taskEnd || taskEnd < viewStartDate || taskStart > new Date(viewStartDate).setDate(viewStartDate.getDate() + days.length)) return null;\n                                                    \n                                                    const startOffset = (taskStart.getTime() - viewStartDate.getTime()) / (1000 * 60 * 60 * 24); const duration = Math.max(1, (taskEnd.getTime() - taskStart.getTime()) / (1000 * 60 * 60 * 24) + 1); const left = startOffset * dayWidth; const width = duration * dayWidth - 4;\n                                                    const progress = calculateTaskProgress(task);\n                                                    const daysRemaining = Math.ceil((taskEnd.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\n                                                    \n                                                    return (\n                                                        <div key={task.id} id={`task-${task.id}`} className=\"h-10 absolute flex items-center rounded-lg cursor-pointer transition-all duration-200 group task-bar\" style={{ top: `${taskIndex * 48 + 5}px`, left: `${left}px`, width: `${width}px` }} onClick={() => onTaskClick(task)} title={`${task.title} - ${task.status} (${Math.round(progress)}%)`}>\n                                                            <div \n                                                                className={`h-full w-full rounded-lg flex items-center overflow-hidden relative shadow-md group-hover:shadow-lg group-hover:scale-[1.02] transition-all duration-200`}\n                                                                style={{ \n                                                                    backgroundColor: task.blockerLog?.some(b => !b.unblockDate) \n                                                                        ? '#f87171'\n                                                                        : task.customColor || '#9ca3af'\n                                                                }}\n                                                            >\n                                                                <div className=\"absolute top-0 left-0 h-full bg-black/20\" style={{ width: `${progress}%` }}></div>\n                                                                <div className=\"relative z-10 flex items-center justify-between w-full px-2\">\n                                                                    <div className=\"flex items-center gap-2\">\n                                                                        {task.blockerLog?.some(b => !b.unblockDate) && <Lock size={12} className=\"text-white flex-shrink-0\" />}\n                                                                        <p className=\"text-sm font-semibold text-white truncate\">{task.title}</p>\n                                                                    </div>\n                                                                    <div className=\"flex items-center gap-2 flex-shrink-0\">\n                                                                        {width > 120 && <span className={`text-xs px-1.5 py-0.5 rounded-full ${STATUSES[task.status]?.color} bg-opacity-70 backdrop-blur-sm`}>{STATUSES[task.status]?.label}</span>}\n                                                                        {width > 80 && <span className=\"text-xs text-white font-semibold bg-black/20 px-1.5 py-0.5 rounded-full\">{progress}%</span>}\n                                                                        {daysRemaining > 0 && task.status !== 'Concluído' && width > 100 && (\n                                                                            <span className=\"text-xs text-white bg-black/20 px-1.5 py-0.5 rounded-full\">{daysRemaining}d</span>\n                                                                        )}\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    );\n                                                })}\n                                            </div>\n                                        )}\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n\nconst FilterList = ({ title, options, active, onFilterChange }) => (\n    <div className=\"flex items-center gap-2\">\n        <label htmlFor={`filter-${title}`} className=\"text-sm font-medium text-gray-600\">{title}:</label>\n        <select\n            id={`filter-${title}`}\n            value={active}\n            onChange={(e) => onFilterChange(e.target.value)}\n            className=\"p-2 border border-gray-300 rounded-md bg-white shadow-sm focus:ring-indigo-500 focus:border-indigo-500 min-w-[150px]\"\n        >\n            <option value=\"Todos\">Todos</option>\n            {Object.keys(options).map(key => (\n                <option key={key} value={key}>{options[key].label}</option>\n            ))}\n        </select>\n    </div>\n);\n\nconst WorkspaceView = ({ tasks, cycles, onTaskClick, filters, setFilters, zoomLevel, setZoomLevel, viewStartDate, setViewStartDate, onOpenTaskModal, onOpenCyclesModal }) => {\n    const workspaceViewRef = useRef(null);\n    const allLabels = useMemo(() => {\n        const labelSet = new Set();\n        tasks.forEach(task => (task.labels || []).forEach(label => labelSet.add(label)));\n        const labelOptions = {};\n        Array.from(labelSet).sort().forEach(label => {\n            labelOptions[label] = { label };\n        });\n        return labelOptions;\n    }, [tasks]);\n\n    return (\n        <div className=\"space-y-6\" ref={workspaceViewRef}>\n            <Card>\n                <div className=\"flex flex-col gap-4\">\n                    <div className=\"flex flex-col md:flex-row items-center justify-between gap-4\">\n                         <div className=\"flex items-center gap-2\">\n                            <Button onClick={() => exportViewAsImage(workspaceViewRef, 'roadmap.png', { useScrollWidth: true })} variant=\"secondary\" className=\"no-export\">\n                                <Presentation size={16}/> Exportar Imagem\n                            </Button>\n                            <Button onClick={() => setViewStartDate(new Date(new Date().setDate(new Date().getDate() - 15)))} variant=\"secondary\" className=\"no-export\">Hoje</Button>\n                            <Button onClick={onOpenCyclesModal} variant=\"secondary\" className=\"no-export\"><Repeat size={16} className=\"mr-2\"/> Gerenciar Ciclos</Button>\n                         </div>\n                         <div className=\"flex items-center gap-2 no-export\">\n                            <button onClick={() => setZoomLevel(z => Math.max(1, z - 1))} className=\"p-2 rounded-full hover:bg-gray-200 transition-colors\"><ZoomOut size={20} /></button>\n                            <input type=\"range\" min=\"1\" max=\"10\" value={zoomLevel} onChange={e => setZoomLevel(Number(e.target.value))} className=\"w-24\" />\n                            <button onClick={() => setZoomLevel(z => Math.min(10, z + 1))} className=\"p-2 rounded-full hover:bg-gray-200 transition-colors\"><ZoomIn size={20} /></button>\n                         </div>\n                    </div>\n                     <div className=\"flex flex-wrap justify-start items-center gap-4 border-t pt-4 mt-2\">\n                        <FilterList title=\"Prioridade\" options={PRIORITIES} active={filters.priority} onFilterChange={val => setFilters({...filters, priority: val})}/>\n                        <FilterList title=\"Status\" options={STATUSES} active={filters.status} onFilterChange={val => setFilters({...filters, status: val})}/>\n                        {Object.keys(allLabels).length > 0 && (\n                             <FilterList title=\"Etiqueta\" options={allLabels} active={filters.label} onFilterChange={val => setFilters({...filters, label: val})}/>\n                        )}\n                    </div>\n                </div>\n            </Card>\n            <Timeline tasks={tasks} cycles={cycles} onTaskClick={onTaskClick} zoomLevel={zoomLevel} viewStartDate={viewStartDate} />\n            <div className=\"mt-6 flex justify-end gap-4 no-export\">\n                <Button onClick={() => onOpenTaskModal()} variant=\"primary\"><Plus size={20} className=\"mr-2\" /> Nova Tarefa</Button>\n            </div>\n        </div>\n    );\n};\n\n// --- VISÃO EXECUTIVA ---\nconst ExecutiveView = ({ tasks, okrs, onSaveOkr }) => {\n    const executiveViewRef = useRef(null);\n    const [nextStepsPriority, setNextStepsPriority] = useState('Alta');\n\n    const {\n        overallRoadmapProgress,\n        overallOkrProgress,\n        projectStatusSummary,\n        projectProgressSummary, \n        okrsWithProgress,\n        attentionPoints,\n        nextSteps\n    } = useMemo(() => {\n        const today = new Date();\n        \n        const roadmapMetrics = tasks.reduce((acc, task) => {\n            const duration = getTaskDurationInDays(task);\n            const progress = calculateTaskProgress(task);\n            acc.totalDuration += duration;\n            acc.totalWeightedProgress += progress * duration;\n            return acc;\n        }, { totalDuration: 0, totalWeightedProgress: 0 });\n\n        const overallProgress = roadmapMetrics.totalDuration > 0\n            ? Math.round(roadmapMetrics.totalWeightedProgress / roadmapMetrics.totalDuration)\n            : 0;\n            \n        const projects = tasks.reduce((acc, task) => {\n            const tag = task.projectTag || 'Sem Projeto';\n            if (!acc[tag]) acc[tag] = { tasks: [] };\n            acc[tag].tasks.push(task);\n            return acc;\n        }, {});\n        \n        const statusSummary = Object.keys(projects).map(tag => {\n            const projectTasks = projects[tag].tasks;\n            const statusCounts = projectTasks.reduce((counts, task) => {\n                counts[task.status] = (counts[task.status] || 0) + 1;\n                return counts;\n            }, {});\n            return { name: tag, tasksCount: projectTasks.length, ...statusCounts };\n        });\n\n        const progressSummary = Object.keys(projects).map(tag => {\n            const projectTasks = projects[tag].tasks;\n            if (projectTasks.length === 0) return { name: tag, progress: 0 };\n            const totalProgress = projectTasks.reduce((sum, task) => sum + calculateTaskProgress(task), 0);\n            return { name: tag, progress: Math.round(totalProgress / projectTasks.length) };\n        }).sort((a,b) => a.progress - b.progress);\n\n        const okrsDetails = okrs.map(okr => {\n            const progress = calculateOkrProgress(okr);\n            const status = calculateOkrStatus(okr.startDate, okr.targetDate, progress);\n            return { ...okr, progress, status };\n        }).sort((a,b) => a.progress - b.progress);\n        \n        const totalOkrProgress = okrsDetails.reduce((sum, okr) => sum + okr.progress, 0);\n        const avgOkrProgress = okrs.length > 0 ? Math.round(totalOkrProgress / okrs.length) : 0;\n        \n        const attention = [];\n        const next = [];\n\n        tasks.forEach(task => {\n            const isOverdue = new Date(task.endDate) < today && task.status !== 'Concluído';\n            if (task.priority === 'Alta' && isOverdue) {\n                attention.push({ type: 'Atraso Crítico', text: task.title, date: task.endDate });\n            }\n            if (task.status === 'A Fazer' && task.priority === nextStepsPriority) {\n                next.push({ type: `Foco ${nextStepsPriority}`, text: task.title, date: task.startDate });\n            }\n        });\n        \n        okrs.forEach(okr => {\n            (okr.keyResults || []).forEach(kr => {\n                (kr.attentionLog || []).forEach(log => {\n                    if (!log.resolved) {\n                        attention.push({ type: 'KR Sinalizado', text: kr.text, parentObjective: okr.objective, justification: log.text, krId: kr.id, okrId: okr.id, logId: log.id });\n                    }\n                });\n            });\n        });\n\n        return {\n            overallRoadmapProgress: overallProgress,\n            overallOkrProgress: avgOkrProgress,\n            projectStatusSummary: statusSummary,\n            projectProgressSummary: progressSummary,\n            okrsWithProgress: okrsDetails,\n            attentionPoints: attention.slice(0, 5),\n            nextSteps: next.sort((a,b) => new Date(a.date) - new Date(b.date)).slice(0, 5)\n        };\n    }, [tasks, okrs, nextStepsPriority]);\n\n    const handleResolveAttention = (okrId, krId, logId) => {\n        const targetOkr = okrs.find(o => o.id === okrId);\n        if (!targetOkr) return;\n\n        const updatedKeyResults = targetOkr.keyResults.map(kr => {\n            if (kr.id === krId) {\n                const updatedLog = (kr.attentionLog || []).map(log => {\n                    if (log.id === logId) {\n                        return { ...log, resolved: true };\n                    }\n                    return log;\n                });\n                return { ...kr, attentionLog: updatedLog };\n            }\n            return kr;\n        });\n\n        onSaveOkr({ ...targetOkr, keyResults: updatedKeyResults });\n    };\n    \n    const getStatusColor = (progress) => {\n        if (progress < 40) return 'bg-red-500';\n        if (progress < 70) return 'bg-yellow-500';\n        return 'bg-green-500';\n    };\n\n    const StatCard = ({ icon, label, value, colorClass }) => (\n        <div className=\"bg-gray-50 p-4 rounded-lg flex items-center gap-4\">\n            <div className={`p-3 rounded-full ${colorClass}`}>{icon}</div>\n            <div>\n                <p className=\"text-sm text-gray-500\">{label}</p>\n                <p className=\"text-2xl font-bold text-gray-800\">{value}</p>\n            </div>\n        </div>\n    );\n\n    return (\n        <div className=\"space-y-6\" ref={executiveViewRef}>\n            <Card>\n                <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n                    <div>\n                        <h2 className=\"text-3xl font-bold text-gray-800 flex items-center\"><Briefcase className=\"mr-3 text-indigo-600\" />Painel Executivo</h2>\n                        <p className=\"text-gray-600 mt-1\">Visão consolidada do progresso, metas e riscos.</p>\n                    </div>\n                    <Button onClick={() => exportViewAsImage(executiveViewRef, 'painel_executivo.png')} variant=\"secondary\" className=\"no-export\">\n                        <Presentation size={16}/> Exportar Imagem\n                    </Button>\n                </div>\n            </Card>\n            <div className=\"space-y-2\">\n                <h3 className=\"text-lg font-semibold text-gray-500 uppercase tracking-wider\">Painel de Indicadores-Chave</h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n                    <StatCard icon={<TrendingUpIcon size={24} className=\"text-green-800\" />} label=\"Progresso Geral do Roadmap\" value={`${overallRoadmapProgress}%`} colorClass=\"bg-green-200\" />\n                    <StatCard icon={<Target size={24} className=\"text-indigo-800\" />} label=\"Progresso Geral dos OKRs\" value={`${overallOkrProgress}%`} colorClass=\"bg-indigo-200\" />\n                    <StatCard icon={<AlertTriangle size={24} className=\"text-yellow-800\" />} label=\"Pontos de Atenção\" value={attentionPoints.length} colorClass=\"bg-yellow-200\" />\n                    <StatCard icon={<Clock size={24} className=\"text-blue-800\" />} label=\"Próximos Passos\" value={nextSteps.length} colorClass=\"bg-blue-200\" />\n                </div>\n            </div>\n            <div className=\"space-y-2\">\n                <h3 className=\"text-lg font-semibold text-gray-500 uppercase tracking-wider\">Análise Detalhada</h3>\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\">\n                    <Card className=\"lg:col-span-1\">\n                        <h3 className=\"text-xl font-semibold text-gray-800 mb-4 flex items-center\"><Layers className=\"mr-2 text-gray-500\" />Status por Projeto</h3>\n                        <div className=\"space-y-4 max-h-96 overflow-y-auto pr-2\">\n                            {projectStatusSummary.map(proj => (\n                                <div key={proj.name} className=\"p-3 bg-gray-50 rounded-lg\">\n                                    <p className=\"font-semibold text-gray-700 truncate pr-4 mb-2\">{proj.name} ({proj.tasksCount})</p>\n                                    <div className=\"flex justify-around text-center text-xs\">\n                                        {Object.keys(STATUSES).map(s => (\n                                            <div key={s}>\n                                                <p className=\"font-bold text-lg\">{proj[s] || 0}</p>\n                                                <p className=\"text-gray-500\">{s}</p>\n                                            </div>\n                                        ))}\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    </Card>\n                    <Card className=\"lg:col-span-1\">\n                        <h3 className=\"text-xl font-semibold text-gray-800 mb-4 flex items-center\"><TrendingUp className=\"mr-2 text-gray-500\" />Progresso por Projeto</h3>\n                        <div className=\"space-y-4 max-h-96 overflow-y-auto pr-2\">\n                            {projectProgressSummary.length > 0 ? projectProgressSummary.map(proj => (\n                                <div key={proj.name}>\n                                    <div className=\"flex justify-between items-center mb-1\">\n                                        <p className=\"font-semibold text-gray-700 truncate pr-4\">{proj.name}</p>\n                                        <span className=\"font-bold text-gray-800\">{proj.progress}%</span>\n                                    </div>\n                                    <div className=\"w-full bg-gray-200 rounded-full h-2.5\">\n                                        <div className={`${getStatusColor(proj.progress)} h-2.5 rounded-full`} style={{ width: `${proj.progress}%` }}></div>\n                                    </div>\n                                </div>\n                            )) : <p className=\"text-gray-500\">Nenhum projeto com tarefas.</p>}\n                        </div>\n                    </Card>\n                    <Card className=\"lg:col-span-1\">\n                        <h3 className=\"text-xl font-semibold text-gray-800 mb-4 flex items-center\"><Target className=\"mr-2 text-gray-500\" />Status dos Objetivos</h3>\n                        <div className=\"space-y-4 max-h-96 overflow-y-auto pr-2\">\n                            {okrsWithProgress.length > 0 ? okrsWithProgress.map(okr => (\n                                <div key={okr.id}>\n                                    <div className=\"flex justify-between items-center mb-1\">\n                                        <p className=\"font-semibold text-gray-700 truncate pr-4\">{okr.objective}</p>\n                                        <span className={`px-2 py-0.5 text-xs font-semibold text-white rounded-full ${okr.status.color}`}>{okr.status.text}</span>\n                                    </div>\n                                    <div className=\"flex items-center gap-2\">\n                                        <div className=\"w-full bg-gray-200 rounded-full h-2.5\">\n                                            <div className={`${getStatusColor(okr.progress)} h-2.5 rounded-full`} style={{ width: `${okr.progress}%` }}></div>\n                                        </div>\n                                        <span className=\"font-bold text-gray-800 text-sm\">{okr.progress}%</span>\n                                    </div>\n                                </div>\n                            )) : <p className=\"text-gray-500\">Nenhum OKR definido.</p>}\n                        </div>\n                    </Card>\n                    <Card className=\"lg:col-span-3\">\n                        <h3 className=\"text-xl font-semibold text-gray-800 mb-4 flex items-center\"><AlertTriangle className=\"mr-2 text-red-500\" />Inteligência e Ações</h3>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                            <div>\n                                <h4 className=\"font-semibold text-gray-700 mb-2\">Pontos de Atenção</h4>\n                                 <div className=\"space-y-3\">\n                                    {attentionPoints.length > 0 ? attentionPoints.map((item, index) => (\n                                        <div key={index} className=\"p-3 bg-red-50 border-l-4 border-red-500 rounded flex justify-between items-start\">\n                                            <div>\n                                                <p className=\"font-semibold text-red-800\">{item.type}: <span className=\"font-normal\">{item.text}</span></p>\n                                                {item.justification && <p className=\"text-sm text-red-600 mt-1 italic\">\"{item.justification}\"</p>}\n                                            </div>\n                                            {item.logId && (\n                                                <button onClick={() => handleResolveAttention(item.okrId, item.krId, item.logId)} className=\"ml-2 p-1 text-green-600 hover:bg-green-100 rounded-full\"><Check size={18} /></button>\n                                            )}\n                                        </div>\n                                    )) : <p className=\"text-gray-500 text-sm\">Nenhum ponto de atenção identificado.</p>}\n                                </div>\n                            </div>\n                             <div>\n                                <div className=\"flex justify-between items-center mb-2\">\n                                    <h4 className=\"font-semibold text-gray-700\">Próximos Passos</h4>\n                                    <div className=\"flex gap-1\">\n                                        {Object.keys(PRIORITIES).map(p => (\n                                            <button key={p} onClick={() => setNextStepsPriority(p)} className={`px-2 py-0.5 text-xs rounded-full ${nextStepsPriority === p ? 'bg-indigo-600 text-white' : 'bg-gray-200'}`}>{p}</button>\n                                        ))}\n                                    </div>\n                                </div>\n                                 <div className=\"space-y-3\">\n                                    {nextSteps.length > 0 ? nextSteps.map((item, index) => (\n                                        <div key={index} className=\"p-3 bg-blue-50 border-l-4 border-blue-500 rounded\">\n                                            <p className=\"font-semibold text-blue-800\">{item.type}: <span className=\"font-normal\">{item.text}</span></p>\n                                            <p className=\"text-sm text-blue-600\">Inicia em: {formatDate(item.date, false)}</p>\n                                        </div>\n                                    )) : <p className=\"text-gray-500 text-sm\">Nenhuma ação com prioridade \"{nextStepsPriority}\" a ser iniciada.</p>}\n                                </div>\n                            </div>\n                        </div>\n                    </Card>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n// --- Componentes de OKR ---\nconst OkrForm = ({ okr, onSave, onCancel }) => {\n    const [objective, setObjective] = useState(okr?.objective || '');\n    const [keyResults, setKeyResults] = useState(okr?.keyResults || []);\n    const [targetDate, setTargetDate] = useState(okr?.targetDate || '');\n\n    const handleKrChange = (index, field, value) => {\n        const newKrs = [...keyResults];\n        const numericFields = ['startValue', 'targetValue', 'weight'];\n        \n        if (numericFields.includes(field)) {\n            if (value === '') {\n                newKrs[index][field] = '';\n            } else {\n                const parsedValue = parseFloat(value);\n                if (!isNaN(parsedValue)) {\n                    newKrs[index][field] = parsedValue;\n                }\n            }\n        } else {\n            newKrs[index][field] = value;\n        }\n        setKeyResults(newKrs);\n    };\n\n    const addKr = () => setKeyResults([...keyResults, { id: `kr_${Date.now()}`, text: '', startValue: 0, targetValue: 100, currentValue: 0, weight: 1, updates: [], attentionLog: [] }]);\n    const removeKr = (index) => setKeyResults(keyResults.filter((_, i) => i !== index));\n    \n    const handleFormSave = () => {\n        if (!objective.trim()) return;\n\n        const finalKrs = keyResults\n            .filter(kr => kr.text.trim() !== '')\n            .map(kr => ({\n                ...kr,\n                weight: Number(kr.weight) > 0 ? Number(kr.weight) : 1,\n                startValue: Number(kr.startValue) || 0,\n                targetValue: Number(kr.targetValue) || 0,\n                currentValue: Number(kr.currentValue) || 0,\n            }));\n\n        onSave({ id: okr?.id, objective, keyResults: finalKrs, targetDate, startDate: okr?.startDate || new Date().toISOString().split('T')[0] });\n    };\n\n    return (\n        <Card className=\"border-indigo-300 border-2 mt-6 no-export\">\n            <h3 className=\"text-xl font-bold text-gray-800 mb-4\">{okr ? 'Editar Objetivo' : 'Novo Objetivo'}</h3>\n            <div className=\"space-y-6\">\n                 <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                    <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-gray-600 mb-1\">Objetivo</label>\n                        <input type=\"text\" value={objective} onChange={e => setObjective(e.target.value)} placeholder=\"Ex: Lançar o melhor produto do mercado\" className=\"w-full p-2 bg-white border border-gray-300 rounded-md text-gray-800\" />\n                    </div>\n                     <div>\n                        <label className=\"block text-sm font-medium text-gray-600 mb-1\">Data Alvo</label>\n                        <input type=\"date\" value={targetDate} onChange={e => setTargetDate(e.target.value)} className=\"w-full p-2 bg-white border border-gray-300 rounded-md text-gray-800\" />\n                    </div>\n                </div>\n                <div>\n                    <label className=\"block text-sm font-medium text-gray-600 mb-2\">Resultados-Chave</label>\n                    <div className=\"space-y-3\">\n                        {keyResults.map((kr, index) => (\n                            <div key={kr.id || index} className=\"p-3 bg-gray-50 rounded-md border border-gray-200 space-y-2\">\n                                <div className=\"flex items-center gap-2\">\n                                    <input type=\"text\" value={kr.text} onChange={e => handleKrChange(index, 'text', e.target.value)} placeholder={`KR ${index + 1}`} className=\"flex-grow p-2 border border-gray-300 rounded-md text-gray-800\" />\n                                    <button onClick={() => removeKr(index)} className=\"text-red-500 hover:text-red-700 p-1\"><Trash2 size={16} /></button>\n                                </div>\n                                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2\">\n                                    <div><label className=\"text-xs text-gray-500\">Inicial</label><input type=\"number\" value={kr.startValue ?? ''} onChange={e => handleKrChange(index, 'startValue', e.target.value)} className=\"w-full p-2 border border-gray-300 rounded-md text-gray-800\" /></div>\n                                    <div><label className=\"text-xs text-gray-500\">Meta</label><input type=\"number\" value={kr.targetValue ?? ''} onChange={e => handleKrChange(index, 'targetValue', e.target.value)} className=\"w-full p-2 border border-gray-300 rounded-md text-gray-800\" /></div>\n                                    <div><label className=\"text-xs text-gray-500\">Atual</label><p className=\"w-full p-2 border border-gray-200 bg-gray-100 rounded-md text-gray-800\">{kr.currentValue || 0}</p></div>\n                                    <div><label className=\"text-xs text-gray-500\">Peso</label><input type=\"number\" value={kr.weight ?? ''} onChange={e => handleKrChange(index, 'weight', e.target.value)} className=\"w-full p-2 border border-gray-300 rounded-md text-gray-800\" /></div>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                    <Button onClick={addKr} variant=\"secondary\" className=\"mt-3 text-sm\"><Plus size={16} /> Adicionar KR</Button>\n                </div>\n            </div>\n            <div className=\"flex justify-end space-x-3 mt-6\">\n                <Button onClick={onCancel} variant=\"secondary\">Cancelar</Button>\n                <Button onClick={handleFormSave} variant=\"primary\">Salvar Objetivo</Button>\n            </div>\n        </Card>\n    );\n};\n\nconst KrHistoryModal = ({ isOpen, onClose, kr, onDeleteUpdate }) => {\n    if (!isOpen) return null;\n    const sortedUpdates = kr.updates ? [...kr.updates].sort((a, b) => new Date(b.date) - new Date(a.date)) : [];\n    return (\n        <Modal isOpen={isOpen} onClose={onClose} title={`Histórico de Progresso`} size=\"2xl\">\n            <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-semibold text-gray-800\">{kr.text}</h3>\n                {sortedUpdates.length > 0 ? (\n                    <ul className=\"space-y-3 max-h-96 overflow-y-auto pr-2\">\n                        {sortedUpdates.map((update) => (\n                            <li key={update.date} className=\"flex items-center justify-between p-3 bg-gray-100 rounded-lg\">\n                                <div>\n                                    <span className=\"font-semibold text-indigo-700\">Valor: {update.value}</span>\n                                    <p className=\"text-sm text-gray-500\">Registrado em: {formatDate(new Date(update.date), true)}</p>\n                                </div>\n                                <Button onClick={() => onDeleteUpdate(kr.id, update.date)} variant=\"ghost\" className=\"!p-2 text-red-500 hover:bg-red-100\"><Trash2 size={16} /></Button>\n                            </li>\n                        ))}\n                    </ul>\n                ) : <p className=\"text-gray-500\">Nenhum registro de progresso ainda.</p>}\n                <div className=\"flex justify-end pt-4 border-t\"><Button onClick={onClose} variant=\"secondary\">Fechar</Button></div>\n            </div>\n        </Modal>\n    );\n};\n\nconst KrAttentionModal = ({ isOpen, onClose, kr, onSaveAttentionLog }) => {\n    const [log, setLog] = useState(kr.attentionLog || []);\n    const [newJustification, setNewJustification] = useState('');\n\n    useEffect(() => {\n        if(isOpen) setLog(kr.attentionLog || []);\n    }, [isOpen, kr.attentionLog]);\n\n    const handleAdd = () => {\n        if (!newJustification.trim()) return;\n        const newLogEntry = {\n            id: `att_${Date.now()}`,\n            text: newJustification,\n            date: new Date().toISOString(),\n            resolved: false\n        };\n        const updatedLog = [...log, newLogEntry];\n        setLog(updatedLog);\n        onSaveAttentionLog(kr.id, updatedLog);\n        setNewJustification('');\n    };\n\n    const handleToggleResolve = (logId) => {\n        const updatedLog = log.map(item => item.id === logId ? { ...item, resolved: !item.resolved } : item);\n        setLog(updatedLog);\n        onSaveAttentionLog(kr.id, updatedLog);\n    };\n\n    const handleDelete = (logId) => {\n        const updatedLog = log.filter(item => item.id !== logId);\n        setLog(updatedLog);\n        onSaveAttentionLog(kr.id, updatedLog);\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose} title=\"Histórico de Pontos de Atenção\" size=\"2xl\">\n            <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-semibold text-gray-800\">{kr.text}</h3>\n                <div className=\"space-y-2\">\n                    <textarea value={newJustification} onChange={e => setNewJustification(e.target.value)} placeholder=\"Adicionar nova justificativa...\" className=\"w-full p-2 border border-gray-300 rounded-md text-sm\"></textarea>\n                    <div className=\"flex justify-end\"><Button onClick={handleAdd} className=\"!text-xs !py-1\">Adicionar Ponto</Button></div>\n                </div>\n                <div className=\"space-y-3 max-h-80 overflow-y-auto pr-2\">\n                    {log.sort((a,b) => new Date(b.date) - new Date(a.date)).map(item => (\n                        <div key={item.id} className={`p-3 rounded-lg ${item.resolved ? 'bg-green-50' : 'bg-red-50'}`}>\n                            <p className={`text-sm ${item.resolved ? 'text-gray-500 line-through' : 'text-gray-800'}`}>{item.text}</p>\n                            <div className=\"flex justify-between items-center mt-2\">\n                                <p className=\"text-xs text-gray-400\">{formatDate(new Date(item.date), true)}</p>\n                                <div className=\"flex gap-2\">\n                                    <Button onClick={() => handleToggleResolve(item.id)} variant=\"ghost\" className={`!p-1 h-7 w-7 ${item.resolved ? 'text-yellow-600' : 'text-green-600'}`}>{item.resolved ? <X size={16}/> : <Check size={16} />}</Button>\n                                    <Button onClick={() => handleDelete(item.id)} variant=\"ghost\" className=\"!p-1 h-7 w-7 text-red-500\"><Trash2 size={16} /></Button>\n                                </div>\n                            </div>\n                        </div>\n                    ))}\n                </div>\n            </div>\n        </Modal>\n    );\n};\n\nconst KrItem = ({ kr, okrStartDate, okrTargetDate, onUpdate, onDeleteUpdate, onSaveAttentionLog }) => {\n    const [isUpdating, setIsUpdating] = useState(false);\n    const [newValue, setNewValue] = useState(kr.currentValue);\n    const [isHistoryOpen, setIsHistoryOpen] = useState(false);\n    const [isAttentionOpen, setIsAttentionOpen] = useState(false);\n    \n    const progress = calculateKrProgress(kr);\n    const hasActiveAttention = (kr.attentionLog || []).some(log => !log.resolved);\n    \n    const pacingInfo = useMemo(() => calculatePacingInfo(\n        okrStartDate,\n        okrTargetDate,\n        kr.startValue,\n        kr.targetValue,\n        kr.currentValue\n    ), [okrStartDate, okrTargetDate, kr.startValue, kr.targetValue, kr.currentValue]);\n\n    const handleUpdate = () => {\n        onUpdate(kr.id, newValue);\n        setIsUpdating(false);\n    };\n\n    return (\n        <>\n            <KrHistoryModal isOpen={isHistoryOpen} onClose={() => setIsHistoryOpen(false)} kr={kr} onDeleteUpdate={onDeleteUpdate} />\n            <KrAttentionModal isOpen={isAttentionOpen} onClose={() => setIsAttentionOpen(false)} kr={kr} onSaveAttentionLog={onSaveAttentionLog} />\n            <div className=\"p-4 bg-white rounded-lg border border-gray-200 hover:border-gray-300 transition-all space-y-3\">\n                <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n                    <p className=\"font-medium text-gray-800 flex-1\">{kr.text}</p>\n                    <div className=\"flex items-center gap-4 mt-2 sm:mt-0 no-export\">\n                        <span className=\"text-xs text-gray-500\">Peso: {kr.weight || 1}</span>\n                        <div className=\"flex items-center gap-1\">\n                            {isUpdating ? (\n                                <>\n                                    <input type=\"number\" value={newValue} onChange={e => setNewValue(parseFloat(e.target.value))} className=\"w-24 p-1 border border-indigo-400 rounded-md\" autoFocus />\n                                    <Button onClick={handleUpdate} variant=\"primary\" className=\"!px-2 !py-1\"><Check size={16} /></Button>\n                                    <Button onClick={() => setIsUpdating(false)} variant=\"secondary\" className=\"!px-2 !py-1\"><X size={16} /></Button>\n                                </>\n                            ) : (\n                                <>\n                                    <span className=\"font-semibold text-indigo-600 text-sm\">{kr.currentValue}</span>\n                                    <span className=\"text-gray-500 text-sm\">/ {kr.targetValue}</span>\n                                    <Button onClick={() => setIsUpdating(true)} variant=\"ghost\" className=\"!p-1 h-7 w-7\"><Zap size={16} /></Button>\n                                    <Button onClick={() => setIsHistoryOpen(true)} variant=\"ghost\" className=\"!p-1 h-7 w-7\"><History size={16} /></Button>\n                                    <Button onClick={() => setIsAttentionOpen(true)} variant=\"ghost\" className={`!p-1 h-7 w-7 ${hasActiveAttention ? 'text-red-500 bg-red-100' : ''}`}><AlertTriangle size={16} /></Button>\n                                </>\n                            )}\n                        </div>\n                    </div>\n                </div>\n                <div className=\"mt-2\">\n                    <div className=\"w-full bg-gray-200 rounded-full h-2.5\"><div className=\"bg-indigo-600 h-2.5 rounded-full\" style={{ width: `${progress}%` }}></div></div>\n                </div>\n                {pacingInfo.status !== 'no-date' && (\n                    <div className=\"flex justify-between items-center text-xs text-gray-500 border-t pt-2 mt-2\">\n                        <div className=\"flex items-center gap-1\">\n                            <Clock size={14} />\n                            <span>\n                                {pacingInfo.daysRemaining !== null ? `${pacingInfo.daysRemaining} dias restantes` : (pacingInfo.status === 'completed' ? 'Meta atingida' : 'Prazo encerrado')}\n                            </span>\n                        </div>\n                        {pacingInfo.requiredPace !== null && pacingInfo.status === 'on-track' && (\n                            <div className=\"flex items-center gap-1\" title=\"Ritmo necessário por mês para atingir a meta\">\n                                <Gauge size={14} />\n                                <span>{pacingInfo.requiredPace}/mês</span>\n                            </div>\n                        )}\n                    </div>\n                )}\n            </div>\n        </>\n    );\n};\n\n// --- Componente OkrView ---\nconst OkrView = ({ okrs, tasks, onSave, onDelete }) => {\n    const okrViewRef = useRef(null);\n    const [layout, setLayout] = useState('list');\n    const [isFormOpen, setIsFormOpen] = useState(false);\n    const [editingOkr, setEditingOkr] = useState(null);\n    const [expandedOkrs, setExpandedOkrs] = useState({});\n    const [itemToDelete, setItemToDelete] = useState(null);\n    const [isConfirmDeleteOpen, setIsConfirmDeleteOpen] = useState(false);\n    const [expandedTasks, setExpandedTasks] = useState({});\n\n    const toggleExpansion = (okrId) => {\n        setExpandedOkrs(prev => ({ ...prev, [okrId]: !prev[okrId] }));\n    };\n\n    const toggleTasksExpansion = (okrId) => {\n        setExpandedTasks(prev => ({ ...prev, [okrId]: !prev[okrId] }));\n    };\n\n    const handleSave = (okrData) => {\n        onSave(okrData);\n        setIsFormOpen(false);\n        setEditingOkr(null);\n    };\n    \n    const handleKrUpdate = (okr, krId, newValue) => {\n        const updatedKeyResults = okr.keyResults.map(kr => {\n            if (kr.id === krId) {\n                const newUpdate = { id: `update_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`, value: newValue, date: new Date().toISOString() };\n                const newUpdates = [...(kr.updates || []), newUpdate];\n                return { ...kr, currentValue: newValue, updates: newUpdates };\n            }\n            return kr;\n        });\n        onSave({ ...okr, keyResults: updatedKeyResults });\n    };\n\n    const handleSaveAttentionLog = (okr, krId, attentionLog) => {\n        const updatedKeyResults = okr.keyResults.map(kr => {\n            if (kr.id === krId) {\n                return { ...kr, attentionLog };\n            }\n            return kr;\n        });\n        onSave({ ...okr, keyResults: updatedKeyResults });\n    };\n    \n    const handleDeleteUpdate = (okr, krId, updateId) => {\n        const updatedKeyResults = okr.keyResults.map(kr => {\n            if (kr.id === krId) {\n                const remainingUpdates = (kr.updates || []).filter(u => u.date !== updateId);\n                let newCurrentValue = kr.startValue; \n                if (remainingUpdates.length > 0) {\n                    remainingUpdates.sort((a, b) => new Date(b.date) - new Date(a.date));\n                    newCurrentValue = remainingUpdates[0].value;\n                }\n                return { ...kr, updates: remainingUpdates, currentValue: newCurrentValue };\n            }\n            return kr;\n        });\n        onSave({ ...okr, keyResults: updatedKeyResults });\n    };\n\n    const handleEdit = (okr) => {\n        setEditingOkr(okr);\n        setIsFormOpen(true);\n    };\n\n    const handleCancel = () => {\n        setIsFormOpen(false);\n        setEditingOkr(null);\n    };\n\n    const requestDeleteOkr = (id) => {\n        setItemToDelete({ id, type: 'okr' });\n        setIsConfirmDeleteOpen(true);\n    }\n    \n    const confirmDeleteOkr = () => {\n        onDelete(itemToDelete.id, itemToDelete.type);\n        setIsConfirmDeleteOpen(false);\n        setItemToDelete(null);\n    }\n\n    return (\n        <div ref={okrViewRef}>\n            <ConfirmModal isOpen={isConfirmDeleteOpen} onClose={() => setIsConfirmDeleteOpen(false)} onConfirm={confirmDeleteOkr} title=\"Confirmar Exclusão de Objetivo\">\n                <p>Tem certeza que deseja excluir este Objetivo e todos os seus KRs? Esta ação não pode ser desfeita.</p>\n            </ConfirmModal>\n            <div className=\"space-y-6\">\n                <Card>\n                    <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n                        <div className=\"flex-1\">\n                            <h2 className=\"text-3xl font-bold text-gray-800 flex items-center\"><Target className=\"mr-3 text-indigo-600\" />Objetivos e Resultados-Chave</h2>\n                            <p className=\"text-gray-600 mt-1\">Defina e acompanhe as metas que impulsionam seu roadmap.</p>\n                        </div>\n                        <div className=\"flex items-center gap-4\">\n                            <Button onClick={() => exportViewAsImage(okrViewRef, 'okrs.png')} variant=\"secondary\" className=\"no-export\">\n                                <Presentation size={16}/> Exportar Imagem\n                            </Button>\n                            <div className=\"flex items-center bg-gray-100 rounded-lg p-1 no-export\">\n                                <button onClick={() => setLayout('list')} className={`p-2 rounded-md transition-colors ${layout === 'list' ? 'bg-white text-indigo-600 shadow-sm' : 'text-gray-500 hover:bg-gray-200'}`}><List size={20} /></button>\n                                <button onClick={() => setLayout('grid')} className={`p-2 rounded-md transition-colors ${layout === 'grid' ? 'bg-white text-indigo-600 shadow-sm' : 'text-gray-500 hover:bg-gray-200'}`}><LayoutGrid size={20} /></button>\n                            </div>\n                            {!isFormOpen && (\n                                <Button onClick={() => setIsFormOpen(true)} variant=\"primary\" className=\"no-export\">\n                                    <Plus size={16} /> Novo Objetivo\n                                </Button>\n                            )}\n                        </div>\n                    </div>\n                </Card>\n                {isFormOpen && <OkrForm key={editingOkr?.id || 'new'} okr={editingOkr} onSave={handleSave} onCancel={handleCancel} />}\n                <div className={layout === 'list' ? \"space-y-6\" : \"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\"}>\n                    {okrs.map(okr => {\n                        const progress = calculateOkrProgress(okr);\n                        const isExpanded = !!expandedOkrs[okr.id];\n                        const okrStatus = calculateOkrStatus(okr.startDate, okr.targetDate, progress);\n                        const relatedTasks = tasks.filter(task => task.okrLink?.okrId === okr.id);\n                        const areTasksExpanded = !!expandedTasks[okr.id];\n\n                        return (\n                            <Card key={okr.id} className={`transition-all duration-300 overflow-hidden ${layout === 'list' ? '!p-0' : ''}`}>\n                                <div className={layout === 'list' ? 'p-6' : ''}>\n                                    <div className=\"flex justify-between items-start\">\n                                        <h3 className=\"text-xl font-bold text-gray-800 flex-1 pr-4\">{okr.objective}</h3>\n                                        <div className=\"flex space-x-2 no-export\">\n                                            <Button onClick={(e) => { e.stopPropagation(); handleEdit(okr); }} variant=\"ghost\" className=\"!p-2\"><Edit size={16} /></Button>\n                                            <Button onClick={(e) => { e.stopPropagation(); requestDeleteOkr(okr.id); }} variant=\"ghost\" className=\"!p-2 text-red-500 hover:bg-red-50\"><Trash2 size={16} /></Button>\n                                        </div>\n                                    </div>\n                                    <div className=\"mt-2 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 text-sm text-gray-500\">\n                                        <div className=\"flex items-center gap-2\">\n                                            <Calendar size={14} />\n                                            <span>{formatDate(okr.startDate)} - {formatDate(okr.targetDate)}</span>\n                                        </div>\n                                        <div className=\"flex items-center gap-2\">\n                                            <span className={`px-2 py-0.5 text-xs font-semibold text-white rounded-full ${okrStatus.color}`}>{okrStatus.text}</span>\n                                            {relatedTasks.length > 0 && layout === 'list' && (\n                                                <span className=\"flex items-center gap-1.5 px-2 py-0.5 text-xs font-semibold text-gray-600 bg-gray-200 rounded-full\">\n                                                    <Layers size={12} />\n                                                    {relatedTasks.length}\n                                                </span>\n                                            )}\n                                        </div>\n                                    </div>\n                                    \n                                    <div className=\"mt-3 flex items-center gap-4 cursor-pointer\" onClick={() => layout === 'list' && toggleExpansion(okr.id)}>\n                                        <div className=\"w-full bg-gray-200 rounded-full h-4\">\n                                            <div className=\"bg-gradient-to-r from-sky-500 to-indigo-600 h-4 rounded-full transition-all duration-500\" style={{ width: `${progress}%` }}></div>\n                                        </div>\n                                        <span className=\"text-lg font-bold text-indigo-600\">{progress}%</span>\n                                        {layout === 'list' && <ChevronDown size={20} className={`text-gray-500 transition-transform duration-300 ${isExpanded ? 'rotate-180' : ''}`} />}\n                                    </div>\n                                </div>\n                                \n                                {layout === 'list' && (\n                                    <div className={`transition-all duration-500 ease-in-out bg-gray-50/50 ${isExpanded ? 'max-h-[2500px] py-4' : 'max-h-0'}`}>\n                                        <div className=\"px-6 space-y-3\">\n                                            {okr.keyResults.map(kr => (\n                                                <KrItem key={kr.id} kr={kr} \n                                                    okrStartDate={okr.startDate}\n                                                    okrTargetDate={okr.targetDate}\n                                                    onUpdate={(krId, newValue) => handleKrUpdate(okr, krId, newValue)} \n                                                    onDeleteUpdate={(krId, updateId) => handleDeleteUpdate(okr, krId, updateId)}\n                                                    onSaveAttentionLog={(krId, attentionLog) => handleSaveAttentionLog(okr, krId, attentionLog)}\n                                                />\n                                            ))}\n                                        </div>\n                                        \n                                        {relatedTasks.length > 0 && (\n                                            <div className=\"px-6 mt-4 pt-4 border-t border-gray-200\">\n                                                <div onClick={() => toggleTasksExpansion(okr.id)} className=\"flex justify-between items-center cursor-pointer select-none\">\n                                                    <h4 className=\"text-xs font-bold text-gray-500 uppercase tracking-wider flex items-center\">\n                                                        <Layers size={14} className=\"mr-2\" />\n                                                        Atividades Vinculadas ({relatedTasks.length})\n                                                    </h4>\n                                                    <ChevronDown size={20} className={`text-gray-500 transition-transform duration-300 ${areTasksExpanded ? 'rotate-180' : ''}`} />\n                                                </div>\n                                                <div className={`transition-all duration-500 ease-in-out overflow-hidden ${areTasksExpanded ? 'max-h-[500px] mt-3' : 'max-h-0'}`}>\n                                                    <ul className=\"space-y-2\">\n                                                        {relatedTasks.map(task => (\n                                                             <li key={task.id} className=\"text-sm p-3 bg-white rounded-md border space-y-2\">\n                                                                <div className=\"flex justify-between items-center\">\n                                                                    <span className=\"font-semibold text-gray-800\">{task.title}</span>\n                                                                    <span className={`text-xs px-2 py-0.5 rounded-full ${STATUSES[task.status]?.color || 'bg-gray-200 text-gray-800'}`}>\n                                                                        {task.status}\n                                                                    </span>\n                                                                </div>\n                                                                <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center text-xs text-gray-500 gap-2\">\n                                                                    <div className=\"flex items-center gap-4\">\n                                                                        <span className=\"flex items-center gap-1.5\" title=\"Prioridade\">\n                                                                            <ChevronsUpDown size={14} className={PRIORITIES[task.priority]?.textColor} />\n                                                                            <strong className={PRIORITIES[task.priority]?.textColor}>{task.priority}</strong>\n                                                                        </span>\n                                                                        {task.projectTag && (\n                                                                            <span className=\"flex items-center gap-1.5\" title=\"Projeto\">\n                                                                                <Briefcase size={14} />\n                                                                                <span>{task.projectTag}</span>\n                                                                            </span>\n                                                                        )}\n                                                                    </div>\n                                                                    <div className=\"flex items-center gap-1.5\" title=\"Duração\">\n                                                                        <Calendar size={14} />\n                                                                        <span>{formatDate(task.startDate)} → {formatDate(task.endDate)}</span>\n                                                                    </div>\n                                                                </div>\n                                                            </li>\n                                                        ))}\n                                                    </ul>\n                                                </div>\n                                            </div>\n                                        )}\n                                    </div>\n                                )}\n                            </Card>\n                        )\n                    })}\n                </div>\n            </div>\n        </div>\n    );\n};\n\n\n// --- Componente de Login ---\nconst LoginScreen = () => {\n    const [isLoginView, setIsLoginView] = useState(true);\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [name, setName] = useState('');\n    const [error, setError] = useState('');\n\n    const handleGoogleLogin = async () => {\n        const provider = new GoogleAuthProvider();\n        try {\n            await signInWithPopup(auth, provider);\n            setError('');\n        } catch (error) {\n            console.error(\"Erro durante o login com Google:\", error);\n            if (error.code === 'auth/unauthorized-domain') {\n                setError('Erro: Este domínio não está autorizado. Verifique as configurações do Firebase.');\n            } else {\n                setError('Ocorreu um erro durante o login com Google.');\n            }\n        }\n    };\n\n    const handleEmailAuth = async (e) => {\n        e.preventDefault();\n        setError('');\n        if (isLoginView) {\n            try {\n                await signInWithEmailAndPassword(auth, email, password);\n            } catch (error) {\n                setError('E-mail ou senha inválidos.');\n                console.error(\"Erro de login:\", error);\n            }\n        } else {\n            try {\n                const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n                await updateProfile(userCredential.user, { displayName: name });\n            } catch (error) {\n                if (error.code === 'auth/email-already-in-use') {\n                    setError('Este e-mail já está em uso.');\n                } else {\n                    setError('Erro ao criar a conta. A senha deve ter no mínimo 6 caracteres.');\n                }\n                console.error(\"Erro de registro:\", error);\n            }\n        }\n    };\n\n    return (\n        <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\n            <div className=\"p-8 bg-white rounded-2xl shadow-xl max-w-md w-full\">\n                <h1 className=\"text-4xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-cyan-600 mb-2\">\n                    Norte Estratégico\n                </h1>\n                <p className=\"text-center text-gray-600 mb-6\">Seu planejamento estratégico em um só lugar.</p>\n                \n                <div className=\"flex border-b mb-6\">\n                    <button onClick={() => setIsLoginView(true)} className={`flex-1 py-2 font-semibold ${isLoginView ? 'text-indigo-600 border-b-2 border-indigo-600' : 'text-gray-500'}`}>Entrar</button>\n                    <button onClick={() => setIsLoginView(false)} className={`flex-1 py-2 font-semibold ${!isLoginView ? 'text-indigo-600 border-b-2 border-indigo-600' : 'text-gray-500'}`}>Registrar-se</button>\n                </div>\n\n                <form onSubmit={handleEmailAuth} className=\"space-y-4\">\n                    {!isLoginView && (\n                        <input type=\"text\" placeholder=\"Nome\" value={name} onChange={(e) => setName(e.target.value)} required className=\"w-full p-3 border rounded-lg\" />\n                    )}\n                    <input type=\"email\" placeholder=\"E-mail\" value={email} onChange={(e) => setEmail(e.target.value)} required className=\"w-full p-3 border rounded-lg\" />\n                    <input type=\"password\" placeholder=\"Senha\" value={password} onChange={(e) => setPassword(e.target.value)} required className=\"w-full p-3 border rounded-lg\" />\n                    \n                    <Button type=\"submit\" variant=\"primary\" className=\"w-full !py-3 !text-lg\">\n                        {isLoginView ? 'Entrar' : 'Criar Conta'}\n                    </Button>\n                </form>\n\n                <div className=\"my-6 flex items-center\">\n                    <div className=\"flex-grow border-t\"></div>\n                    <span className=\"mx-4 text-gray-400\">ou</span>\n                    <div className=\"flex-grow border-t\"></div>\n                </div>\n\n                <Button onClick={handleGoogleLogin} variant=\"secondary\" className=\"w-full !py-3\">\n                    <svg className=\"w-5 h-5 mr-2\" viewBox=\"0 0 48 48\"><path fill=\"#EA4335\" d=\"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z\"></path><path fill=\"#4285F4\" d=\"M46.98 24.55c0-1.57-.15-3.09-.42-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z\"></path><path fill=\"#FBBC05\" d=\"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z\"></path><path fill=\"#34A853\" d=\"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z\"></path><path fill=\"none\" d=\"M0 0h48v48H0z\"></path></svg>\n                    Continuar com Google\n                </Button>\n\n                {error && (\n                    <p className=\"mt-4 text-sm text-red-600 bg-red-100 p-3 rounded-lg text-center\">{error}</p>\n                )}\n            </div>\n        </div>\n    );\n};\n\n\n// --- INÍCIO DOS NOVOS COMPONENTES ---\n\n// Componente para um único card de tarefa no quadro Kanban\nconst TaskCard = ({ task, onTaskClick }) => {\n    const subtaskProgress = useMemo(() => {\n        if (!task.subtasks || task.subtasks.length === 0) return null;\n        const completed = task.subtasks.filter(s => s.completed).length;\n        return { completed, total: task.subtasks.length };\n    }, [task.subtasks]);\n\n    const isBlocked = useMemo(() => task.blockerLog?.some(b => !b.unblockDate), [task.blockerLog]);\n\n    return (\n        <div\n            onClick={() => onTaskClick(task)}\n            className={`bg-white rounded-lg p-4 shadow-md border-l-4 ${isBlocked ? 'border-red-500' : (PRIORITIES[task.priority]?.borderColor || 'border-transparent')} cursor-pointer hover:shadow-lg hover:bg-gray-50 transition-all duration-200 space-y-3`}\n        >\n            <div className=\"flex justify-between items-start\">\n                <span className=\"text-xs font-semibold bg-gray-100 text-gray-700 px-2 py-1 rounded\">{task.projectTag || 'Geral'}</span>\n                <div className=\"flex items-center gap-2\">\n                    {isBlocked && <Lock size={14} className=\"text-red-500\" title=\"Tarefa Bloqueada\"/>}\n                    <span className={`text-xs font-bold px-2 py-1 rounded-full ${PRIORITIES[task.priority]?.color} text-white`}>{task.priority}</span>\n                </div>\n            </div>\n\n            <div>\n                <p className=\"font-semibold text-gray-800\">{task.title}</p>\n                <p className=\"text-xs text-gray-400 font-mono mt-1\">ID: {task.humanId}</p>\n            </div>\n\n            <div className=\"flex justify-between items-center text-xs text-gray-500 pt-2 border-t border-gray-100\">\n                <div className=\"flex items-center gap-1.5\" title=\"Prazo Final\">\n                    <Calendar size={14} />\n                    <span>{formatDate(task.endDate)}</span>\n                </div>\n                {subtaskProgress && (\n                    <div className=\"flex items-center gap-1.5\" title=\"Subtarefas Concluídas\">\n                        <CheckCircle size={14} />\n                        <span>{subtaskProgress.completed}/{subtaskProgress.total}</span>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n\n// --- NOVA ABA DE ATIVIDADES (KANBAN) ---\nconst TasksView = ({ tasks, onTaskClick, filters, setFilters }) => {\n    const tasksViewRef = useRef(null);\n    const tasksByStatus = useMemo(() => {\n        const grouped = {};\n        Object.keys(STATUSES).forEach(status => {\n            grouped[status] = [];\n        });\n        tasks.forEach(task => {\n            if (grouped[task.status]) {\n                grouped[task.status].push(task);\n            }\n        });\n        return grouped;\n    }, [tasks]);\n\n    const allLabels = useMemo(() => {\n        const labelSet = new Set();\n        tasks.forEach(task => (task.labels || []).forEach(label => labelSet.add(label)));\n        const labelOptions = {};\n        Array.from(labelSet).sort().forEach(label => {\n            labelOptions[label] = { label };\n        });\n        return labelOptions;\n    }, [tasks]);\n\n    return (\n        <div className=\"space-y-6\" ref={tasksViewRef}>\n            <Card>\n                <div className=\"flex flex-col md:flex-row justify-between items-center gap-4\">\n                    <div>\n                        <h2 className=\"text-3xl font-bold text-gray-800 flex items-center\"><ListTodo className=\"mr-3 text-indigo-600\" />Quadro de Atividades</h2>\n                        <p className=\"text-gray-600 mt-1\">Visualize e gerencie o fluxo de trabalho do dia a dia.</p>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                        <Button onClick={() => exportViewAsImage(tasksViewRef, 'quadro_atividades.png')} variant=\"secondary\" className=\"no-export\">\n                            <Presentation size={16}/> Exportar Imagem\n                        </Button>\n                        <Button onClick={() => onTaskClick(null)} variant=\"primary\" className=\"no-export\"><Plus size={16} /> Nova Tarefa</Button>\n                    </div>\n                </div>\n                <div className=\"flex flex-wrap justify-start items-center gap-4 border-t pt-4 mt-4 no-export\">\n                    <FilterList title=\"Prioridade\" options={PRIORITIES} active={filters.priority} onFilterChange={val => setFilters({...filters, priority: val})}/>\n                    <FilterList title=\"Status\" options={STATUSES} active={filters.status} onFilterChange={val => setFilters({...filters, status: val})}/>\n                    {Object.keys(allLabels).length > 0 && (\n                         <FilterList title=\"Etiqueta\" options={allLabels} active={filters.label} onFilterChange={val => setFilters({...filters, label: val})}/>\n                    )}\n                </div>\n            </Card>\n\n            <div className=\"flex gap-6 overflow-x-auto pb-4\">\n                {Object.keys(STATUSES).map(status => (\n                    <div key={status} className=\"flex-shrink-0 w-80 bg-gray-100 rounded-xl\">\n                        <div className={`p-4 sticky top-0 bg-gray-100 rounded-t-xl z-10 border-t-4 ${STATUSES[status].borderColor}`}>\n                            <div className=\"flex justify-between items-center\">\n                                <h3 className=\"font-bold text-gray-800\">{STATUSES[status].label}</h3>\n                                <span className=\"text-sm font-bold bg-gray-200 text-gray-600 px-2 py-1 rounded-full\">\n                                    {tasksByStatus[status].length}\n                                </span>\n                            </div>\n                        </div>\n                        <div className=\"p-4 space-y-4 overflow-y-auto\" style={{ maxHeight: 'calc(100vh - 300px)' }}>\n                            {tasksByStatus[status].map(task => (\n                                <TaskCard key={task.id} task={task} onTaskClick={onTaskClick} />\n                            ))}\n                        </div>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n// --- FIM DOS NOVOS COMPONENTES ---\n\n// --- Componente Principal ---\nexport default function App() {\n    const [user, setUser] = useState(null);\n    const [appId] = useState('general-control');\n    const [error, setError] = useState(null);\n    const [tasks, setTasks] = useState([]);\n    const [okrs, setOkrs] = useState([]);\n    const [cycles, setCycles] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [view, setView] = useState('tasks');\n    const [isTaskModalOpen, setIsTaskModalOpen] = useState(false);\n    const [isCyclesModalOpen, setIsCyclesModalOpen] = useState(false);\n    const [selectedTask, setSelectedTask] = useState(null);\n    const [filters, setFilters] = useState({ priority: 'Todos', status: 'Todos', label: 'Todos' });\n    const [isConfirmDeleteOpen, setIsConfirmDeleteOpen] = useState(false);\n    const [itemToDelete, setItemToDelete] = useState(null);\n    const [zoomLevel, setZoomLevel] = useState(5);\n    const [viewStartDate, setViewStartDate] = useState(() => {\n        const date = new Date();\n        date.setDate(date.getDate() - 15);\n        date.setHours(0,0,0,0);\n        return date;\n    });\n    \n    useEffect(() => {\n        const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n            setUser(currentUser);\n            setIsLoading(false);\n        });\n        return () => unsubscribe();\n    }, []);\n\n    useEffect(() => {\n        if (!user) {\n            setTasks([]);\n            setOkrs([]);\n            setCycles([]);\n            return;\n        };\n\n        const userId = user.uid;\n        const tasksCollectionPath = `artifacts/${appId}/users/${userId}/roadmap_tasks`;\n        const okrsCollectionPath = `artifacts/${appId}/users/${userId}/okrs`;\n        const cyclesCollectionPath = `artifacts/${appId}/users/${userId}/cycles`;\n\n        const unsubscribeTasks = onSnapshot(query(collection(db, tasksCollectionPath)), (snapshot) => {\n            setTasks(snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));\n        }, (err) => { console.error(\"Error fetching tasks:\", err); setError(\"Falha ao carregar tarefas.\"); });\n\n        const unsubscribeOkrs = onSnapshot(query(collection(db, okrsCollectionPath)), (snapshot) => {\n            const okrData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n            okrData.forEach(okr => {\n                if (okr.keyResults) {\n                    okr.keyResults.forEach(kr => {\n                        if (kr.updates) kr.updates.sort((a, b) => new Date(a.date) - new Date(b.date));\n                    });\n                }\n            });\n            setOkrs(okrData);\n        }, (err) => { console.error(\"Error fetching OKRs:\", err); setError(\"Falha ao carregar OKRs.\"); });\n\n        const unsubscribeCycles = onSnapshot(query(collection(db, cyclesCollectionPath)), (snapshot) => {\n            setCycles(snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));\n        }, (err) => { console.error(\"Error fetching cycles:\", err); setError(\"Falha ao carregar ciclos.\"); });\n\n        return () => { unsubscribeTasks(); unsubscribeOkrs(); unsubscribeCycles(); };\n    }, [user, appId]);\n\n    const handleSaveTask = async (taskData) => {\n        if (!user) return;\n        const collectionPath = `artifacts/${appId}/users/${user.uid}/roadmap_tasks`;\n        const dataForFirestore = {\n            title: taskData.title,\n            description: taskData.description,\n            priority: taskData.priority,\n            status: taskData.status,\n            startDate: taskData.startDate,\n            endDate: taskData.endDate,\n            labels: taskData.labels,\n            projectTag: taskData.projectTag,\n            blockerLog: taskData.blockerLog,\n            subtasks: taskData.subtasks,\n            customColor: taskData.customColor,\n            okrLink: taskData.okrLink\n        };\n\n        if (taskData.id) {\n            const docRef = doc(db, collectionPath, taskData.id);\n            await updateDoc(docRef, dataForFirestore);\n        } else {\n            dataForFirestore.createdAt = serverTimestamp();\n            dataForFirestore.humanId = `${Math.random().toString(36).substring(2, 6).toUpperCase()}`;\n            await addDoc(collection(db, collectionPath), dataForFirestore);\n        }\n    };\n\n    const handleSaveOkr = async (okrData) => {\n        if (!user) return;\n        const collectionPath = `artifacts/${appId}/users/${user.uid}/okrs`;\n        if (okrData.id) {\n            const { id, ...dataToUpdate } = okrData;\n            await updateDoc(doc(db, collectionPath, id), dataToUpdate);\n        } else {\n            const { id, ...dataToAdd } = okrData;\n            await addDoc(collection(db, collectionPath), { ...dataToAdd, createdAt: serverTimestamp() });\n        }\n    };\n\n    const handleSaveCycles = async (cyclesToSave) => {\n        if (!user) return;\n        const collectionPath = `artifacts/${appId}/users/${user.uid}/cycles`;\n        \n        for (const cycle of cyclesToSave) {\n            const { localId, ...data } = cycle;\n            if (cycle.id) {\n                await updateDoc(doc(db, collectionPath, cycle.id), data);\n            } else {\n                await addDoc(collection(db, collectionPath), data);\n            }\n        }\n    };\n\n    const handleDeleteCycle = async (cycleId) => {\n        if (!user) return;\n        const collectionPath = `artifacts/${appId}/users/${user.uid}/cycles`;\n        await deleteDoc(doc(db, collectionPath, cycleId));\n    };\n\n    const requestDelete = (id, type) => {\n        setItemToDelete({ id, type });\n        setIsConfirmDeleteOpen(true);\n    };\n\n    const confirmDelete = async () => {\n        if (!itemToDelete || !user) return;\n        const { id, type } = itemToDelete;\n        const collectionPath = `artifacts/${appId}/users/${user.uid}/${type === 'task' ? 'roadmap_tasks' : 'okrs'}`;\n        await deleteDoc(doc(db, collectionPath, id));\n        if (type === 'task') setIsTaskModalOpen(false);\n        setIsConfirmDeleteOpen(false);\n        setItemToDelete(null);\n    };\n\n    const handleOpenTaskModal = (task = null) => {\n        setSelectedTask(task);\n        setIsTaskModalOpen(true);\n    };\n\n    const handleLogout = () => {\n        signOut(auth).catch((error) => {\n            console.error(\"Erro ao sair:\", error);\n        });\n    };\n\n    const filteredTasks = useMemo(() => {\n        return tasks.filter(task => {\n            const statusMatch = filters.status === 'Todos' || task.status === filters.status;\n            const priorityMatch = filters.priority === 'Todos' || task.priority === filters.priority;\n            const labelMatch = filters.label === 'Todos' || (task.labels && task.labels.includes(filters.label));\n            return statusMatch && priorityMatch && labelMatch;\n        }).sort((a, b) => new Date(a.startDate) - new Date(b.startDate));\n    }, [tasks, filters]);\n\n    if (isLoading) {\n        return <div className=\"flex justify-center items-center min-h-screen bg-gray-50\"><p className=\"text-lg text-gray-600\">Carregando...</p></div>\n    }\n\n    if (!user) {\n        return <LoginScreen />;\n    }\n\n    return (\n        <div className=\"bg-gray-50 text-gray-800 min-h-screen p-4 md:p-6 font-sans\">\n            <div className=\"max-w-full mx-auto\">\n                <header className=\"mb-6 no-export\">\n                    <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n                        <div>\n                            <h1 className=\"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-cyan-600\">Norte Estratégico</h1>\n                            <p className=\"text-gray-600 mt-1\">Planeje, execute e apresente com clareza e foco.</p>\n                        </div>\n                        <div className=\"flex items-center gap-4\">\n                            <div className=\"flex items-center gap-2 text-sm text-gray-700\">\n                                <User size={16} />\n                                <span>{user.displayName || 'Usuário'}</span>\n                            </div>\n                            <Button onClick={handleLogout} variant=\"secondary\" className=\"!px-3 !py-2\">\n                                <LogOut size={16} />\n                            </Button>\n                        </div>\n                    </div>\n                     <div className=\"mt-4\">\n                        <div className=\"inline-flex items-center bg-gray-200 rounded-lg p-1 space-x-1\">\n                            <Button onClick={() => setView('tasks')} variant={view === 'tasks' ? 'primary' : 'secondary'} className=\"!shadow-none\"><ListTodo size={16} /> Atividades</Button>\n                            <Button onClick={() => setView('workspace')} variant={view === 'workspace' ? 'primary' : 'secondary'} className=\"!shadow-none\"><Layers size={16} /> Roadmap</Button>\n                            <Button onClick={() => setView('okr')} variant={view === 'okr' ? 'primary' : 'secondary'} className=\"!shadow-none\"><Target size={16} /> OKRs</Button>\n                            <Button onClick={() => setView('executive')} variant={view === 'executive' ? 'primary' : 'secondary'} className=\"!shadow-none\"><Briefcase size={16} /> Painel Executivo</Button>\n                        </div>\n                    </div>\n                </header>\n                <main>\n                    {view === 'tasks' && (\n                        <TasksView\n                            tasks={filteredTasks}\n                            onTaskClick={handleOpenTaskModal}\n                            filters={filters}\n                            setFilters={setFilters}\n                        />\n                    )}\n                    {view === 'workspace' && (\n                        <WorkspaceView\n                            tasks={filteredTasks}\n                            cycles={cycles}\n                            onTaskClick={handleOpenTaskModal}\n                            filters={filters}\n                            setFilters={setFilters}\n                            zoomLevel={zoomLevel}\n                            setZoomLevel={setZoomLevel}\n                            viewStartDate={viewStartDate}\n                            setViewStartDate={setViewStartDate}\n                            onOpenTaskModal={handleOpenTaskModal}\n                            onOpenCyclesModal={() => setIsCyclesModalOpen(true)}\n                        />\n                    )}\n                    {view === 'okr' && (\n                        <OkrView \n                            okrs={okrs}\n                            tasks={tasks}\n                            onSave={handleSaveOkr}\n                            onDelete={requestDelete}\n                        />\n                    )}\n                    {view === 'executive' && <ExecutiveView tasks={tasks} okrs={okrs} onSaveOkr={handleSaveOkr} />}\n                </main>\n                <TaskModal\n                    isOpen={isTaskModalOpen}\n                    onClose={() => setIsTaskModalOpen(false)}\n                    task={selectedTask}\n                    tasks={tasks}\n                    okrs={okrs}\n                    onSave={handleSaveTask}\n                    onDeleteRequest={requestDelete}\n                />\n                <CyclesModal \n                    isOpen={isCyclesModalOpen}\n                    onClose={() => setIsCyclesModalOpen(false)}\n                    cycles={cycles}\n                    onSave={handleSaveCycles}\n                    onDelete={handleDeleteCycle}\n                />\n                <ConfirmModal\n                    isOpen={isConfirmDeleteOpen}\n                    onClose={() => setIsConfirmDeleteOpen(false)}\n                    onConfirm={confirmDelete}\n                    title=\"Confirmar Exclusão\"\n                >\n                    <p>Tem certeza que deseja excluir este item? Esta ação não pode ser desfeita.</p>\n                </ConfirmModal>\n            </div>\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}